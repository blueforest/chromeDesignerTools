!function(t,e){function i(t){return R.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}function n(t){if(!xi[t]){var e=D.body,i=R("<"+t+">").appendTo(e),n=i.css("display");i.remove(),("none"===n||""===n)&&(gi||(gi=D.createElement("iframe"),gi.frameBorder=gi.width=gi.height=0),e.appendChild(gi),mi&&gi.createElement||(mi=(gi.contentWindow||gi.contentDocument).document,mi.write(("CSS1Compat"===D.compatMode?"<!doctype html>":"")+"<html><body>"),mi.close()),i=mi.createElement(t),mi.body.appendChild(i),n=R.css(i,"display"),e.removeChild(gi)),xi[t]=n}return xi[t]}function r(t,e){var i={};return R.each(_i.concat.apply([],_i.slice(0,e)),function(){i[this]=t}),i}function a(){yi=e}function o(){return setTimeout(a,0),yi=R.now()}function s(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function c(){try{return new t.XMLHttpRequest}catch(e){}}function l(t,i){t.dataFilter&&(i=t.dataFilter(i,t.dataType));var n,r,a,o,s,c,l,h,u=t.dataTypes,d={},f=u.length,p=u[0];for(n=1;f>n;n++){if(1===n)for(r in t.converters)"string"==typeof r&&(d[r.toLowerCase()]=t.converters[r]);if(o=p,p=u[n],"*"===p)p=o;else if("*"!==o&&o!==p){if(s=o+" "+p,c=d[s]||d["* "+p],!c){h=e;for(l in d)if(a=l.split(" "),(a[0]===o||"*"===a[0])&&(h=d[a[1]+" "+p])){l=d[l],l===!0?c=h:h===!0&&(c=l);break}}!c&&!h&&R.error("No conversion from "+s.replace(" "," to ")),c!==!0&&(i=c?c(i):h(l(i)))}}return i}function h(t,i,n){var r,a,o,s,c=t.contents,l=t.dataTypes,h=t.responseFields;for(a in h)a in n&&(i[h[a]]=n[a]);for(;"*"===l[0];)l.shift(),r===e&&(r=t.mimeType||i.getResponseHeader("content-type"));if(r)for(a in c)if(c[a]&&c[a].test(r)){l.unshift(a);break}if(l[0]in n)o=l[0];else{for(a in n){if(!l[0]||t.converters[a+" "+l[0]]){o=a;break}s||(s=a)}o=o||s}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function u(t,e,i,n){if(R.isArray(e))R.each(e,function(e,r){i||ze.test(t)?n(t,r):u(t+"["+("object"==typeof r||R.isArray(r)?e:"")+"]",r,i,n)});else if(i||null==e||"object"!=typeof e)n(t,e);else for(var r in e)u(t+"["+r+"]",e[r],i,n)}function d(t,i){var n,r,a=R.ajaxSettings.flatOptions||{};for(n in i)i[n]!==e&&((a[n]?t:r||(r={}))[n]=i[n]);r&&R.extend(!0,t,r)}function f(t,i,n,r,a,o){a=a||i.dataTypes[0],o=o||{},o[a]=!0;for(var s,c=t[a],l=0,h=c?c.length:0,u=t===oi;h>l&&(u||!s);l++)s=c[l](i,n,r),"string"==typeof s&&(!u||o[s]?s=e:(i.dataTypes.unshift(s),s=f(t,i,n,r,s,o)));return(u||!s)&&!o["*"]&&(s=f(t,i,n,r,"*",o)),s}function p(t){return function(e,i){if("string"!=typeof e&&(i=e,e="*"),R.isFunction(i))for(var n,r,a,o=e.toLowerCase().split(ii),s=0,c=o.length;c>s;s++)n=o[s],a=/^\+/.test(n),a&&(n=n.substr(1)||"*"),r=t[n]=t[n]||[],r[a?"unshift":"push"](i)}}function g(t,e,i){var n="width"===e?t.offsetWidth:t.offsetHeight,r="width"===e?Oe:Be,a=0,o=r.length;if(n>0){if("border"!==i)for(;o>a;a++)i||(n-=parseFloat(R.css(t,"padding"+r[a]))||0),"margin"===i?n+=parseFloat(R.css(t,i+r[a]))||0:n-=parseFloat(R.css(t,"border"+r[a]+"Width"))||0;return n+"px"}if(n=Pe(t,e,e),(0>n||null==n)&&(n=t.style[e]||0),n=parseFloat(n)||0,i)for(;o>a;a++)n+=parseFloat(R.css(t,"padding"+r[a]))||0,"padding"!==i&&(n+=parseFloat(R.css(t,"border"+r[a]+"Width"))||0),"margin"===i&&(n+=parseFloat(R.css(t,i+r[a]))||0);return n+"px"}function m(t,e){e.src?R.ajax({url:e.src,async:!1,dataType:"script"}):R.globalEval((e.text||e.textContent||e.innerHTML||"").replace(Ae,"/*$0*/")),e.parentNode&&e.parentNode.removeChild(e)}function v(t){var e=D.createElement("div");return Fe.appendChild(e),e.innerHTML=t.outerHTML,e.firstChild}function y(t){var e=(t.nodeName||"").toLowerCase();"input"===e?x(t):"script"!==e&&"undefined"!=typeof t.getElementsByTagName&&R.grep(t.getElementsByTagName("input"),x)}function x(t){("checkbox"===t.type||"radio"===t.type)&&(t.defaultChecked=t.checked)}function b(t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName("*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll("*"):[]}function w(t,e){var i;1===e.nodeType&&(e.clearAttributes&&e.clearAttributes(),e.mergeAttributes&&e.mergeAttributes(t),i=e.nodeName.toLowerCase(),"object"===i?e.outerHTML=t.outerHTML:"input"!==i||"checkbox"!==t.type&&"radio"!==t.type?"option"===i?e.selected=t.defaultSelected:("input"===i||"textarea"===i)&&(e.defaultValue=t.defaultValue):(t.checked&&(e.defaultChecked=e.checked=t.checked),e.value!==t.value&&(e.value=t.value)),e.removeAttribute(R.expando))}function _(t,e){if(1===e.nodeType&&R.hasData(t)){var i,n,r,a=R._data(t),o=R._data(e,a),s=a.events;if(s){delete o.handle,o.events={};for(i in s)for(n=0,r=s[i].length;r>n;n++)R.event.add(e,i+(s[i][n].namespace?".":"")+s[i][n].namespace,s[i][n],s[i][n].data)}o.data&&(o.data=R.extend({},o.data))}}function C(t){return R.nodeName(t,"table")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function K(t){var e=ge.split("|"),i=t.createDocumentFragment();if(i.createElement)for(;e.length;)i.createElement(e.pop());return i}function S(t,e,i){if(e=e||0,R.isFunction(e))return R.grep(t,function(t,n){var r=!!e.call(t,n,t);return r===i});if(e.nodeType)return R.grep(t,function(t){return t===e===i});if("string"==typeof e){var n=R.grep(t,function(t){return 1===t.nodeType});if(ue.test(e))return R.filter(e,n,!i);e=R.filter(e,n)}return R.grep(t,function(t){return R.inArray(t,e)>=0===i})}function T(t){return!t||!t.parentNode||11===t.parentNode.nodeType}function A(){return!0}function k(){return!1}function F(t,e,i){var n=e+"defer",r=e+"queue",a=e+"mark",o=R._data(t,n);!(!o||"queue"!==i&&R._data(t,r)||"mark"!==i&&R._data(t,a)||!setTimeout(function(){!R._data(t,r)&&!R._data(t,a)&&(R.removeData(t,n,!0),o.fire())},0))}function P(t){for(var e in t)if(("data"!==e||!R.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function L(t,i,n){if(n===e&&1===t.nodeType){var r="data-"+i.replace(O,"-$1").toLowerCase();if(n=t.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:R.isNumeric(n)?parseFloat(n):G.test(n)?R.parseJSON(n):n}catch(a){}R.data(t,i,n)}else n=e}return n}function N(t){var e,i,n=H[t]={};for(t=t.split(/\s+/),e=0,i=t.length;i>e;e++)n[t[e]]=!0;return n}var D=t.document,E=t.navigator,M=t.location,R=function(){function i(){if(!s.isReady){try{D.documentElement.doScroll("left")}catch(t){return setTimeout(i,1),void 0}s.ready()}}var n,r,a,o,s=function(t,e){return new s.fn.init(t,e,n)},c=t.jQuery,l=t.$,h=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,u=/\S/,d=/^\s+/,f=/\s+$/,p=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,g=/^[\],:{}\s]*$/,m=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,v=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,y=/(?:^|:|,)(?:\s*\[)+/g,x=/(webkit)[ \/]([\w.]+)/,b=/(opera)(?:.*version)?[ \/]([\w.]+)/,w=/(msie) ([\w.]+)/,_=/(mozilla)(?:.*? rv:([\w.]+))?/,C=/-([a-z]|[0-9])/gi,K=/^-ms-/,S=function(t,e){return(e+"").toUpperCase()},T=E.userAgent,A=Object.prototype.toString,k=Object.prototype.hasOwnProperty,F=Array.prototype.push,P=Array.prototype.slice,L=String.prototype.trim,N=Array.prototype.indexOf,M={};return s.fn=s.prototype={constructor:s,init:function(t,i,n){var r,a,o,c;if(!t)return this;if(t.nodeType)return this.context=this[0]=t,this.length=1,this;if("body"===t&&!i&&D.body)return this.context=D,this[0]=D.body,this.selector=t,this.length=1,this;if("string"==typeof t){if(r="<"!==t.charAt(0)||">"!==t.charAt(t.length-1)||t.length<3?h.exec(t):[null,t,null],r&&(r[1]||!i)){if(r[1])return i=i instanceof s?i[0]:i,c=i?i.ownerDocument||i:D,o=p.exec(t),o?s.isPlainObject(i)?(t=[D.createElement(o[1])],s.fn.attr.call(t,i,!0)):t=[c.createElement(o[1])]:(o=s.buildFragment([r[1]],[c]),t=(o.cacheable?s.clone(o.fragment):o.fragment).childNodes),s.merge(this,t);if(a=D.getElementById(r[2]),a&&a.parentNode){if(a.id!==r[2])return n.find(t);this.length=1,this[0]=a}return this.context=D,this.selector=t,this}return!i||i.jquery?(i||n).find(t):this.constructor(i).find(t)}return s.isFunction(t)?n.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),s.makeArray(t,this))},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return P.call(this,0)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t,e,i){var n=this.constructor();return s.isArray(t)?F.apply(n,t):s.merge(n,t),n.prevObject=this,n.context=this.context,"find"===e?n.selector=this.selector+(this.selector?" ":"")+i:e&&(n.selector=this.selector+"."+e+"("+i+")"),n},each:function(t,e){return s.each(this,t,e)},ready:function(t){return s.bindReady(),a.add(t),this},eq:function(t){return t=+t,-1===t?this.slice(t):this.slice(t,t+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(P.apply(this,arguments),"slice",P.call(arguments).join(","))},map:function(t){return this.pushStack(s.map(this,function(e,i){return t.call(e,i,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:F,sort:[].sort,splice:[].splice},s.fn.init.prototype=s.fn,s.extend=s.fn.extend=function(){var t,i,n,r,a,o,c=arguments[0]||{},l=1,h=arguments.length,u=!1;for("boolean"==typeof c&&(u=c,c=arguments[1]||{},l=2),"object"!=typeof c&&!s.isFunction(c)&&(c={}),h===l&&(c=this,--l);h>l;l++)if(null!=(t=arguments[l]))for(i in t)n=c[i],r=t[i],c!==r&&(u&&r&&(s.isPlainObject(r)||(a=s.isArray(r)))?(a?(a=!1,o=n&&s.isArray(n)?n:[]):o=n&&s.isPlainObject(n)?n:{},c[i]=s.extend(u,o,r)):r!==e&&(c[i]=r));return c},s.extend({noConflict:function(e){return t.$===s&&(t.$=l),e&&t.jQuery===s&&(t.jQuery=c),s},isReady:!1,readyWait:1,holdReady:function(t){t?s.readyWait++:s.ready(!0)},ready:function(t){if(t===!0&&!--s.readyWait||t!==!0&&!s.isReady){if(!D.body)return setTimeout(s.ready,1);if(s.isReady=!0,t!==!0&&--s.readyWait>0)return;a.fireWith(D,[s]),s.fn.trigger&&s(D).trigger("ready").off("ready")}},bindReady:function(){if(!a){if(a=s.Callbacks("once memory"),"complete"===D.readyState)return setTimeout(s.ready,1);if(D.addEventListener)D.addEventListener("DOMContentLoaded",o,!1),t.addEventListener("load",s.ready,!1);else if(D.attachEvent){D.attachEvent("onreadystatechange",o),t.attachEvent("onload",s.ready);var e=!1;try{e=null==t.frameElement}catch(n){}D.documentElement.doScroll&&e&&i()}}},isFunction:function(t){return"function"===s.type(t)},isArray:Array.isArray||function(t){return"array"===s.type(t)},isWindow:function(t){return t&&"object"==typeof t&&"setInterval"in t},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?String(t):M[A.call(t)]||"object"},isPlainObject:function(t){if(!t||"object"!==s.type(t)||t.nodeType||s.isWindow(t))return!1;try{if(t.constructor&&!k.call(t,"constructor")&&!k.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}var n;for(n in t);return n===e||k.call(t,n)},isEmptyObject:function(t){for(var e in t)return!1;return!0},error:function(t){throw new Error(t)},parseJSON:function(e){return"string"==typeof e&&e?(e=s.trim(e),t.JSON&&t.JSON.parse?t.JSON.parse(e):g.test(e.replace(m,"@").replace(v,"]").replace(y,""))?new Function("return "+e)():(s.error("Invalid JSON: "+e),void 0)):null},parseXML:function(i){var n,r;try{t.DOMParser?(r=new DOMParser,n=r.parseFromString(i,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(i))}catch(a){n=e}return(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)&&s.error("Invalid XML: "+i),n},noop:function(){},globalEval:function(e){e&&u.test(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(K,"ms-").replace(C,S)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toUpperCase()===e.toUpperCase()},each:function(t,i,n){var r,a=0,o=t.length,c=o===e||s.isFunction(t);if(n)if(c){for(r in t)if(i.apply(t[r],n)===!1)break}else for(;o>a&&i.apply(t[a++],n)!==!1;);else if(c){for(r in t)if(i.call(t[r],r,t[r])===!1)break}else for(;o>a&&i.call(t[a],a,t[a++])!==!1;);return t},trim:L?function(t){return null==t?"":L.call(t)}:function(t){return null==t?"":(t+"").replace(d,"").replace(f,"")},makeArray:function(t,e){var i=e||[];if(null!=t){var n=s.type(t);null==t.length||"string"===n||"function"===n||"regexp"===n||s.isWindow(t)?F.call(i,t):s.merge(i,t)}return i},inArray:function(t,e,i){var n;if(e){if(N)return N.call(e,t,i);for(n=e.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in e&&e[i]===t)return i}return-1},merge:function(t,i){var n=t.length,r=0;if("number"==typeof i.length)for(var a=i.length;a>r;r++)t[n++]=i[r];else for(;i[r]!==e;)t[n++]=i[r++];return t.length=n,t},grep:function(t,e,i){var n,r=[];i=!!i;for(var a=0,o=t.length;o>a;a++)n=!!e(t[a],a),i!==n&&r.push(t[a]);return r},map:function(t,i,n){var r,a,o=[],c=0,l=t.length,h=t instanceof s||l!==e&&"number"==typeof l&&(l>0&&t[0]&&t[l-1]||0===l||s.isArray(t));if(h)for(;l>c;c++)r=i(t[c],c,n),null!=r&&(o[o.length]=r);else for(a in t)r=i(t[a],a,n),null!=r&&(o[o.length]=r);return o.concat.apply([],o)},guid:1,proxy:function(t,i){if("string"==typeof i){var n=t[i];i=t,t=n}if(!s.isFunction(t))return e;var r=P.call(arguments,2),a=function(){return t.apply(i,r.concat(P.call(arguments)))};return a.guid=t.guid=t.guid||a.guid||s.guid++,a},access:function(t,i,n,r,a,o){var c=t.length;if("object"==typeof i){for(var l in i)s.access(t,l,i[l],r,a,n);return t}if(n!==e){r=!o&&r&&s.isFunction(n);for(var h=0;c>h;h++)a(t[h],i,r?n.call(t[h],h,a(t[h],i)):n,o);return t}return c?a(t[0],i):e},now:function(){return(new Date).getTime()},uaMatch:function(t){t=t.toLowerCase();var e=x.exec(t)||b.exec(t)||w.exec(t)||t.indexOf("compatible")<0&&_.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}},sub:function(){function t(e,i){return new t.fn.init(e,i)}s.extend(!0,t,this),t.superclass=this,t.fn=t.prototype=this(),t.fn.constructor=t,t.sub=this.sub,t.fn.init=function(i,n){return n&&n instanceof s&&!(n instanceof t)&&(n=t(n)),s.fn.init.call(this,i,n,e)},t.fn.init.prototype=t.fn;var e=t(D);return t},browser:{}}),s.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(t,e){M["[object "+e+"]"]=e.toLowerCase()}),r=s.uaMatch(T),r.browser&&(s.browser[r.browser]=!0,s.browser.version=r.version),s.browser.webkit&&(s.browser.safari=!0),u.test(" ")&&(d=/^[\s\xA0]+/,f=/[\s\xA0]+$/),n=s(D),D.addEventListener?o=function(){D.removeEventListener("DOMContentLoaded",o,!1),s.ready()}:D.attachEvent&&(o=function(){"complete"===D.readyState&&(D.detachEvent("onreadystatechange",o),s.ready())}),s}(),H={};R.Callbacks=function(t){t=t?H[t]||N(t):{};var i,n,r,a,o,s=[],c=[],l=function(e){var i,n,r,a;for(i=0,n=e.length;n>i;i++)r=e[i],a=R.type(r),"array"===a?l(r):"function"===a&&(!t.unique||!u.has(r))&&s.push(r)},h=function(e,l){for(l=l||[],i=!t.memory||[e,l],n=!0,o=r||0,r=0,a=s.length;s&&a>o;o++)if(s[o].apply(e,l)===!1&&t.stopOnFalse){i=!0;break}n=!1,s&&(t.once?i===!0?u.disable():s=[]:c&&c.length&&(i=c.shift(),u.fireWith(i[0],i[1])))},u={add:function(){if(s){var t=s.length;l(arguments),n?a=s.length:i&&i!==!0&&(r=t,h(i[0],i[1]))}return this},remove:function(){if(s)for(var e=arguments,i=0,r=e.length;r>i;i++)for(var c=0;c<s.length&&(e[i]!==s[c]||(n&&a>=c&&(a--,o>=c&&o--),s.splice(c--,1),!t.unique));c++);return this},has:function(t){if(s)for(var e=0,i=s.length;i>e;e++)if(t===s[e])return!0;return!1},empty:function(){return s=[],this},disable:function(){return s=c=i=e,this},disabled:function(){return!s},lock:function(){return c=e,(!i||i===!0)&&u.disable(),this},locked:function(){return!c},fireWith:function(e,r){return c&&(n?t.once||c.push([e,r]):(!t.once||!i)&&h(e,r)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u};var I=[].slice;R.extend({Deferred:function(t){var e,i=R.Callbacks("once memory"),n=R.Callbacks("once memory"),r=R.Callbacks("memory"),a="pending",o={resolve:i,reject:n,notify:r},s={done:i.add,fail:n.add,progress:r.add,state:function(){return a},isResolved:i.fired,isRejected:n.fired,then:function(t,e,i){return c.done(t).fail(e).progress(i),this},always:function(){return c.done.apply(c,arguments).fail.apply(c,arguments),this},pipe:function(t,e,i){return R.Deferred(function(n){R.each({done:[t,"resolve"],fail:[e,"reject"],progress:[i,"notify"]},function(t,e){var i,r=e[0],a=e[1];R.isFunction(r)?c[t](function(){i=r.apply(this,arguments),i&&R.isFunction(i.promise)?i.promise().then(n.resolve,n.reject,n.notify):n[a+"With"](this===c?n:this,[i])}):c[t](n[a])})}).promise()},promise:function(t){if(null==t)t=s;else for(var e in s)t[e]=s[e];return t}},c=s.promise({});for(e in o)c[e]=o[e].fire,c[e+"With"]=o[e].fireWith;return c.done(function(){a="resolved"},n.disable,r.lock).fail(function(){a="rejected"},i.disable,r.lock),t&&t.call(c,c),c},when:function(t){function e(t){return function(e){o[t]=arguments.length>1?I.call(arguments,0):e,c.notifyWith(l,o)}}function i(t){return function(e){n[t]=arguments.length>1?I.call(arguments,0):e,--s||c.resolveWith(c,n)}}var n=I.call(arguments,0),r=0,a=n.length,o=Array(a),s=a,c=1>=a&&t&&R.isFunction(t.promise)?t:R.Deferred(),l=c.promise();if(a>1){for(;a>r;r++)n[r]&&n[r].promise&&R.isFunction(n[r].promise)?n[r].promise().then(i(r),c.reject,e(r)):--s;s||c.resolveWith(c,n)}else c!==t&&c.resolveWith(c,a?[t]:[]);return l}}),R.support=function(){var e,i,n,r,a,o,s,c,l,h,u,d,f=D.createElement("div");if(D.documentElement,f.setAttribute("className","t"),f.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",i=f.getElementsByTagName("*"),n=f.getElementsByTagName("a")[0],!i||!i.length||!n)return{};r=D.createElement("select"),a=r.appendChild(D.createElement("option")),o=f.getElementsByTagName("input")[0],e={leadingWhitespace:3===f.firstChild.nodeType,tbody:!f.getElementsByTagName("tbody").length,htmlSerialize:!!f.getElementsByTagName("link").length,style:/top/.test(n.getAttribute("style")),hrefNormalized:"/a"===n.getAttribute("href"),opacity:/^0.55/.test(n.style.opacity),cssFloat:!!n.style.cssFloat,checkOn:"on"===o.value,optSelected:a.selected,getSetAttribute:"t"!==f.className,enctype:!!D.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==D.createElement("nav").cloneNode(!0).outerHTML,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},o.checked=!0,e.noCloneChecked=o.cloneNode(!0).checked,r.disabled=!0,e.optDisabled=!a.disabled;try{delete f.test}catch(p){e.deleteExpando=!1}if(!f.addEventListener&&f.attachEvent&&f.fireEvent&&(f.attachEvent("onclick",function(){e.noCloneEvent=!1}),f.cloneNode(!0).fireEvent("onclick")),o=D.createElement("input"),o.value="t",o.setAttribute("type","radio"),e.radioValue="t"===o.value,o.setAttribute("checked","checked"),f.appendChild(o),c=D.createDocumentFragment(),c.appendChild(f.lastChild),e.checkClone=c.cloneNode(!0).cloneNode(!0).lastChild.checked,e.appendChecked=o.checked,c.removeChild(o),c.appendChild(f),f.innerHTML="",t.getComputedStyle&&(s=D.createElement("div"),s.style.width="0",s.style.marginRight="0",f.style.width="2px",f.appendChild(s),e.reliableMarginRight=0===(parseInt((t.getComputedStyle(s,null)||{marginRight:0}).marginRight,10)||0)),f.attachEvent)for(u in{submit:1,change:1,focusin:1})h="on"+u,d=h in f,d||(f.setAttribute(h,"return;"),d="function"==typeof f[h]),e[u+"Bubbles"]=d;return c.removeChild(f),c=r=a=s=f=o=null,R(function(){var t,i,n,r,a,o,s,c,h,u,p=D.getElementsByTagName("body")[0];!p||(o=1,s="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",c="visibility:hidden;border:0;",h="style='"+s+"border:5px solid #000;padding:0;'",u="<div "+h+"><div></div></div>"+"<table "+h+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",t=D.createElement("div"),t.style.cssText=c+"width:0;height:0;position:static;top:0;margin-top:"+o+"px",p.insertBefore(t,p.firstChild),f=D.createElement("div"),t.appendChild(f),f.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",l=f.getElementsByTagName("td"),d=0===l[0].offsetHeight,l[0].style.display="",l[1].style.display="none",e.reliableHiddenOffsets=d&&0===l[0].offsetHeight,f.innerHTML="",f.style.width=f.style.paddingLeft="1px",R.boxModel=e.boxModel=2===f.offsetWidth,"undefined"!=typeof f.style.zoom&&(f.style.display="inline",f.style.zoom=1,e.inlineBlockNeedsLayout=2===f.offsetWidth,f.style.display="",f.innerHTML="<div style='width:4px;'></div>",e.shrinkWrapBlocks=2!==f.offsetWidth),f.style.cssText=s+c,f.innerHTML=u,i=f.firstChild,n=i.firstChild,r=i.nextSibling.firstChild.firstChild,a={doesNotAddBorder:5!==n.offsetTop,doesAddBorderForTableAndCells:5===r.offsetTop},n.style.position="fixed",n.style.top="20px",a.fixedPosition=20===n.offsetTop||15===n.offsetTop,n.style.position=n.style.top="",i.style.overflow="hidden",i.style.position="relative",a.subtractsBorderForOverflowNotVisible=-5===n.offsetTop,a.doesNotIncludeMarginInBodyOffset=p.offsetTop!==o,p.removeChild(t),f=t=null,R.extend(e,a))}),e}();var G=/^(?:\{.*\}|\[.*\])$/,O=/([A-Z])/g;R.extend({cache:{},uuid:0,expando:"jQuery"+(R.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(t){return t=t.nodeType?R.cache[t[R.expando]]:t[R.expando],!!t&&!P(t)},data:function(t,i,n,r){if(R.acceptData(t)){var a,o,s,c=R.expando,l="string"==typeof i,h=t.nodeType,u=h?R.cache:t,d=h?t[c]:t[c]&&c,f="events"===i;if(!(d&&u[d]&&(f||r||u[d].data)||!l||n!==e))return;return d||(h?t[c]=d=++R.uuid:d=c),u[d]||(u[d]={},h||(u[d].toJSON=R.noop)),("object"==typeof i||"function"==typeof i)&&(r?u[d]=R.extend(u[d],i):u[d].data=R.extend(u[d].data,i)),a=o=u[d],r||(o.data||(o.data={}),o=o.data),n!==e&&(o[R.camelCase(i)]=n),f&&!o[i]?a.events:(l?(s=o[i],null==s&&(s=o[R.camelCase(i)])):s=o,s)}},removeData:function(t,e,i){if(R.acceptData(t)){var n,r,a,o=R.expando,s=t.nodeType,c=s?R.cache:t,l=s?t[o]:o;if(!c[l])return;if(e&&(n=i?c[l]:c[l].data)){R.isArray(e)||(e in n?e=[e]:(e=R.camelCase(e),e=e in n?[e]:e.split(" ")));for(r=0,a=e.length;a>r;r++)delete n[e[r]];if(!(i?P:R.isEmptyObject)(n))return}if(!i&&(delete c[l].data,!P(c[l])))return;R.support.deleteExpando||!c.setInterval?delete c[l]:c[l]=null,s&&(R.support.deleteExpando?delete t[o]:t.removeAttribute?t.removeAttribute(o):t[o]=null)}},_data:function(t,e,i){return R.data(t,e,i,!0)},acceptData:function(t){if(t.nodeName){var e=R.noData[t.nodeName.toLowerCase()];if(e)return e!==!0&&t.getAttribute("classid")===e}return!0}}),R.fn.extend({data:function(t,i){var n,r,a,o=null;if("undefined"==typeof t){if(this.length&&(o=R.data(this[0]),1===this[0].nodeType&&!R._data(this[0],"parsedAttrs"))){r=this[0].attributes;for(var s=0,c=r.length;c>s;s++)a=r[s].name,0===a.indexOf("data-")&&(a=R.camelCase(a.substring(5)),L(this[0],a,o[a]));R._data(this[0],"parsedAttrs",!0)}return o}return"object"==typeof t?this.each(function(){R.data(this,t)}):(n=t.split("."),n[1]=n[1]?"."+n[1]:"",i===e?(o=this.triggerHandler("getData"+n[1]+"!",[n[0]]),o===e&&this.length&&(o=R.data(this[0],t),o=L(this[0],t,o)),o===e&&n[1]?this.data(n[0]):o):this.each(function(){var e=R(this),r=[n[0],i];e.triggerHandler("setData"+n[1]+"!",r),R.data(this,t,i),e.triggerHandler("changeData"+n[1]+"!",r)}))},removeData:function(t){return this.each(function(){R.removeData(this,t)})}}),R.extend({_mark:function(t,e){t&&(e=(e||"fx")+"mark",R._data(t,e,(R._data(t,e)||0)+1))},_unmark:function(t,e,i){if(t!==!0&&(i=e,e=t,t=!1),e){i=i||"fx";var n=i+"mark",r=t?0:(R._data(e,n)||1)-1;r?R._data(e,n,r):(R.removeData(e,n,!0),F(e,i,"mark"))}},queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=R._data(t,e),i&&(!n||R.isArray(i)?n=R._data(t,e,R.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=R.queue(t,e),n=i.shift(),r={};"inprogress"===n&&(n=i.shift()),n&&("fx"===e&&i.unshift("inprogress"),R._data(t,e+".run",r),n.call(t,function(){R.dequeue(t,e)},r)),i.length||(R.removeData(t,e+"queue "+e+".run",!0),F(t,e,"queue"))}}),R.fn.extend({queue:function(t,i){return"string"!=typeof t&&(i=t,t="fx"),i===e?R.queue(this[0],t):this.each(function(){var e=R.queue(this,t,i);"fx"===t&&"inprogress"!==e[0]&&R.dequeue(this,t)})},dequeue:function(t){return this.each(function(){R.dequeue(this,t)})},delay:function(t,e){return t=R.fx?R.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,i){function n(){--c||a.resolveWith(o,[o])}"string"!=typeof t&&(i=t,t=e),t=t||"fx";for(var r,a=R.Deferred(),o=this,s=o.length,c=1,l=t+"defer",h=t+"queue",u=t+"mark";s--;)(r=R.data(o[s],l,e,!0)||(R.data(o[s],h,e,!0)||R.data(o[s],u,e,!0))&&R.data(o[s],l,R.Callbacks("once memory"),!0))&&(c++,r.add(n));return n(),a.promise()}});var B,j,W,U=/[\n\t\r]/g,z=/\s+/,q=/\r/g,X=/^(?:button|input)$/i,$=/^(?:button|input|object|select|textarea)$/i,Y=/^a(?:rea)?$/i,V=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Q=R.support.getSetAttribute;R.fn.extend({attr:function(t,e){return R.access(this,t,e,!0,R.attr)},removeAttr:function(t){return this.each(function(){R.removeAttr(this,t)})},prop:function(t,e){return R.access(this,t,e,!0,R.prop)},removeProp:function(t){return t=R.propFix[t]||t,this.each(function(){try{this[t]=e,delete this[t]}catch(i){}})},addClass:function(t){var e,i,n,r,a,o,s;if(R.isFunction(t))return this.each(function(e){R(this).addClass(t.call(this,e,this.className))});if(t&&"string"==typeof t)for(e=t.split(z),i=0,n=this.length;n>i;i++)if(r=this[i],1===r.nodeType)if(r.className||1!==e.length){for(a=" "+r.className+" ",o=0,s=e.length;s>o;o++)~a.indexOf(" "+e[o]+" ")||(a+=e[o]+" ");r.className=R.trim(a)}else r.className=t;return this},removeClass:function(t){var i,n,r,a,o,s,c;if(R.isFunction(t))return this.each(function(e){R(this).removeClass(t.call(this,e,this.className))});if(t&&"string"==typeof t||t===e)for(i=(t||"").split(z),n=0,r=this.length;r>n;n++)if(a=this[n],1===a.nodeType&&a.className)if(t){for(o=(" "+a.className+" ").replace(U," "),s=0,c=i.length;c>s;s++)o=o.replace(" "+i[s]+" "," ");a.className=R.trim(o)}else a.className="";return this},toggleClass:function(t,e){var i=typeof t,n="boolean"==typeof e;return R.isFunction(t)?this.each(function(i){R(this).toggleClass(t.call(this,i,this.className,e),e)}):this.each(function(){if("string"===i)for(var r,a=0,o=R(this),s=e,c=t.split(z);r=c[a++];)s=n?s:!o.hasClass(r),o[s?"addClass":"removeClass"](r);else("undefined"===i||"boolean"===i)&&(this.className&&R._data(this,"__className__",this.className),this.className=this.className||t===!1?"":R._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(U," ").indexOf(e)>-1)return!0;return!1},val:function(t){var i,n,r,a=this[0];return arguments.length?(r=R.isFunction(t),this.each(function(n){var a,o=R(this);1===this.nodeType&&(a=r?t.call(this,n,o.val()):t,null==a?a="":"number"==typeof a?a+="":R.isArray(a)&&(a=R.map(a,function(t){return null==t?"":t+""})),i=R.valHooks[this.nodeName.toLowerCase()]||R.valHooks[this.type],i&&"set"in i&&i.set(this,a,"value")!==e||(this.value=a))})):a?(i=R.valHooks[a.nodeName.toLowerCase()]||R.valHooks[a.type],i&&"get"in i&&(n=i.get(a,"value"))!==e?n:(n=a.value,"string"==typeof n?n.replace(q,""):null==n?"":n)):void 0}}),R.extend({valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){var e,i,n,r,a=t.selectedIndex,o=[],s=t.options,c="select-one"===t.type;if(0>a)return null;for(i=c?a:0,n=c?a+1:s.length;n>i;i++)if(r=s[i],!(!r.selected||(R.support.optDisabled?r.disabled:null!==r.getAttribute("disabled"))||r.parentNode.disabled&&R.nodeName(r.parentNode,"optgroup"))){if(e=R(r).val(),c)return e;o.push(e)}return c&&!o.length&&s.length?R(s[a]).val():o},set:function(t,e){var i=R.makeArray(e);return R(t).find("option").each(function(){this.selected=R.inArray(R(this).val(),i)>=0}),i.length||(t.selectedIndex=-1),i}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(t,i,n,r){var a,o,s,c=t.nodeType;return t&&3!==c&&8!==c&&2!==c?r&&i in R.attrFn?R(t)[i](n):"undefined"==typeof t.getAttribute?R.prop(t,i,n):(s=1!==c||!R.isXMLDoc(t),s&&(i=i.toLowerCase(),o=R.attrHooks[i]||(V.test(i)?j:B)),n!==e?null===n?(R.removeAttr(t,i),void 0):o&&"set"in o&&s&&(a=o.set(t,n,i))!==e?a:(t.setAttribute(i,""+n),n):o&&"get"in o&&s&&null!==(a=o.get(t,i))?a:(a=t.getAttribute(i),null===a?e:a)):void 0},removeAttr:function(t,e){var i,n,r,a,o=0;if(e&&1===t.nodeType)for(n=e.toLowerCase().split(z),a=n.length;a>o;o++)r=n[o],r&&(i=R.propFix[r]||r,R.attr(t,r,""),t.removeAttribute(Q?r:i),V.test(r)&&i in t&&(t[i]=!1))},attrHooks:{type:{set:function(t,e){if(X.test(t.nodeName)&&t.parentNode)R.error("type property can't be changed");else if(!R.support.radioValue&&"radio"===e&&R.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}},value:{get:function(t,e){return B&&R.nodeName(t,"button")?B.get(t,e):e in t?t.value:null},set:function(t,e,i){return B&&R.nodeName(t,"button")?B.set(t,e,i):(t.value=e,void 0)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(t,i,n){var r,a,o,s=t.nodeType;return t&&3!==s&&8!==s&&2!==s?(o=1!==s||!R.isXMLDoc(t),o&&(i=R.propFix[i]||i,a=R.propHooks[i]),n!==e?a&&"set"in a&&(r=a.set(t,n,i))!==e?r:t[i]=n:a&&"get"in a&&null!==(r=a.get(t,i))?r:t[i]):void 0},propHooks:{tabIndex:{get:function(t){var i=t.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):$.test(t.nodeName)||Y.test(t.nodeName)&&t.href?0:e}}}}),R.attrHooks.tabindex=R.propHooks.tabIndex,j={get:function(t,i){var n,r=R.prop(t,i);return r===!0||"boolean"!=typeof r&&(n=t.getAttributeNode(i))&&n.nodeValue!==!1?i.toLowerCase():e},set:function(t,e,i){var n;return e===!1?R.removeAttr(t,i):(n=R.propFix[i]||i,n in t&&(t[n]=!0),t.setAttribute(i,i.toLowerCase())),i}},Q||(W={name:!0,id:!0},B=R.valHooks.button={get:function(t,i){var n;return n=t.getAttributeNode(i),n&&(W[i]?""!==n.nodeValue:n.specified)?n.nodeValue:e},set:function(t,e,i){var n=t.getAttributeNode(i);return n||(n=D.createAttribute(i),t.setAttributeNode(n)),n.nodeValue=e+""}},R.attrHooks.tabindex.set=B.set,R.each(["width","height"],function(t,e){R.attrHooks[e]=R.extend(R.attrHooks[e],{set:function(t,i){return""===i?(t.setAttribute(e,"auto"),i):void 0}})}),R.attrHooks.contenteditable={get:B.get,set:function(t,e,i){""===e&&(e="false"),B.set(t,e,i)}}),R.support.hrefNormalized||R.each(["href","src","width","height"],function(t,i){R.attrHooks[i]=R.extend(R.attrHooks[i],{get:function(t){var n=t.getAttribute(i,2);return null===n?e:n}})}),R.support.style||(R.attrHooks.style={get:function(t){return t.style.cssText.toLowerCase()||e},set:function(t,e){return t.style.cssText=""+e}}),R.support.optSelected||(R.propHooks.selected=R.extend(R.propHooks.selected,{get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}})),R.support.enctype||(R.propFix.enctype="encoding"),R.support.checkOn||R.each(["radio","checkbox"],function(){R.valHooks[this]={get:function(t){return null===t.getAttribute("value")?"on":t.value}}}),R.each(["radio","checkbox"],function(){R.valHooks[this]=R.extend(R.valHooks[this],{set:function(t,e){return R.isArray(e)?t.checked=R.inArray(R(t).val(),e)>=0:void 0}})});var J=/^(?:textarea|input|select)$/i,Z=/^([^\.]*)?(?:\.(.+))?$/,te=/\bhover(\.\S+)?\b/,ee=/^key/,ie=/^(?:mouse|contextmenu)|click/,ne=/^(?:focusinfocus|focusoutblur)$/,re=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,ae=function(t){var e=re.exec(t);return e&&(e[1]=(e[1]||"").toLowerCase(),e[3]=e[3]&&new RegExp("(?:^|\\s)"+e[3]+"(?:\\s|$)")),e},oe=function(t,e){var i=t.attributes||{};return!(e[1]&&t.nodeName.toLowerCase()!==e[1]||e[2]&&(i.id||{}).value!==e[2]||e[3]&&!e[3].test((i["class"]||{}).value))
},se=function(t){return R.event.special.hover?t:t.replace(te,"mouseenter$1 mouseleave$1")};R.event={add:function(t,i,n,r,a){var o,s,c,l,h,u,d,f,p,g,m;if(3!==t.nodeType&&8!==t.nodeType&&i&&n&&(o=R._data(t))){for(n.handler&&(p=n,n=p.handler),n.guid||(n.guid=R.guid++),c=o.events,c||(o.events=c={}),s=o.handle,s||(o.handle=s=function(t){return"undefined"==typeof R||t&&R.event.triggered===t.type?e:R.event.dispatch.apply(s.elem,arguments)},s.elem=t),i=R.trim(se(i)).split(" "),l=0;l<i.length;l++)h=Z.exec(i[l])||[],u=h[1],d=(h[2]||"").split(".").sort(),m=R.event.special[u]||{},u=(a?m.delegateType:m.bindType)||u,m=R.event.special[u]||{},f=R.extend({type:u,origType:h[1],data:r,handler:n,guid:n.guid,selector:a,quick:ae(a),namespace:d.join(".")},p),g=c[u],g||(g=c[u]=[],g.delegateCount=0,m.setup&&m.setup.call(t,r,d,s)!==!1||(t.addEventListener?t.addEventListener(u,s,!1):t.attachEvent&&t.attachEvent("on"+u,s))),m.add&&(m.add.call(t,f),f.handler.guid||(f.handler.guid=n.guid)),a?g.splice(g.delegateCount++,0,f):g.push(f),R.event.global[u]=!0;t=null}},global:{},remove:function(t,e,i,n,r){var a,o,s,c,l,h,u,d,f,p,g,m,v=R.hasData(t)&&R._data(t);if(v&&(d=v.events)){for(e=R.trim(se(e||"")).split(" "),a=0;a<e.length;a++)if(o=Z.exec(e[a])||[],s=c=o[1],l=o[2],s){for(f=R.event.special[s]||{},s=(n?f.delegateType:f.bindType)||s,g=d[s]||[],h=g.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null,u=0;u<g.length;u++)m=g[u],!(!r&&c!==m.origType||i&&i.guid!==m.guid||l&&!l.test(m.namespace)||n&&n!==m.selector&&("**"!==n||!m.selector)||(g.splice(u--,1),m.selector&&g.delegateCount--,!f.remove||!f.remove.call(t,m)));0===g.length&&h!==g.length&&((!f.teardown||f.teardown.call(t,l)===!1)&&R.removeEvent(t,s,v.handle),delete d[s])}else for(s in d)R.event.remove(t,s+e[a],i,n,!0);R.isEmptyObject(d)&&(p=v.handle,p&&(p.elem=null),R.removeData(t,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(i,n,r,a){if(!r||3!==r.nodeType&&8!==r.nodeType){var o,s,c,l,h,u,d,f,p,g,m=i.type||i,v=[];if(ne.test(m+R.event.triggered))return;if(m.indexOf("!")>=0&&(m=m.slice(0,-1),s=!0),m.indexOf(".")>=0&&(v=m.split("."),m=v.shift(),v.sort()),(!r||R.event.customEvent[m])&&!R.event.global[m])return;if(i="object"==typeof i?i[R.expando]?i:new R.Event(m,i):new R.Event(m),i.type=m,i.isTrigger=!0,i.exclusive=s,i.namespace=v.join("."),i.namespace_re=i.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,u=m.indexOf(":")<0?"on"+m:"",!r){o=R.cache;for(c in o)o[c].events&&o[c].events[m]&&R.event.trigger(i,n,o[c].handle.elem,!0);return}if(i.result=e,i.target||(i.target=r),n=null!=n?R.makeArray(n):[],n.unshift(i),d=R.event.special[m]||{},d.trigger&&d.trigger.apply(r,n)===!1)return;if(p=[[r,d.bindType||m]],!a&&!d.noBubble&&!R.isWindow(r)){for(g=d.delegateType||m,l=ne.test(g+m)?r:r.parentNode,h=null;l;l=l.parentNode)p.push([l,g]),h=l;h&&h===r.ownerDocument&&p.push([h.defaultView||h.parentWindow||t,g])}for(c=0;c<p.length&&!i.isPropagationStopped();c++)l=p[c][0],i.type=p[c][1],f=(R._data(l,"events")||{})[i.type]&&R._data(l,"handle"),f&&f.apply(l,n),f=u&&l[u],f&&R.acceptData(l)&&f.apply(l,n)===!1&&i.preventDefault();return i.type=m,!(a||i.isDefaultPrevented()||d._default&&d._default.apply(r.ownerDocument,n)!==!1||"click"===m&&R.nodeName(r,"a")||!R.acceptData(r)||!u||!r[m]||("focus"===m||"blur"===m)&&0===i.target.offsetWidth||R.isWindow(r)||(h=r[u],h&&(r[u]=null),R.event.triggered=m,r[m](),R.event.triggered=e,!h||!(r[u]=h))),i.result}},dispatch:function(i){i=R.event.fix(i||t.event);var n,r,a,o,s,c,l,h,u,d,f=(R._data(this,"events")||{})[i.type]||[],p=f.delegateCount,g=[].slice.call(arguments,0),m=!i.exclusive&&!i.namespace,v=[];if(g[0]=i,i.delegateTarget=this,p&&!i.target.disabled&&(!i.button||"click"!==i.type))for(o=R(this),o.context=this.ownerDocument||this,a=i.target;a!=this;a=a.parentNode||this){for(c={},h=[],o[0]=a,n=0;p>n;n++)u=f[n],d=u.selector,c[d]===e&&(c[d]=u.quick?oe(a,u.quick):o.is(d)),c[d]&&h.push(u);h.length&&v.push({elem:a,matches:h})}for(f.length>p&&v.push({elem:this,matches:f.slice(p)}),n=0;n<v.length&&!i.isPropagationStopped();n++)for(l=v[n],i.currentTarget=l.elem,r=0;r<l.matches.length&&!i.isImmediatePropagationStopped();r++)u=l.matches[r],(m||!i.namespace&&!u.namespace||i.namespace_re&&i.namespace_re.test(u.namespace))&&(i.data=u.data,i.handleObj=u,s=((R.event.special[u.origType]||{}).handle||u.handler).apply(l.elem,g),s!==e&&(i.result=s,s===!1&&(i.preventDefault(),i.stopPropagation())));return i.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,i){var n,r,a,o=i.button,s=i.fromElement;return null==t.pageX&&null!=i.clientX&&(n=t.target.ownerDocument||D,r=n.documentElement,a=n.body,t.pageX=i.clientX+(r&&r.scrollLeft||a&&a.scrollLeft||0)-(r&&r.clientLeft||a&&a.clientLeft||0),t.pageY=i.clientY+(r&&r.scrollTop||a&&a.scrollTop||0)-(r&&r.clientTop||a&&a.clientTop||0)),!t.relatedTarget&&s&&(t.relatedTarget=s===t.target?i.toElement:s),!t.which&&o!==e&&(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[R.expando])return t;var i,n,r=t,a=R.event.fixHooks[t.type]||{},o=a.props?this.props.concat(a.props):this.props;for(t=R.Event(r),i=o.length;i;)n=o[--i],t[n]=r[n];return t.target||(t.target=r.srcElement||D),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey===e&&(t.metaKey=t.ctrlKey),a.filter?a.filter(t,r):t},special:{ready:{setup:R.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(t,e,i){R.isWindow(this)&&(this.onbeforeunload=i)},teardown:function(t,e){this.onbeforeunload===e&&(this.onbeforeunload=null)}}},simulate:function(t,e,i,n){var r=R.extend(new R.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?R.event.trigger(r,null,e):R.event.dispatch.call(e,r),r.isDefaultPrevented()&&i.preventDefault()}},R.event.handle=R.event.dispatch,R.removeEvent=D.removeEventListener?function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)}:function(t,e,i){t.detachEvent&&t.detachEvent("on"+e,i)},R.Event=function(t,e){return this instanceof R.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.returnValue===!1||t.getPreventDefault&&t.getPreventDefault()?A:k):this.type=t,e&&R.extend(this,e),this.timeStamp=t&&t.timeStamp||R.now(),this[R.expando]=!0,void 0):new R.Event(t,e)},R.Event.prototype={preventDefault:function(){this.isDefaultPrevented=A;var t=this.originalEvent;!t||(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=A;var t=this.originalEvent;!t||(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=A,this.stopPropagation()},isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k},R.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){R.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,r=t.relatedTarget,a=t.handleObj;return a.selector,(!r||r!==n&&!R.contains(n,r))&&(t.type=a.origType,i=a.handler.apply(this,arguments),t.type=e),i}}}),R.support.submitBubbles||(R.event.special.submit={setup:function(){return R.nodeName(this,"form")?!1:(R.event.add(this,"click._submit keypress._submit",function(t){var i=t.target,n=R.nodeName(i,"input")||R.nodeName(i,"button")?i.form:e;n&&!n._submit_attached&&(R.event.add(n,"submit._submit",function(t){this.parentNode&&!t.isTrigger&&R.event.simulate("submit",this.parentNode,t,!0)}),n._submit_attached=!0)}),void 0)},teardown:function(){return R.nodeName(this,"form")?!1:(R.event.remove(this,"._submit"),void 0)}}),R.support.changeBubbles||(R.event.special.change={setup:function(){return J.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(R.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),R.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1,R.event.simulate("change",this,t,!0))})),!1):(R.event.add(this,"beforeactivate._change",function(t){var e=t.target;J.test(e.nodeName)&&!e._change_attached&&(R.event.add(e,"change._change",function(t){this.parentNode&&!t.isSimulated&&!t.isTrigger&&R.event.simulate("change",this.parentNode,t,!0)}),e._change_attached=!0)}),void 0)},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return R.event.remove(this,"._change"),J.test(this.nodeName)}}),R.support.focusinBubbles||R.each({focus:"focusin",blur:"focusout"},function(t,e){var i=0,n=function(t){R.event.simulate(e,t.target,R.event.fix(t),!0)};R.event.special[e]={setup:function(){0===i++&&D.addEventListener(t,n,!0)},teardown:function(){0===--i&&D.removeEventListener(t,n,!0)}}}),R.fn.extend({on:function(t,i,n,r,a){var o,s;if("object"==typeof t){"string"!=typeof i&&(n=i,i=e);for(s in t)this.on(s,i,n,t[s],a);return this}if(null==n&&null==r?(r=i,n=i=e):null==r&&("string"==typeof i?(r=n,n=e):(r=n,n=i,i=e)),r===!1)r=k;else if(!r)return this;return 1===a&&(o=r,r=function(t){return R().off(t),o.apply(this,arguments)},r.guid=o.guid||(o.guid=R.guid++)),this.each(function(){R.event.add(this,t,r,n,i)})},one:function(t,e,i,n){return this.on.call(this,t,e,i,n,1)},off:function(t,i,n){if(t&&t.preventDefault&&t.handleObj){var r=t.handleObj;return R(t.delegateTarget).off(r.namespace?r.type+"."+r.namespace:r.type,r.selector,r.handler),this}if("object"==typeof t){for(var a in t)this.off(a,i,t[a]);return this}return(i===!1||"function"==typeof i)&&(n=i,i=e),n===!1&&(n=k),this.each(function(){R.event.remove(this,t,n,i)})},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},live:function(t,e,i){return R(this.context).on(t,this.selector,e,i),this},die:function(t,e){return R(this.context).off(t,this.selector||"**",e),this},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1==arguments.length?this.off(t,"**"):this.off(e,t,i)},trigger:function(t,e){return this.each(function(){R.event.trigger(t,e,this)})},triggerHandler:function(t,e){return this[0]?R.event.trigger(t,e,this[0],!0):void 0},toggle:function(t){var e=arguments,i=t.guid||R.guid++,n=0,r=function(i){var r=(R._data(this,"lastToggle"+t.guid)||0)%n;return R._data(this,"lastToggle"+t.guid,r+1),i.preventDefault(),e[r].apply(this,arguments)||!1};for(r.guid=i;n<e.length;)e[n++].guid=i;return this.click(r)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),R.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){R.fn[e]=function(t,i){return null==i&&(i=t,t=null),arguments.length>0?this.on(e,null,t,i):this.trigger(e)},R.attrFn&&(R.attrFn[e]=!0),ee.test(e)&&(R.event.fixHooks[e]=R.event.keyHooks),ie.test(e)&&(R.event.fixHooks[e]=R.event.mouseHooks)}),function(){function t(t,e,i,n,a,o){for(var s=0,c=n.length;c>s;s++){var l=n[s];if(l){var h=!1;for(l=l[t];l;){if(l[r]===i){h=n[l.sizset];break}if(1===l.nodeType)if(o||(l[r]=i,l.sizset=s),"string"!=typeof e){if(l===e){h=!0;break}}else if(d.filter(e,[l]).length>0){h=l;break}l=l[t]}n[s]=h}}}function i(t,e,i,n,a,o){for(var s=0,c=n.length;c>s;s++){var l=n[s];if(l){var h=!1;for(l=l[t];l;){if(l[r]===i){h=n[l.sizset];break}if(1===l.nodeType&&!o&&(l[r]=i,l.sizset=s),l.nodeName.toLowerCase()===e){h=l;break}l=l[t]}n[s]=h}}}var n=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r="sizcache"+(Math.random()+"").replace(".",""),a=0,o=Object.prototype.toString,s=!1,c=!0,l=/\\/g,h=/\r\n/g,u=/\W/;[0,0].sort(function(){return c=!1,0});var d=function(t,e,i,r){i=i||[],e=e||D;var a=e;if(1!==e.nodeType&&9!==e.nodeType)return[];if(!t||"string"!=typeof t)return i;var s,c,l,h,u,f,m,v,x=!0,b=d.isXML(e),w=[],C=t;do if(n.exec(""),s=n.exec(C),s&&(C=s[3],w.push(s[1]),s[2])){h=s[3];break}while(s);if(w.length>1&&g.exec(t))if(2===w.length&&p.relative[w[0]])c=_(w[0]+w[1],e,r);else for(c=p.relative[w[0]]?[e]:d(w.shift(),e);w.length;)t=w.shift(),p.relative[t]&&(t+=w.shift()),c=_(t,c,r);else if(!r&&w.length>1&&9===e.nodeType&&!b&&p.match.ID.test(w[0])&&!p.match.ID.test(w[w.length-1])&&(u=d.find(w.shift(),e,b),e=u.expr?d.filter(u.expr,u.set)[0]:u.set[0]),e)for(u=r?{expr:w.pop(),set:y(r)}:d.find(w.pop(),1!==w.length||"~"!==w[0]&&"+"!==w[0]||!e.parentNode?e:e.parentNode,b),c=u.expr?d.filter(u.expr,u.set):u.set,w.length>0?l=y(c):x=!1;w.length;)f=w.pop(),m=f,p.relative[f]?m=w.pop():f="",null==m&&(m=e),p.relative[f](l,m,b);else l=w=[];if(l||(l=c),l||d.error(f||t),"[object Array]"===o.call(l))if(x)if(e&&1===e.nodeType)for(v=0;null!=l[v];v++)l[v]&&(l[v]===!0||1===l[v].nodeType&&d.contains(e,l[v]))&&i.push(c[v]);else for(v=0;null!=l[v];v++)l[v]&&1===l[v].nodeType&&i.push(c[v]);else i.push.apply(i,l);else y(l,i);return h&&(d(h,a,i,r),d.uniqueSort(i)),i};d.uniqueSort=function(t){if(b&&(s=c,t.sort(b),s))for(var e=1;e<t.length;e++)t[e]===t[e-1]&&t.splice(e--,1);return t},d.matches=function(t,e){return d(t,null,null,e)},d.matchesSelector=function(t,e){return d(e,null,null,[t]).length>0},d.find=function(t,e,i){var n,r,a,o,s,c;if(!t)return[];for(r=0,a=p.order.length;a>r;r++)if(s=p.order[r],(o=p.leftMatch[s].exec(t))&&(c=o[1],o.splice(1,1),"\\"!==c.substr(c.length-1)&&(o[1]=(o[1]||"").replace(l,""),n=p.find[s](o,e,i),null!=n))){t=t.replace(p.match[s],"");break}return n||(n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName("*"):[]),{set:n,expr:t}},d.filter=function(t,i,n,r){for(var a,o,s,c,l,h,u,f,g,m=t,v=[],y=i,x=i&&i[0]&&d.isXML(i[0]);t&&i.length;){for(s in p.filter)if(null!=(a=p.leftMatch[s].exec(t))&&a[2]){if(h=p.filter[s],u=a[1],o=!1,a.splice(1,1),"\\"===u.substr(u.length-1))continue;if(y===v&&(v=[]),p.preFilter[s])if(a=p.preFilter[s](a,y,n,v,r,x)){if(a===!0)continue}else o=c=!0;if(a)for(f=0;null!=(l=y[f]);f++)l&&(c=h(l,a,f,y),g=r^c,n&&null!=c?g?o=!0:y[f]=!1:g&&(v.push(l),o=!0));if(c!==e){if(n||(y=v),t=t.replace(p.match[s],""),!o)return[];break}}if(t===m){if(null!=o)break;d.error(t)}m=t}return y},d.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)};var f=d.getText=function(t){var e,i,n=t.nodeType,r="";if(n){if(1===n||9===n){if("string"==typeof t.textContent)return t.textContent;if("string"==typeof t.innerText)return t.innerText.replace(h,"");for(t=t.firstChild;t;t=t.nextSibling)r+=f(t)}else if(3===n||4===n)return t.nodeValue}else for(e=0;i=t[e];e++)8!==i.nodeType&&(r+=f(i));return r},p=d.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(t){return t.getAttribute("href")},type:function(t){return t.getAttribute("type")}},relative:{"+":function(t,e){var i="string"==typeof e,n=i&&!u.test(e),r=i&&!n;n&&(e=e.toLowerCase());for(var a,o=0,s=t.length;s>o;o++)if(a=t[o]){for(;(a=a.previousSibling)&&1!==a.nodeType;);t[o]=r||a&&a.nodeName.toLowerCase()===e?a||!1:a===e}r&&d.filter(e,t,!0)},">":function(t,e){var i,n="string"==typeof e,r=0,a=t.length;if(n&&!u.test(e)){for(e=e.toLowerCase();a>r;r++)if(i=t[r]){var o=i.parentNode;t[r]=o.nodeName.toLowerCase()===e?o:!1}}else{for(;a>r;r++)i=t[r],i&&(t[r]=n?i.parentNode:i.parentNode===e);n&&d.filter(e,t,!0)}},"":function(e,n,r){var o,s=a++,c=t;"string"==typeof n&&!u.test(n)&&(n=n.toLowerCase(),o=n,c=i),c("parentNode",n,s,e,o,r)},"~":function(e,n,r){var o,s=a++,c=t;"string"==typeof n&&!u.test(n)&&(n=n.toLowerCase(),o=n,c=i),c("previousSibling",n,s,e,o,r)}},find:{ID:function(t,e,i){if("undefined"!=typeof e.getElementById&&!i){var n=e.getElementById(t[1]);return n&&n.parentNode?[n]:[]}},NAME:function(t,e){if("undefined"!=typeof e.getElementsByName){for(var i=[],n=e.getElementsByName(t[1]),r=0,a=n.length;a>r;r++)n[r].getAttribute("name")===t[1]&&i.push(n[r]);return 0===i.length?null:i}},TAG:function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t[1]):void 0}},preFilter:{CLASS:function(t,e,i,n,r,a){if(t=" "+t[1].replace(l,"")+" ",a)return t;for(var o,s=0;null!=(o=e[s]);s++)o&&(r^(o.className&&(" "+o.className+" ").replace(/[\t\n\r]/g," ").indexOf(t)>=0)?i||n.push(o):i&&(e[s]=!1));return!1},ID:function(t){return t[1].replace(l,"")},TAG:function(t){return t[1].replace(l,"").toLowerCase()},CHILD:function(t){if("nth"===t[1]){t[2]||d.error(t[0]),t[2]=t[2].replace(/^\+|\s*/g,"");var e=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===t[2]&&"2n"||"odd"===t[2]&&"2n+1"||!/\D/.test(t[2])&&"0n+"+t[2]||t[2]);t[2]=e[1]+(e[2]||1)-0,t[3]=e[3]-0}else t[2]&&d.error(t[0]);return t[0]=a++,t},ATTR:function(t,e,i,n,r,a){var o=t[1]=t[1].replace(l,"");return!a&&p.attrMap[o]&&(t[1]=p.attrMap[o]),t[4]=(t[4]||t[5]||"").replace(l,""),"~="===t[2]&&(t[4]=" "+t[4]+" "),t},PSEUDO:function(t,e,i,r,a){if("not"===t[1]){if(!((n.exec(t[3])||"").length>1||/^\w/.test(t[3]))){var o=d.filter(t[3],e,i,!0^a);return i||r.push.apply(r,o),!1}t[3]=d(t[3],null,null,e)}else if(p.match.POS.test(t[0])||p.match.CHILD.test(t[0]))return!0;return t},POS:function(t){return t.unshift(!0),t}},filters:{enabled:function(t){return t.disabled===!1&&"hidden"!==t.type},disabled:function(t){return t.disabled===!0},checked:function(t){return t.checked===!0},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},parent:function(t){return!!t.firstChild},empty:function(t){return!t.firstChild},has:function(t,e,i){return!!d(i[3],t).length},header:function(t){return/h\d/i.test(t.nodeName)},text:function(t){var e=t.getAttribute("type"),i=t.type;return"input"===t.nodeName.toLowerCase()&&"text"===i&&(e===i||null===e)},radio:function(t){return"input"===t.nodeName.toLowerCase()&&"radio"===t.type},checkbox:function(t){return"input"===t.nodeName.toLowerCase()&&"checkbox"===t.type},file:function(t){return"input"===t.nodeName.toLowerCase()&&"file"===t.type},password:function(t){return"input"===t.nodeName.toLowerCase()&&"password"===t.type},submit:function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&"submit"===t.type},image:function(t){return"input"===t.nodeName.toLowerCase()&&"image"===t.type},reset:function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&"reset"===t.type},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},input:function(t){return/input|select|textarea|button/i.test(t.nodeName)},focus:function(t){return t===t.ownerDocument.activeElement}},setFilters:{first:function(t,e){return 0===e},last:function(t,e,i,n){return e===n.length-1},even:function(t,e){return 0===e%2},odd:function(t,e){return 1===e%2},lt:function(t,e,i){return e<i[3]-0},gt:function(t,e,i){return e>i[3]-0},nth:function(t,e,i){return i[3]-0===e},eq:function(t,e,i){return i[3]-0===e}},filter:{PSEUDO:function(t,e,i,n){var r=e[1],a=p.filters[r];if(a)return a(t,i,e,n);if("contains"===r)return(t.textContent||t.innerText||f([t])||"").indexOf(e[3])>=0;if("not"===r){for(var o=e[3],s=0,c=o.length;c>s;s++)if(o[s]===t)return!1;return!0}d.error(r)},CHILD:function(t,e){var i,n,a,o,s,c,l=e[1],h=t;switch(l){case"only":case"first":for(;h=h.previousSibling;)if(1===h.nodeType)return!1;if("first"===l)return!0;h=t;case"last":for(;h=h.nextSibling;)if(1===h.nodeType)return!1;return!0;case"nth":if(i=e[2],n=e[3],1===i&&0===n)return!0;if(a=e[0],o=t.parentNode,o&&(o[r]!==a||!t.nodeIndex)){for(s=0,h=o.firstChild;h;h=h.nextSibling)1===h.nodeType&&(h.nodeIndex=++s);o[r]=a}return c=t.nodeIndex-n,0===i?0===c:0===c%i&&c/i>=0}},ID:function(t,e){return 1===t.nodeType&&t.getAttribute("id")===e},TAG:function(t,e){return"*"===e&&1===t.nodeType||!!t.nodeName&&t.nodeName.toLowerCase()===e},CLASS:function(t,e){return(" "+(t.className||t.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(t,e){var i=e[1],n=d.attr?d.attr(t,i):p.attrHandle[i]?p.attrHandle[i](t):null!=t[i]?t[i]:t.getAttribute(i),r=n+"",a=e[2],o=e[4];return null==n?"!="===a:!a&&d.attr?null!=n:"="===a?r===o:"*="===a?r.indexOf(o)>=0:"~="===a?(" "+r+" ").indexOf(o)>=0:o?"!="===a?r!==o:"^="===a?0===r.indexOf(o):"$="===a?r.substr(r.length-o.length)===o:"|="===a?r===o||r.substr(0,o.length+1)===o+"-":!1:r&&n!==!1},POS:function(t,e,i,n){var r=e[2],a=p.setFilters[r];return a?a(t,i,e,n):void 0}}},g=p.match.POS,m=function(t,e){return"\\"+(e-0+1)};for(var v in p.match)p.match[v]=new RegExp(p.match[v].source+/(?![^\[]*\])(?![^\(]*\))/.source),p.leftMatch[v]=new RegExp(/(^(?:.|\r|\n)*?)/.source+p.match[v].source.replace(/\\(\d+)/g,m));var y=function(t,e){return t=Array.prototype.slice.call(t,0),e?(e.push.apply(e,t),e):t};try{Array.prototype.slice.call(D.documentElement.childNodes,0)[0].nodeType}catch(x){y=function(t,e){var i=0,n=e||[];if("[object Array]"===o.call(t))Array.prototype.push.apply(n,t);else if("number"==typeof t.length)for(var r=t.length;r>i;i++)n.push(t[i]);else for(;t[i];i++)n.push(t[i]);return n}}var b,w;D.documentElement.compareDocumentPosition?b=function(t,e){return t===e?(s=!0,0):t.compareDocumentPosition&&e.compareDocumentPosition?4&t.compareDocumentPosition(e)?-1:1:t.compareDocumentPosition?-1:1}:(b=function(t,e){if(t===e)return s=!0,0;if(t.sourceIndex&&e.sourceIndex)return t.sourceIndex-e.sourceIndex;var i,n,r=[],a=[],o=t.parentNode,c=e.parentNode,l=o;if(o===c)return w(t,e);if(!o)return-1;if(!c)return 1;for(;l;)r.unshift(l),l=l.parentNode;for(l=c;l;)a.unshift(l),l=l.parentNode;i=r.length,n=a.length;for(var h=0;i>h&&n>h;h++)if(r[h]!==a[h])return w(r[h],a[h]);return h===i?w(t,a[h],-1):w(r[h],e,1)},w=function(t,e,i){if(t===e)return i;for(var n=t.nextSibling;n;){if(n===e)return-1;n=n.nextSibling}return 1}),function(){var t=D.createElement("div"),i="script"+(new Date).getTime(),n=D.documentElement;t.innerHTML="<a name='"+i+"'/>",n.insertBefore(t,n.firstChild),D.getElementById(i)&&(p.find.ID=function(t,i,n){if("undefined"!=typeof i.getElementById&&!n){var r=i.getElementById(t[1]);return r?r.id===t[1]||"undefined"!=typeof r.getAttributeNode&&r.getAttributeNode("id").nodeValue===t[1]?[r]:e:[]}},p.filter.ID=function(t,e){var i="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return 1===t.nodeType&&i&&i.nodeValue===e}),n.removeChild(t),n=t=null}(),function(){var t=D.createElement("div");t.appendChild(D.createComment("")),t.getElementsByTagName("*").length>0&&(p.find.TAG=function(t,e){var i=e.getElementsByTagName(t[1]);if("*"===t[1]){for(var n=[],r=0;i[r];r++)1===i[r].nodeType&&n.push(i[r]);i=n}return i}),t.innerHTML="<a href='#'></a>",t.firstChild&&"undefined"!=typeof t.firstChild.getAttribute&&"#"!==t.firstChild.getAttribute("href")&&(p.attrHandle.href=function(t){return t.getAttribute("href",2)}),t=null}(),D.querySelectorAll&&function(){var t=d,e=D.createElement("div"),i="__sizzle__";if(e.innerHTML="<p class='TEST'></p>",!e.querySelectorAll||0!==e.querySelectorAll(".TEST").length){d=function(e,n,r,a){if(n=n||D,!a&&!d.isXML(n)){var o=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(e);if(o&&(1===n.nodeType||9===n.nodeType)){if(o[1])return y(n.getElementsByTagName(e),r);if(o[2]&&p.find.CLASS&&n.getElementsByClassName)return y(n.getElementsByClassName(o[2]),r)}if(9===n.nodeType){if("body"===e&&n.body)return y([n.body],r);if(o&&o[3]){var s=n.getElementById(o[3]);if(!s||!s.parentNode)return y([],r);if(s.id===o[3])return y([s],r)}try{return y(n.querySelectorAll(e),r)}catch(c){}}else if(1===n.nodeType&&"object"!==n.nodeName.toLowerCase()){var l=n,h=n.getAttribute("id"),u=h||i,f=n.parentNode,g=/^\s*[+~]/.test(e);h?u=u.replace(/'/g,"\\$&"):n.setAttribute("id",u),g&&f&&(n=n.parentNode);try{if(!g||f)return y(n.querySelectorAll("[id='"+u+"'] "+e),r)}catch(m){}finally{h||l.removeAttribute("id")}}}return t(e,n,r,a)};for(var n in t)d[n]=t[n];e=null}}(),function(){var t=D.documentElement,e=t.matchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.msMatchesSelector;if(e){var i=!e.call(D.createElement("div"),"div"),n=!1;try{e.call(D.documentElement,"[test!='']:sizzle")}catch(r){n=!0}d.matchesSelector=function(t,r){if(r=r.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!d.isXML(t))try{if(n||!p.match.PSEUDO.test(r)&&!/!=/.test(r)){var a=e.call(t,r);if(a||!i||t.document&&11!==t.document.nodeType)return a}}catch(o){}return d(r,null,null,[t]).length>0}}}(),function(){var t=D.createElement("div");if(t.innerHTML="<div class='test e'></div><div class='test'></div>",t.getElementsByClassName&&0!==t.getElementsByClassName("e").length){if(t.lastChild.className="e",1===t.getElementsByClassName("e").length)return;p.order.splice(1,0,"CLASS"),p.find.CLASS=function(t,e,i){return"undefined"==typeof e.getElementsByClassName||i?void 0:e.getElementsByClassName(t[1])},t=null}}(),d.contains=D.documentElement.contains?function(t,e){return t!==e&&(t.contains?t.contains(e):!0)}:D.documentElement.compareDocumentPosition?function(t,e){return!!(16&t.compareDocumentPosition(e))}:function(){return!1},d.isXML=function(t){var e=(t?t.ownerDocument||t:0).documentElement;return e?"HTML"!==e.nodeName:!1};var _=function(t,e,i){for(var n,r=[],a="",o=e.nodeType?[e]:e;n=p.match.PSEUDO.exec(t);)a+=n[0],t=t.replace(p.match.PSEUDO,"");t=p.relative[t]?t+"*":t;for(var s=0,c=o.length;c>s;s++)d(t,o[s],r,i);return d.filter(a,r)};d.attr=R.attr,d.selectors.attrMap={},R.find=d,R.expr=d.selectors,R.expr[":"]=R.expr.filters,R.unique=d.uniqueSort,R.text=d.getText,R.isXMLDoc=d.isXML,R.contains=d.contains}();var ce=/Until$/,le=/^(?:parents|prevUntil|prevAll)/,he=/,/,ue=/^.[^:#\[\.,]*$/,de=Array.prototype.slice,fe=R.expr.match.POS,pe={children:!0,contents:!0,next:!0,prev:!0};R.fn.extend({find:function(t){var e,i,n=this;if("string"!=typeof t)return R(t).filter(function(){for(e=0,i=n.length;i>e;e++)if(R.contains(n[e],this))return!0});var r,a,o,s=this.pushStack("","find",t);for(e=0,i=this.length;i>e;e++)if(r=s.length,R.find(t,this[e],s),e>0)for(a=r;a<s.length;a++)for(o=0;r>o;o++)if(s[o]===s[a]){s.splice(a--,1);break}return s},has:function(t){var e=R(t);return this.filter(function(){for(var t=0,i=e.length;i>t;t++)if(R.contains(this,e[t]))return!0})},not:function(t){return this.pushStack(S(this,t,!1),"not",t)},filter:function(t){return this.pushStack(S(this,t,!0),"filter",t)},is:function(t){return!!t&&("string"==typeof t?fe.test(t)?R(t,this.context).index(this[0])>=0:R.filter(t,this).length>0:this.filter(t).length>0)},closest:function(t,e){var i,n,r=[],a=this[0];if(R.isArray(t)){for(var o=1;a&&a.ownerDocument&&a!==e;){for(i=0;i<t.length;i++)R(a).is(t[i])&&r.push({selector:t[i],elem:a,level:o});a=a.parentNode,o++}return r}var s=fe.test(t)||"string"!=typeof t?R(t,e||this.context):0;for(i=0,n=this.length;n>i;i++)for(a=this[i];a;){if(s?s.index(a)>-1:R.find.matchesSelector(a,t)){r.push(a);break}if(a=a.parentNode,!a||!a.ownerDocument||a===e||11===a.nodeType)break}return r=r.length>1?R.unique(r):r,this.pushStack(r,"closest",t)},index:function(t){return t?"string"==typeof t?R.inArray(this[0],R(t)):R.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(t,e){var i="string"==typeof t?R(t,e):R.makeArray(t&&t.nodeType?[t]:t),n=R.merge(this.get(),i);return this.pushStack(T(i[0])||T(n[0])?n:R.unique(n))},andSelf:function(){return this.add(this.prevObject)}}),R.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return R.dir(t,"parentNode")},parentsUntil:function(t,e,i){return R.dir(t,"parentNode",i)},next:function(t){return R.nth(t,2,"nextSibling")},prev:function(t){return R.nth(t,2,"previousSibling")},nextAll:function(t){return R.dir(t,"nextSibling")},prevAll:function(t){return R.dir(t,"previousSibling")},nextUntil:function(t,e,i){return R.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return R.dir(t,"previousSibling",i)},siblings:function(t){return R.sibling(t.parentNode.firstChild,t)},children:function(t){return R.sibling(t.firstChild)},contents:function(t){return R.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:R.makeArray(t.childNodes)}},function(t,e){R.fn[t]=function(i,n){var r=R.map(this,e,i);return ce.test(t)||(n=i),n&&"string"==typeof n&&(r=R.filter(n,r)),r=this.length>1&&!pe[t]?R.unique(r):r,(this.length>1||he.test(n))&&le.test(t)&&(r=r.reverse()),this.pushStack(r,t,de.call(arguments).join(","))}}),R.extend({filter:function(t,e,i){return i&&(t=":not("+t+")"),1===e.length?R.find.matchesSelector(e[0],t)?[e[0]]:[]:R.find.matches(t,e)},dir:function(t,i,n){for(var r=[],a=t[i];a&&9!==a.nodeType&&(n===e||1!==a.nodeType||!R(a).is(n));)1===a.nodeType&&r.push(a),a=a[i];return r},nth:function(t,e,i){e=e||1;for(var n=0;t&&(1!==t.nodeType||++n!==e);t=t[i]);return t},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}});var ge="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",me=/ jQuery\d+="(?:\d+|null)"/g,ve=/^\s+/,ye=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,xe=/<([\w:]+)/,be=/<tbody/i,we=/<|&#?\w+;/,_e=/<(?:script|style)/i,Ce=/<(?:script|object|embed|option|style)/i,Ke=new RegExp("<(?:"+ge+")","i"),Se=/checked\s*(?:[^=]|=\s*.checked.)/i,Te=/\/(java|ecma)script/i,Ae=/^\s*<!(?:\[CDATA\[|\-\-)/,ke={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Fe=K(D);ke.optgroup=ke.option,ke.tbody=ke.tfoot=ke.colgroup=ke.caption=ke.thead,ke.th=ke.td,R.support.htmlSerialize||(ke._default=[1,"div<div>","</div>"]),R.fn.extend({text:function(t){return R.isFunction(t)?this.each(function(e){var i=R(this);i.text(t.call(this,e,i.text()))}):"object"!=typeof t&&t!==e?this.empty().append((this[0]&&this[0].ownerDocument||D).createTextNode(t)):R.text(this)},wrapAll:function(t){if(R.isFunction(t))return this.each(function(e){R(this).wrapAll(t.call(this,e))});if(this[0]){var e=R(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return R.isFunction(t)?this.each(function(e){R(this).wrapInner(t.call(this,e))}):this.each(function(){var e=R(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=R.isFunction(t);return this.each(function(i){R(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){R.nodeName(this,"body")||R(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(t){1===this.nodeType&&this.appendChild(t)})},prepend:function(){return this.domManip(arguments,!0,function(t){1===this.nodeType&&this.insertBefore(t,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(t){this.parentNode.insertBefore(t,this)
});if(arguments.length){var t=R.clean(arguments);return t.push.apply(t,this.toArray()),this.pushStack(t,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(t){this.parentNode.insertBefore(t,this.nextSibling)});if(arguments.length){var t=this.pushStack(this,"after",arguments);return t.push.apply(t,R.clean(arguments)),t}},remove:function(t,e){for(var i,n=0;null!=(i=this[n]);n++)(!t||R.filter(t,[i]).length)&&(!e&&1===i.nodeType&&(R.cleanData(i.getElementsByTagName("*")),R.cleanData([i])),i.parentNode&&i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)for(1===t.nodeType&&R.cleanData(t.getElementsByTagName("*"));t.firstChild;)t.removeChild(t.firstChild);return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return R.clone(this,t,e)})},html:function(t){if(t===e)return this[0]&&1===this[0].nodeType?this[0].innerHTML.replace(me,""):null;if("string"!=typeof t||_e.test(t)||!R.support.leadingWhitespace&&ve.test(t)||ke[(xe.exec(t)||["",""])[1].toLowerCase()])R.isFunction(t)?this.each(function(e){var i=R(this);i.html(t.call(this,e,i.html()))}):this.empty().append(t);else{t=t.replace(ye,"<$1></$2>");try{for(var i=0,n=this.length;n>i;i++)1===this[i].nodeType&&(R.cleanData(this[i].getElementsByTagName("*")),this[i].innerHTML=t)}catch(r){this.empty().append(t)}}return this},replaceWith:function(t){return this[0]&&this[0].parentNode?R.isFunction(t)?this.each(function(e){var i=R(this),n=i.html();i.replaceWith(t.call(this,e,n))}):("string"!=typeof t&&(t=R(t).detach()),this.each(function(){var e=this.nextSibling,i=this.parentNode;R(this).remove(),e?R(e).before(t):R(i).append(t)})):this.length?this.pushStack(R(R.isFunction(t)?t():t),"replaceWith",t):this},detach:function(t){return this.remove(t,!0)},domManip:function(t,i,n){var r,a,o,s,c=t[0],l=[];if(!R.support.checkClone&&3===arguments.length&&"string"==typeof c&&Se.test(c))return this.each(function(){R(this).domManip(t,i,n,!0)});if(R.isFunction(c))return this.each(function(r){var a=R(this);t[0]=c.call(this,r,i?a.html():e),a.domManip(t,i,n)});if(this[0]){if(s=c&&c.parentNode,r=R.support.parentNode&&s&&11===s.nodeType&&s.childNodes.length===this.length?{fragment:s}:R.buildFragment(t,this,l),o=r.fragment,a=1===o.childNodes.length?o=o.firstChild:o.firstChild,a){i=i&&R.nodeName(a,"tr");for(var h=0,u=this.length,d=u-1;u>h;h++)n.call(i?C(this[h],a):this[h],r.cacheable||u>1&&d>h?R.clone(o,!0,!0):o)}l.length&&R.each(l,m)}return this}}),R.buildFragment=function(t,e,i){var n,r,a,o,s=t[0];return e&&e[0]&&(o=e[0].ownerDocument||e[0]),o.createDocumentFragment||(o=D),1===t.length&&"string"==typeof s&&s.length<512&&o===D&&"<"===s.charAt(0)&&!Ce.test(s)&&(R.support.checkClone||!Se.test(s))&&(R.support.html5Clone||!Ke.test(s))&&(r=!0,a=R.fragments[s],a&&1!==a&&(n=a)),n||(n=o.createDocumentFragment(),R.clean(t,o,n,i)),r&&(R.fragments[s]=a?n:1),{fragment:n,cacheable:r}},R.fragments={},R.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){R.fn[t]=function(i){var n=[],r=R(i),a=1===this.length&&this[0].parentNode;if(a&&11===a.nodeType&&1===a.childNodes.length&&1===r.length)return r[e](this[0]),this;for(var o=0,s=r.length;s>o;o++){var c=(o>0?this.clone(!0):this).get();R(r[o])[e](c),n=n.concat(c)}return this.pushStack(n,t,r.selector)}}),R.extend({clone:function(t,e,i){var n,r,a,o=R.support.html5Clone||!Ke.test("<"+t.nodeName)?t.cloneNode(!0):v(t);if(!(R.support.noCloneEvent&&R.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||R.isXMLDoc(t)))for(w(t,o),n=b(t),r=b(o),a=0;n[a];++a)r[a]&&w(n[a],r[a]);if(e&&(_(t,o),i))for(n=b(t),r=b(o),a=0;n[a];++a)_(n[a],r[a]);return n=r=null,o},clean:function(t,e,i,n){var r;e=e||D,"undefined"==typeof e.createElement&&(e=e.ownerDocument||e[0]&&e[0].ownerDocument||D);for(var a,o,s=[],c=0;null!=(o=t[c]);c++)if("number"==typeof o&&(o+=""),o){if("string"==typeof o)if(we.test(o)){o=o.replace(ye,"<$1></$2>");var l=(xe.exec(o)||["",""])[1].toLowerCase(),h=ke[l]||ke._default,u=h[0],d=e.createElement("div");for(e===D?Fe.appendChild(d):K(e).appendChild(d),d.innerHTML=h[1]+o+h[2];u--;)d=d.lastChild;if(!R.support.tbody){var f=be.test(o),p="table"!==l||f?"<table>"!==h[1]||f?[]:d.childNodes:d.firstChild&&d.firstChild.childNodes;for(a=p.length-1;a>=0;--a)R.nodeName(p[a],"tbody")&&!p[a].childNodes.length&&p[a].parentNode.removeChild(p[a])}!R.support.leadingWhitespace&&ve.test(o)&&d.insertBefore(e.createTextNode(ve.exec(o)[0]),d.firstChild),o=d.childNodes}else o=e.createTextNode(o);var g;if(!R.support.appendChecked)if(o[0]&&"number"==typeof(g=o.length))for(a=0;g>a;a++)y(o[a]);else y(o);o.nodeType?s.push(o):s=R.merge(s,o)}if(i)for(r=function(t){return!t.type||Te.test(t.type)},c=0;s[c];c++)if(!n||!R.nodeName(s[c],"script")||s[c].type&&"text/javascript"!==s[c].type.toLowerCase()){if(1===s[c].nodeType){var m=R.grep(s[c].getElementsByTagName("script"),r);s.splice.apply(s,[c+1,0].concat(m))}i.appendChild(s[c])}else n.push(s[c].parentNode?s[c].parentNode.removeChild(s[c]):s[c]);return s},cleanData:function(t){for(var e,i,n,r=R.cache,a=R.event.special,o=R.support.deleteExpando,s=0;null!=(n=t[s]);s++)if((!n.nodeName||!R.noData[n.nodeName.toLowerCase()])&&(i=n[R.expando])){if(e=r[i],e&&e.events){for(var c in e.events)a[c]?R.event.remove(n,c):R.removeEvent(n,c,e.handle);e.handle&&(e.handle.elem=null)}o?delete n[R.expando]:n.removeAttribute&&n.removeAttribute(R.expando),delete r[i]}}});var Pe,Le,Ne,De=/alpha\([^)]*\)/i,Ee=/opacity=([^)]*)/,Me=/([A-Z]|^ms)/g,Re=/^-?\d+(?:px)?$/i,He=/^-?\d/,Ie=/^([\-+])=([\-+.\de]+)/,Ge={position:"absolute",visibility:"hidden",display:"block"},Oe=["Left","Right"],Be=["Top","Bottom"];R.fn.css=function(t,i){return 2===arguments.length&&i===e?this:R.access(this,t,i,!0,function(t,i,n){return n!==e?R.style(t,i,n):R.css(t,i)})},R.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=Pe(t,"opacity","opacity");return""===i?"1":i}return t.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":R.support.cssFloat?"cssFloat":"styleFloat"},style:function(t,i,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var a,o,s=R.camelCase(i),c=t.style,l=R.cssHooks[s];if(i=R.cssProps[s]||s,n===e)return l&&"get"in l&&(a=l.get(t,!1,r))!==e?a:c[i];if(o=typeof n,"string"===o&&(a=Ie.exec(n))&&(n=+(a[1]+1)*+a[2]+parseFloat(R.css(t,i)),o="number"),null==n||"number"===o&&isNaN(n))return;if("number"===o&&!R.cssNumber[s]&&(n+="px"),!(l&&"set"in l&&(n=l.set(t,n))===e))try{c[i]=n}catch(h){}}},css:function(t,i,n){var r,a;return i=R.camelCase(i),a=R.cssHooks[i],i=R.cssProps[i]||i,"cssFloat"===i&&(i="float"),a&&"get"in a&&(r=a.get(t,!0,n))!==e?r:Pe?Pe(t,i):void 0},swap:function(t,e,i){var n={};for(var r in e)n[r]=t.style[r],t.style[r]=e[r];i.call(t);for(r in e)t.style[r]=n[r]}}),R.curCSS=R.css,R.each(["height","width"],function(t,e){R.cssHooks[e]={get:function(t,i,n){var r;return i?0!==t.offsetWidth?g(t,e,n):(R.swap(t,Ge,function(){r=g(t,e,n)}),r):void 0},set:function(t,e){return Re.test(e)?(e=parseFloat(e),e>=0?e+"px":void 0):e}}}),R.support.opacity||(R.cssHooks.opacity={get:function(t,e){return Ee.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100+"":e?"1":""},set:function(t,e){var i=t.style,n=t.currentStyle,r=R.isNumeric(e)?"alpha(opacity="+100*e+")":"",a=n&&n.filter||i.filter||"";i.zoom=1,e>=1&&""===R.trim(a.replace(De,""))&&(i.removeAttribute("filter"),n&&!n.filter)||(i.filter=De.test(a)?a.replace(De,r):a+" "+r)}}),R(function(){R.support.reliableMarginRight||(R.cssHooks.marginRight={get:function(t,e){var i;return R.swap(t,{display:"inline-block"},function(){i=e?Pe(t,"margin-right","marginRight"):t.style.marginRight}),i}})}),D.defaultView&&D.defaultView.getComputedStyle&&(Le=function(t,e){var i,n,r;return e=e.replace(Me,"-$1").toLowerCase(),(n=t.ownerDocument.defaultView)&&(r=n.getComputedStyle(t,null))&&(i=r.getPropertyValue(e),""===i&&!R.contains(t.ownerDocument.documentElement,t)&&(i=R.style(t,e))),i}),D.documentElement.currentStyle&&(Ne=function(t,e){var i,n,r,a=t.currentStyle&&t.currentStyle[e],o=t.style;return null===a&&o&&(r=o[e])&&(a=r),!Re.test(a)&&He.test(a)&&(i=o.left,n=t.runtimeStyle&&t.runtimeStyle.left,n&&(t.runtimeStyle.left=t.currentStyle.left),o.left="fontSize"===e?"1em":a||0,a=o.pixelLeft+"px",o.left=i,n&&(t.runtimeStyle.left=n)),""===a?"auto":a}),Pe=Le||Ne,R.expr&&R.expr.filters&&(R.expr.filters.hidden=function(t){var e=t.offsetWidth,i=t.offsetHeight;return 0===e&&0===i||!R.support.reliableHiddenOffsets&&"none"===(t.style&&t.style.display||R.css(t,"display"))},R.expr.filters.visible=function(t){return!R.expr.filters.hidden(t)});var je,We,Ue=/%20/g,ze=/\[\]$/,qe=/\r?\n/g,Xe=/#.*$/,$e=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ye=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Ve=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Qe=/^(?:GET|HEAD)$/,Je=/^\/\//,Ze=/\?/,ti=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,ei=/^(?:select|textarea)/i,ii=/\s+/,ni=/([?&])_=[^&]*/,ri=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,ai=R.fn.load,oi={},si={},ci=["*/"]+["*"];try{je=M.href}catch(li){je=D.createElement("a"),je.href="",je=je.href}We=ri.exec(je.toLowerCase())||[],R.fn.extend({load:function(t,i,n){if("string"!=typeof t&&ai)return ai.apply(this,arguments);if(!this.length)return this;var r=t.indexOf(" ");if(r>=0){var a=t.slice(r,t.length);t=t.slice(0,r)}var o="GET";i&&(R.isFunction(i)?(n=i,i=e):"object"==typeof i&&(i=R.param(i,R.ajaxSettings.traditional),o="POST"));var s=this;return R.ajax({url:t,type:o,dataType:"html",data:i,complete:function(t,e,i){i=t.responseText,t.isResolved()&&(t.done(function(t){i=t}),s.html(a?R("<div>").append(i.replace(ti,"")).find(a):i)),n&&s.each(n,[i,e,t])}}),this},serialize:function(){return R.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?R.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ei.test(this.nodeName)||Ye.test(this.type))}).map(function(t,e){var i=R(this).val();return null==i?null:R.isArray(i)?R.map(i,function(t){return{name:e.name,value:t.replace(qe,"\r\n")}}):{name:e.name,value:i.replace(qe,"\r\n")}}).get()}}),R.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(t,e){R.fn[e]=function(t){return this.on(e,t)}}),R.each(["get","post"],function(t,i){R[i]=function(t,n,r,a){return R.isFunction(n)&&(a=a||r,r=n,n=e),R.ajax({type:i,url:t,data:n,success:r,dataType:a})}}),R.extend({getScript:function(t,i){return R.get(t,e,i,"script")},getJSON:function(t,e,i){return R.get(t,e,i,"json")},ajaxSetup:function(t,e){return e?d(t,R.ajaxSettings):(e=t,t=R.ajaxSettings),d(t,e),t},ajaxSettings:{url:je,isLocal:Ve.test(We[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":ci},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":t.String,"text html":!0,"text json":R.parseJSON,"text xml":R.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:p(oi),ajaxTransport:p(si),ajax:function(t,i){function n(t,i,n,o){if(2!==C){C=2,c&&clearTimeout(c),s=e,a=o||"",K.readyState=t>0?4:0;var u,f,p,w,_,S=i,T=n?h(g,K,n):e;if(t>=200&&300>t||304===t)if(g.ifModified&&((w=K.getResponseHeader("Last-Modified"))&&(R.lastModified[r]=w),(_=K.getResponseHeader("Etag"))&&(R.etag[r]=_)),304===t)S="notmodified",u=!0;else try{f=l(g,T),S="success",u=!0}catch(A){S="parsererror",p=A}else p=S,(!S||t)&&(S="error",0>t&&(t=0));K.status=t,K.statusText=""+(i||S),u?y.resolveWith(m,[f,S,K]):y.rejectWith(m,[K,S,p]),K.statusCode(b),b=e,d&&v.trigger("ajax"+(u?"Success":"Error"),[K,g,u?f:p]),x.fireWith(m,[K,S]),d&&(v.trigger("ajaxComplete",[K,g]),--R.active||R.event.trigger("ajaxStop"))}}"object"==typeof t&&(i=t,t=e),i=i||{};var r,a,o,s,c,u,d,p,g=R.ajaxSetup({},i),m=g.context||g,v=m!==g&&(m.nodeType||m instanceof R)?R(m):R.event,y=R.Deferred(),x=R.Callbacks("once memory"),b=g.statusCode||{},w={},_={},C=0,K={readyState:0,setRequestHeader:function(t,e){if(!C){var i=t.toLowerCase();t=_[i]=_[i]||t,w[t]=e}return this},getAllResponseHeaders:function(){return 2===C?a:null},getResponseHeader:function(t){var i;if(2===C){if(!o)for(o={};i=$e.exec(a);)o[i[1].toLowerCase()]=i[2];i=o[t.toLowerCase()]}return i===e?null:i},overrideMimeType:function(t){return C||(g.mimeType=t),this},abort:function(t){return t=t||"abort",s&&s.abort(t),n(0,t),this}};if(y.promise(K),K.success=K.done,K.error=K.fail,K.complete=x.add,K.statusCode=function(t){if(t){var e;if(2>C)for(e in t)b[e]=[b[e],t[e]];else e=t[K.status],K.then(e,e)}return this},g.url=((t||g.url)+"").replace(Xe,"").replace(Je,We[1]+"//"),g.dataTypes=R.trim(g.dataType||"*").toLowerCase().split(ii),null==g.crossDomain&&(u=ri.exec(g.url.toLowerCase()),g.crossDomain=!(!u||u[1]==We[1]&&u[2]==We[2]&&(u[3]||("http:"===u[1]?80:443))==(We[3]||("http:"===We[1]?80:443)))),g.data&&g.processData&&"string"!=typeof g.data&&(g.data=R.param(g.data,g.traditional)),f(oi,g,i,K),2===C)return!1;if(d=g.global,g.type=g.type.toUpperCase(),g.hasContent=!Qe.test(g.type),d&&0===R.active++&&R.event.trigger("ajaxStart"),!g.hasContent&&(g.data&&(g.url+=(Ze.test(g.url)?"&":"?")+g.data,delete g.data),r=g.url,g.cache===!1)){var S=R.now(),T=g.url.replace(ni,"$1_="+S);g.url=T+(T===g.url?(Ze.test(g.url)?"&":"?")+"_="+S:"")}(g.data&&g.hasContent&&g.contentType!==!1||i.contentType)&&K.setRequestHeader("Content-Type",g.contentType),g.ifModified&&(r=r||g.url,R.lastModified[r]&&K.setRequestHeader("If-Modified-Since",R.lastModified[r]),R.etag[r]&&K.setRequestHeader("If-None-Match",R.etag[r])),K.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+ci+"; q=0.01":""):g.accepts["*"]);for(p in g.headers)K.setRequestHeader(p,g.headers[p]);if(g.beforeSend&&(g.beforeSend.call(m,K,g)===!1||2===C))return K.abort(),!1;for(p in{success:1,error:1,complete:1})K[p](g[p]);if(s=f(si,g,i,K)){K.readyState=1,d&&v.trigger("ajaxSend",[K,g]),g.async&&g.timeout>0&&(c=setTimeout(function(){K.abort("timeout")},g.timeout));try{C=1,s.send(w,n)}catch(A){if(!(2>C))throw A;n(-1,A)}}else n(-1,"No Transport");return K},param:function(t,i){var n=[],r=function(t,e){e=R.isFunction(e)?e():e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(i===e&&(i=R.ajaxSettings.traditional),R.isArray(t)||t.jquery&&!R.isPlainObject(t))R.each(t,function(){r(this.name,this.value)});else for(var a in t)u(a,t[a],i,r);return n.join("&").replace(Ue,"+")}}),R.extend({active:0,lastModified:{},etag:{}});var hi=R.now(),ui=/(\=)\?(&|$)|\?\?/i;R.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return R.expando+"_"+hi++}}),R.ajaxPrefilter("json jsonp",function(e,i,n){var r="application/x-www-form-urlencoded"===e.contentType&&"string"==typeof e.data;if("jsonp"===e.dataTypes[0]||e.jsonp!==!1&&(ui.test(e.url)||r&&ui.test(e.data))){var a,o=e.jsonpCallback=R.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s=t[o],c=e.url,l=e.data,h="$1"+o+"$2";return e.jsonp!==!1&&(c=c.replace(ui,h),e.url===c&&(r&&(l=l.replace(ui,h)),e.data===l&&(c+=(/\?/.test(c)?"&":"?")+e.jsonp+"="+o))),e.url=c,e.data=l,t[o]=function(t){a=[t]},n.always(function(){t[o]=s,a&&R.isFunction(s)&&t[o](a[0])}),e.converters["script json"]=function(){return a||R.error(o+" was not called"),a[0]},e.dataTypes[0]="json","script"}}),R.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(t){return R.globalEval(t),t}}}),R.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),R.ajaxTransport("script",function(t){if(t.crossDomain){var i,n=D.head||D.getElementsByTagName("head")[0]||D.documentElement;return{send:function(r,a){i=D.createElement("script"),i.async="async",t.scriptCharset&&(i.charset=t.scriptCharset),i.src=t.url,i.onload=i.onreadystatechange=function(t,r){(r||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,n&&i.parentNode&&n.removeChild(i),i=e,r||a(200,"success"))},n.insertBefore(i,n.firstChild)},abort:function(){i&&i.onload(0,1)}}}});var di,fi=t.ActiveXObject?function(){for(var t in di)di[t](0,1)}:!1,pi=0;R.ajaxSettings.xhr=t.ActiveXObject?function(){return!this.isLocal&&c()||s()}:c,function(t){R.extend(R.support,{ajax:!!t,cors:!!t&&"withCredentials"in t})}(R.ajaxSettings.xhr()),R.support.ajax&&R.ajaxTransport(function(i){if(!i.crossDomain||R.support.cors){var n;return{send:function(r,a){var o,s,c=i.xhr();if(i.username?c.open(i.type,i.url,i.async,i.username,i.password):c.open(i.type,i.url,i.async),i.xhrFields)for(s in i.xhrFields)c[s]=i.xhrFields[s];i.mimeType&&c.overrideMimeType&&c.overrideMimeType(i.mimeType),!i.crossDomain&&!r["X-Requested-With"]&&(r["X-Requested-With"]="XMLHttpRequest");try{for(s in r)c.setRequestHeader(s,r[s])}catch(l){}c.send(i.hasContent&&i.data||null),n=function(t,r){var s,l,h,u,d;try{if(n&&(r||4===c.readyState))if(n=e,o&&(c.onreadystatechange=R.noop,fi&&delete di[o]),r)4!==c.readyState&&c.abort();else{s=c.status,h=c.getAllResponseHeaders(),u={},d=c.responseXML,d&&d.documentElement&&(u.xml=d),u.text=c.responseText;try{l=c.statusText}catch(f){l=""}s||!i.isLocal||i.crossDomain?1223===s&&(s=204):s=u.text?200:404}}catch(p){r||a(-1,p)}u&&a(s,l,u,h)},i.async&&4!==c.readyState?(o=++pi,fi&&(di||(di={},R(t).unload(fi)),di[o]=n),c.onreadystatechange=n):n()},abort:function(){n&&n(0,1)}}}});var gi,mi,vi,yi,xi={},bi=/^(?:toggle|show|hide)$/,wi=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,_i=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];R.fn.extend({show:function(t,e,i){var a,o;if(t||0===t)return this.animate(r("show",3),t,e,i);for(var s=0,c=this.length;c>s;s++)a=this[s],a.style&&(o=a.style.display,!R._data(a,"olddisplay")&&"none"===o&&(o=a.style.display=""),""===o&&"none"===R.css(a,"display")&&R._data(a,"olddisplay",n(a.nodeName)));for(s=0;c>s;s++)a=this[s],a.style&&(o=a.style.display,(""===o||"none"===o)&&(a.style.display=R._data(a,"olddisplay")||""));return this},hide:function(t,e,i){if(t||0===t)return this.animate(r("hide",3),t,e,i);for(var n,a,o=0,s=this.length;s>o;o++)n=this[o],n.style&&(a=R.css(n,"display"),"none"!==a&&!R._data(n,"olddisplay")&&R._data(n,"olddisplay",a));for(o=0;s>o;o++)this[o].style&&(this[o].style.display="none");return this},_toggle:R.fn.toggle,toggle:function(t,e,i){var n="boolean"==typeof t;return R.isFunction(t)&&R.isFunction(e)?this._toggle.apply(this,arguments):null==t||n?this.each(function(){var e=n?t:R(this).is(":hidden");R(this)[e?"show":"hide"]()}):this.animate(r("toggle",3),t,e,i),this},fadeTo:function(t,e,i,n){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,r){function a(){o.queue===!1&&R._mark(this);var e,i,r,a,s,c,l,h,u,d=R.extend({},o),f=1===this.nodeType,p=f&&R(this).is(":hidden");d.animatedProperties={};for(r in t){if(e=R.camelCase(r),r!==e&&(t[e]=t[r],delete t[r]),i=t[e],R.isArray(i)?(d.animatedProperties[e]=i[1],i=t[e]=i[0]):d.animatedProperties[e]=d.specialEasing&&d.specialEasing[e]||d.easing||"swing","hide"===i&&p||"show"===i&&!p)return d.complete.call(this);f&&("height"===e||"width"===e)&&(d.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===R.css(this,"display")&&"none"===R.css(this,"float")&&(R.support.inlineBlockNeedsLayout&&"inline"!==n(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=d.overflow&&(this.style.overflow="hidden");for(r in t)a=new R.fx(this,d,r),i=t[r],bi.test(i)?(u=R._data(this,"toggle"+r)||("toggle"===i?p?"show":"hide":0),u?(R._data(this,"toggle"+r,"show"===u?"hide":"show"),a[u]()):a[i]()):(s=wi.exec(i),c=a.cur(),s?(l=parseFloat(s[2]),h=s[3]||(R.cssNumber[r]?"":"px"),"px"!==h&&(R.style(this,r,(l||1)+h),c=(l||1)/a.cur()*c,R.style(this,r,c+h)),s[1]&&(l=("-="===s[1]?-1:1)*l+c),a.custom(c,l,h)):a.custom(c,i,""));return!0}var o=R.speed(e,i,r);return R.isEmptyObject(t)?this.each(o.complete,[!1]):(t=R.extend({},t),o.queue===!1?this.each(a):this.queue(o.queue,a))},stop:function(t,i,n){return"string"!=typeof t&&(n=i,i=t,t=e),i&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){function e(t,e,i){var r=e[i];R.removeData(t,i,!0),r.stop(n)}var i,r=!1,a=R.timers,o=R._data(this);if(n||R._unmark(!0,this),null==t)for(i in o)o[i]&&o[i].stop&&i.indexOf(".run")===i.length-4&&e(this,o,i);else o[i=t+".run"]&&o[i].stop&&e(this,o,i);for(i=a.length;i--;)a[i].elem===this&&(null==t||a[i].queue===t)&&(n?a[i](!0):a[i].saveState(),r=!0,a.splice(i,1));(!n||!r)&&R.dequeue(this,t)})}}),R.each({slideDown:r("show",1),slideUp:r("hide",1),slideToggle:r("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){R.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),R.extend({speed:function(t,e,i){var n=t&&"object"==typeof t?R.extend({},t):{complete:i||!i&&e||R.isFunction(t)&&t,duration:t,easing:i&&e||e&&!R.isFunction(e)&&e};return n.duration=R.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in R.fx.speeds?R.fx.speeds[n.duration]:R.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(t){R.isFunction(n.old)&&n.old.call(this),n.queue?R.dequeue(this,n.queue):t!==!1&&R._unmark(this)},n},easing:{linear:function(t,e,i,n){return i+n*t},swing:function(t,e,i,n){return(-Math.cos(t*Math.PI)/2+.5)*n+i}},timers:[],fx:function(t,e,i){this.options=e,this.elem=t,this.prop=i,e.orig=e.orig||{}}}),R.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(R.fx.step[this.prop]||R.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var t,e=R.css(this.elem,this.prop);return isNaN(t=parseFloat(e))?e&&"auto"!==e?e:0:t},custom:function(t,i,n){function r(t){return a.step(t)}var a=this,s=R.fx;this.startTime=yi||o(),this.end=i,this.now=this.start=t,this.pos=this.state=0,this.unit=n||this.unit||(R.cssNumber[this.prop]?"":"px"),r.queue=this.options.queue,r.elem=this.elem,r.saveState=function(){a.options.hide&&R._data(a.elem,"fxshow"+a.prop)===e&&R._data(a.elem,"fxshow"+a.prop,a.start)},r()&&R.timers.push(r)&&!vi&&(vi=setInterval(s.tick,s.interval))},show:function(){var t=R._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=t||R.style(this.elem,this.prop),this.options.show=!0,t!==e?this.custom(this.cur(),t):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),R(this.elem).show()},hide:function(){this.options.orig[this.prop]=R._data(this.elem,"fxshow"+this.prop)||R.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(t){var e,i,n,r=yi||o(),a=!0,s=this.elem,c=this.options;if(t||r>=c.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),c.animatedProperties[this.prop]=!0;for(e in c.animatedProperties)c.animatedProperties[e]!==!0&&(a=!1);if(a){if(null!=c.overflow&&!R.support.shrinkWrapBlocks&&R.each(["","X","Y"],function(t,e){s.style["overflow"+e]=c.overflow[t]}),c.hide&&R(s).hide(),c.hide||c.show)for(e in c.animatedProperties)R.style(s,e,c.orig[e]),R.removeData(s,"fxshow"+e,!0),R.removeData(s,"toggle"+e,!0);n=c.complete,n&&(c.complete=!1,n.call(s))}return!1}return 1/0==c.duration?this.now=r:(i=r-this.startTime,this.state=i/c.duration,this.pos=R.easing[c.animatedProperties[this.prop]](this.state,i,0,1,c.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},R.extend(R.fx,{tick:function(){for(var t,e=R.timers,i=0;i<e.length;i++)t=e[i],!t()&&e[i]===t&&e.splice(i--,1);e.length||R.fx.stop()},interval:13,stop:function(){clearInterval(vi),vi=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(t){R.style(t.elem,"opacity",t.now)},_default:function(t){t.elem.style&&null!=t.elem.style[t.prop]?t.elem.style[t.prop]=t.now+t.unit:t.elem[t.prop]=t.now}}}),R.each(["width","height"],function(t,e){R.fx.step[e]=function(t){R.style(t.elem,e,Math.max(0,t.now)+t.unit)}}),R.expr&&R.expr.filters&&(R.expr.filters.animated=function(t){return R.grep(R.timers,function(e){return t===e.elem}).length});var Ci=/^t(?:able|d|h)$/i,Ki=/^(?:body|html)$/i;R.fn.offset="getBoundingClientRect"in D.documentElement?function(t){var e,n=this[0];if(t)return this.each(function(e){R.offset.setOffset(this,t,e)});if(!n||!n.ownerDocument)return null;if(n===n.ownerDocument.body)return R.offset.bodyOffset(n);try{e=n.getBoundingClientRect()}catch(r){}var a=n.ownerDocument,o=a.documentElement;if(!e||!R.contains(o,n))return e?{top:e.top,left:e.left}:{top:0,left:0};var s=a.body,c=i(a),l=o.clientTop||s.clientTop||0,h=o.clientLeft||s.clientLeft||0,u=c.pageYOffset||R.support.boxModel&&o.scrollTop||s.scrollTop,d=c.pageXOffset||R.support.boxModel&&o.scrollLeft||s.scrollLeft,f=e.top+u-l,p=e.left+d-h;return{top:f,left:p}}:function(t){var e=this[0];if(t)return this.each(function(e){R.offset.setOffset(this,t,e)});if(!e||!e.ownerDocument)return null;if(e===e.ownerDocument.body)return R.offset.bodyOffset(e);for(var i,n=e.offsetParent,r=e,a=e.ownerDocument,o=a.documentElement,s=a.body,c=a.defaultView,l=c?c.getComputedStyle(e,null):e.currentStyle,h=e.offsetTop,u=e.offsetLeft;(e=e.parentNode)&&e!==s&&e!==o&&(!R.support.fixedPosition||"fixed"!==l.position);)i=c?c.getComputedStyle(e,null):e.currentStyle,h-=e.scrollTop,u-=e.scrollLeft,e===n&&(h+=e.offsetTop,u+=e.offsetLeft,R.support.doesNotAddBorder&&(!R.support.doesAddBorderForTableAndCells||!Ci.test(e.nodeName))&&(h+=parseFloat(i.borderTopWidth)||0,u+=parseFloat(i.borderLeftWidth)||0),r=n,n=e.offsetParent),R.support.subtractsBorderForOverflowNotVisible&&"visible"!==i.overflow&&(h+=parseFloat(i.borderTopWidth)||0,u+=parseFloat(i.borderLeftWidth)||0),l=i;return("relative"===l.position||"static"===l.position)&&(h+=s.offsetTop,u+=s.offsetLeft),R.support.fixedPosition&&"fixed"===l.position&&(h+=Math.max(o.scrollTop,s.scrollTop),u+=Math.max(o.scrollLeft,s.scrollLeft)),{top:h,left:u}},R.offset={bodyOffset:function(t){var e=t.offsetTop,i=t.offsetLeft;return R.support.doesNotIncludeMarginInBodyOffset&&(e+=parseFloat(R.css(t,"marginTop"))||0,i+=parseFloat(R.css(t,"marginLeft"))||0),{top:e,left:i}},setOffset:function(t,e,i){var n=R.css(t,"position");"static"===n&&(t.style.position="relative");var r,a,o=R(t),s=o.offset(),c=R.css(t,"top"),l=R.css(t,"left"),h=("absolute"===n||"fixed"===n)&&R.inArray("auto",[c,l])>-1,u={},d={};h?(d=o.position(),r=d.top,a=d.left):(r=parseFloat(c)||0,a=parseFloat(l)||0),R.isFunction(e)&&(e=e.call(t,i,s)),null!=e.top&&(u.top=e.top-s.top+r),null!=e.left&&(u.left=e.left-s.left+a),"using"in e?e.using.call(t,u):o.css(u)}},R.fn.extend({position:function(){if(!this[0])return null;var t=this[0],e=this.offsetParent(),i=this.offset(),n=Ki.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat(R.css(t,"marginTop"))||0,i.left-=parseFloat(R.css(t,"marginLeft"))||0,n.top+=parseFloat(R.css(e[0],"borderTopWidth"))||0,n.left+=parseFloat(R.css(e[0],"borderLeftWidth"))||0,{top:i.top-n.top,left:i.left-n.left}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||D.body;t&&!Ki.test(t.nodeName)&&"static"===R.css(t,"position");)t=t.offsetParent;return t})}}),R.each(["Left","Top"],function(t,n){var r="scroll"+n;R.fn[r]=function(n){var a,o;return n===e?(a=this[0])?(o=i(a),o?"pageXOffset"in o?o[t?"pageYOffset":"pageXOffset"]:R.support.boxModel&&o.document.documentElement[r]||o.document.body[r]:a[r]):null:this.each(function(){o=i(this),o?o.scrollTo(t?R(o).scrollLeft():n,t?n:R(o).scrollTop()):this[r]=n})}}),R.each(["Height","Width"],function(t,i){var n=i.toLowerCase();R.fn["inner"+i]=function(){var t=this[0];return t?t.style?parseFloat(R.css(t,n,"padding")):this[n]():null},R.fn["outer"+i]=function(t){var e=this[0];return e?e.style?parseFloat(R.css(e,n,t?"margin":"border")):this[n]():null},R.fn[n]=function(t){var r=this[0];if(!r)return null==t?null:this;if(R.isFunction(t))return this.each(function(e){var i=R(this);i[n](t.call(this,e,i[n]()))});if(R.isWindow(r)){var a=r.document.documentElement["client"+i],o=r.document.body;return"CSS1Compat"===r.document.compatMode&&a||o&&o["client"+i]||a}if(9===r.nodeType)return Math.max(r.documentElement["client"+i],r.body["scroll"+i],r.documentElement["scroll"+i],r.body["offset"+i],r.documentElement["offset"+i]);if(t===e){var s=R.css(r,n),c=parseFloat(s);return R.isNumeric(c)?c:s}return this.css(n,"string"==typeof t?t:t+"px")}}),t.jQuery=t.$=R,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return R})}(window),function(){var t=jQuery.event.special,e="D"+ +new Date,i="D"+(+new Date+1);t.scrollstart={setup:function(){var i,n=function(e){var n=this,r=arguments;i?clearTimeout(i):(e.type="scrollstart",jQuery.event.handle.apply(n,r)),i=setTimeout(function(){i=null},t.scrollstop.latency)};jQuery(this).bind("scroll",n).data(e,n)},teardown:function(){jQuery(this).unbind("scroll",jQuery(this).data(e))}},t.scrollstop={latency:500,setup:function(){var e,n=function(i){var n=this,r=arguments;e&&clearTimeout(e),e=setTimeout(function(){e=null,i.type="scrollstop",jQuery.event.handle.apply(n,r)},t.scrollstop.latency)};jQuery(this).bind("scroll",n).data(i,n)},teardown:function(){jQuery(this).unbind("scroll",jQuery(this).data(i))}}}();var Kinetic={};!function(){Kinetic.version="4.6.0",Kinetic.Filters={},Kinetic.Node=function(t){this._init(t)},Kinetic.Shape=function(t){this.__init(t)},Kinetic.Container=function(t){this.__init(t)},Kinetic.Stage=function(t){this.___init(t)},Kinetic.Layer=function(t){this.___init(t)},Kinetic.Group=function(t){this.___init(t)},Kinetic.Global={stages:[],idCounter:0,ids:{},names:{},shapes:{},listenClickTap:!1,inDblClickWindow:!1,dblClickWindow:400,isDragging:function(){var t=Kinetic.DD;return t?t.isDragging:!1},isDragReady:function(){var t=Kinetic.DD;return t?!!t.node:!1},_addId:function(t,e){void 0!==e&&(this.ids[e]=t)},_removeId:function(t){void 0!==t&&delete this.ids[t]},_addName:function(t,e){void 0!==e&&(void 0===this.names[e]&&(this.names[e]=[]),this.names[e].push(t))},_removeName:function(t,e){if(void 0!==t){var i=this.names[t];if(void 0!==i){for(var n=0;n<i.length;n++){var r=i[n];r._id===e&&i.splice(n,1)}0===i.length&&delete this.names[t]}}}}}(),function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.returnExports=e()}(this,function(){return Kinetic}),function(){Kinetic.Collection=function(){var t=[].slice.call(arguments),e=t.length,i=0;for(this.length=e;e>i;i++)this[i]=t[i];return this},Kinetic.Collection.prototype=[],Kinetic.Collection.prototype.each=function(t){for(var e=0;e<this.length;e++)t(this[e],e)},Kinetic.Collection.prototype.toArray=function(){var t,e=[],i=this.length;for(t=0;i>t;t++)e.push(this[t]);return e},Kinetic.Collection.toCollection=function(t){var e,i=new Kinetic.Collection,n=t.length;for(e=0;n>e;e++)i.push(t[e]);return i},Kinetic.Collection.mapMethods=function(t){var e,i=t.length;for(e=0;i>e;e++)!function(e){var i=t[e];Kinetic.Collection.prototype[i]=function(){var t,e=this.length;for(args=[].slice.call(arguments),t=0;e>t;t++)this[t][i].apply(this[t],args)}}(e)}}(),function(){Kinetic.Transform=function(){this.m=[1,0,0,1,0,0]},Kinetic.Transform.prototype={translate:function(t,e){this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e},scale:function(t,e){this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e},rotate:function(t){var e=Math.cos(t),i=Math.sin(t),n=this.m[0]*e+this.m[2]*i,r=this.m[1]*e+this.m[3]*i,a=this.m[0]*-i+this.m[2]*e,o=this.m[1]*-i+this.m[3]*e;
this.m[0]=n,this.m[1]=r,this.m[2]=a,this.m[3]=o},getTranslation:function(){return{x:this.m[4],y:this.m[5]}},skew:function(t,e){var i=this.m[0]+this.m[2]*e,n=this.m[1]+this.m[3]*e,r=this.m[2]+this.m[0]*t,a=this.m[3]+this.m[1]*t;this.m[0]=i,this.m[1]=n,this.m[2]=r,this.m[3]=a},multiply:function(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],i=this.m[1]*t.m[0]+this.m[3]*t.m[1],n=this.m[0]*t.m[2]+this.m[2]*t.m[3],r=this.m[1]*t.m[2]+this.m[3]*t.m[3],a=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],o=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];this.m[0]=e,this.m[1]=i,this.m[2]=n,this.m[3]=r,this.m[4]=a,this.m[5]=o},invert:function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,i=-this.m[1]*t,n=-this.m[2]*t,r=this.m[0]*t,a=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);this.m[0]=e,this.m[1]=i,this.m[2]=n,this.m[3]=r,this.m[4]=a,this.m[5]=o},getMatrix:function(){return this.m},setAbsolutePosition:function(t,e){var i=this.m[0],n=this.m[1],r=this.m[2],a=this.m[3],o=this.m[4],s=this.m[5],c=(i*(e-s)-n*(t-o))/(i*a-n*r),l=(t-o-r*c)/i;this.translate(l,c)}}}(),function(){var t="canvas",e="2d",i="[object Array]",n="[object Number]",r="[object String]",a=Math.PI/180,o=180/Math.PI,s="#",c="",l="0",h="Kinetic warning: ",u="Kinetic error: ",d="rgb(",f={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},p=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;Kinetic.Util={_isElement:function(t){return!(!t||1!=t.nodeType)},_isFunction:function(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isObject:function(t){return!!t&&t.constructor==Object},_isArray:function(t){return Object.prototype.toString.call(t)==i},_isNumber:function(t){return Object.prototype.toString.call(t)==n},_isString:function(t){return Object.prototype.toString.call(t)==r},_hasMethods:function(t){var e,i=[];for(e in t)this._isFunction(t[e])&&i.push(e);return i.length>0},_isInDocument:function(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_getXY:function(t){if(this._isNumber(t))return{x:t,y:t};if(this._isArray(t)){if(1===t.length){var e=t[0];if(this._isNumber(e))return{x:e,y:e};if(this._isArray(e))return{x:e[0],y:e[1]};if(this._isObject(e))return e}else if(t.length>=2)return{x:t[0],y:t[1]}}else if(this._isObject(t))return t;return null},_getSize:function(t){if(this._isNumber(t))return{width:t,height:t};if(this._isArray(t))if(1===t.length){var e=t[0];if(this._isNumber(e))return{width:e,height:e};if(this._isArray(e)){if(e.length>=4)return{width:e[2],height:e[3]};if(e.length>=2)return{width:e[0],height:e[1]}}else if(this._isObject(e))return e}else{if(t.length>=4)return{width:t[2],height:t[3]};if(t.length>=2)return{width:t[0],height:t[1]}}else if(this._isObject(t))return t;return null},_getPoints:function(t){var e,i,n=[];if(void 0===t)return[];if(i=t.length,this._isArray(t[0])){for(e=0;i>e;e++)n.push({x:t[e][0],y:t[e][1]});return n}if(this._isObject(t[0]))return t;for(e=0;i>e;e+=2)n.push({x:t[e],y:t[e+1]});return n},_getImage:function(i,n){var r,a,o,s;i?this._isElement(i)?n(i):this._isString(i)?(r=new Image,r.onload=function(){n(r)},r.src=i):i.data?(a=document.createElement(t),a.width=i.width,a.height=i.height,o=a.getContext(e),o.putImageData(i,0,0),s=a.toDataURL(),r=new Image,r.onload=function(){n(r)},r.src=s):n(null):n(null)},_rgbToHex:function(t,e,i){return((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)},_hexToRgb:function(t){t=t.replace(s,c);var e=parseInt(t,16);return{r:255&e>>16,g:255&e>>8,b:255&e}},getRandomColor:function(){for(var t=(16777215*Math.random()<<0).toString(16);t.length<6;)t=l+t;return s+t},getRGB:function(t){var e;return t in f?(e=f[t],{r:e[0],g:e[1],b:e[2]}):t[0]===s?this._hexToRgb(t.substring(1)):t.substr(0,4)===d?(e=p.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},_merge:function(t,e){var i=this._clone(e);for(var n in t)i[n]=this._isObject(t[n])?this._merge(t[n],i[n]):t[n];return i},_clone:function(t){var e={};for(var i in t)e[i]=this._isObject(t[i])?this._clone(t[i]):t[i];return e},_degToRad:function(t){return t*a},_radToDeg:function(t){return t*o},_capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},error:function(t){throw new Error(u+t)},warn:function(t){window.console&&console.warn&&console.warn(h+t)},extend:function(t,e){for(var i in e.prototype)i in t.prototype||(t.prototype[i]=e.prototype[i])},addMethods:function(t,e){var i;for(i in e)t.prototype[i]=e[i]},_getControlPoints:function(t,e,i,n){var r=t.x,a=t.y,o=e.x,s=e.y,c=i.x,l=i.y,h=Math.sqrt(Math.pow(o-r,2)+Math.pow(s-a,2)),u=Math.sqrt(Math.pow(c-o,2)+Math.pow(l-s,2)),d=n*h/(h+u),f=n*u/(h+u),p=o-d*(c-r),g=s-d*(l-a),m=o+f*(c-r),v=s+f*(l-a);return[{x:p,y:g},{x:m,y:v}]},_expandPoints:function(t,e){var i,n,r=t.length,a=[];for(i=1;r-1>i;i++)n=Kinetic.Util._getControlPoints(t[i-1],t[i],t[i+1],e),a.push(n[0]),a.push(t[i]),a.push(n[1]);return a},_removeLastLetter:function(t){return t.substring(0,t.length-1)}}}(),function(){var t=document.createElement("canvas"),e=t.getContext("2d"),i=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,r=i/n;Kinetic.Canvas=function(t){this.init(t)},Kinetic.Canvas.prototype={init:function(t){t=t||{};var e=t.width||0,i=t.height||0,n=t.pixelRatio||r,a=t.contextType||"2d";this.pixelRatio=n,this.element=document.createElement("canvas"),this.element.style.padding=0,this.element.style.margin=0,this.element.style.border=0,this.element.style.background="transparent",this.element.style.position="absolute",this.element.style.top=0,this.element.style.left=0,this.context=this.element.getContext(a),this.setSize(e,i)},getElement:function(){return this.element},getContext:function(){return this.context},setWidth:function(t){this.width=this.element.width=t*this.pixelRatio,this.element.style.width=t+"px"},setHeight:function(t){this.height=this.element.height=t*this.pixelRatio,this.element.style.height=t+"px"},getWidth:function(){return this.width},getHeight:function(){return this.height},setSize:function(t,e){this.setWidth(t),this.setHeight(e)},clear:function(t){var e,i,n=this.getContext();t?(e=Kinetic.Util._getXY(t),i=Kinetic.Util._getSize(t),n.clearRect(e.x||0,e.y||0,i.width,i.height)):n.clearRect(0,0,this.getWidth(),this.getHeight())},toDataURL:function(t,e){try{return this.element.toDataURL(t,e)}catch(i){try{return this.element.toDataURL()}catch(n){return Kinetic.Util.warn("Unable to get data URL. "+n.message),""}}},fill:function(t){t.getFillEnabled()&&this._fill(t)},stroke:function(t){t.getStrokeEnabled()&&this._stroke(t)},fillStroke:function(t){var e=t.getFillEnabled();e&&this._fill(t),t.getStrokeEnabled()&&this._stroke(t,t.hasShadow()&&t.hasFill()&&e)},applyShadow:function(t,e){var i=this.context;i.save(),this._applyShadow(t),e(),i.restore(),e()},_applyLineCap:function(t){var e=t.getLineCap();e&&(this.context.lineCap=e)},_applyOpacity:function(t){var e=t.getAbsoluteOpacity();1!==e&&(this.context.globalAlpha=e)},_applyLineJoin:function(t){var e=t.getLineJoin();e&&(this.context.lineJoin=e)},_applyAncestorTransforms:function(t){var e=t.getAbsoluteTransform().getMatrix();this.context.transform(e[0],e[1],e[2],e[3],e[4],e[5])},_clip:function(t){var e=this.getContext(),i=t.getClipX()||0,n=t.getClipY()||0,r=t.getClipWidth(),a=t.getClipHeight();e.save(),this._applyAncestorTransforms(t),e.beginPath(),e.rect(i,n,r,a),e.clip(),e.setTransform(1,0,0,1,0,0)}},Kinetic.SceneCanvas=function(t){Kinetic.Canvas.call(this,t)},Kinetic.SceneCanvas.prototype={setWidth:function(t){var e=this.pixelRatio;Kinetic.Canvas.prototype.setWidth.call(this,t),this.context.scale(e,e)},setHeight:function(t){var e=this.pixelRatio;Kinetic.Canvas.prototype.setHeight.call(this,t),this.context.scale(e,e)},_fillColor:function(t){var e=this.context,i=t.getFill();e.fillStyle=i,t._fillFunc(e)},_fillPattern:function(t){var e=this.context,i=t.getFillPatternImage(),n=t.getFillPatternX(),r=t.getFillPatternY(),a=t.getFillPatternScale(),o=t.getFillPatternRotation(),s=t.getFillPatternOffset(),c=t.getFillPatternRepeat();(n||r)&&e.translate(n||0,r||0),o&&e.rotate(o),a&&e.scale(a.x,a.y),s&&e.translate(-1*s.x,-1*s.y),e.fillStyle=e.createPattern(i,c||"repeat"),e.fill()},_fillLinearGradient:function(t){var e=this.context,i=t.getFillLinearGradientStartPoint(),n=t.getFillLinearGradientEndPoint(),r=t.getFillLinearGradientColorStops(),a=e.createLinearGradient(i.x,i.y,n.x,n.y);if(r){for(var o=0;o<r.length;o+=2)a.addColorStop(r[o],r[o+1]);e.fillStyle=a,e.fill()}},_fillRadialGradient:function(t){for(var e=this.context,i=t.getFillRadialGradientStartPoint(),n=t.getFillRadialGradientEndPoint(),r=t.getFillRadialGradientStartRadius(),a=t.getFillRadialGradientEndRadius(),o=t.getFillRadialGradientColorStops(),s=e.createRadialGradient(i.x,i.y,r,n.x,n.y,a),c=0;c<o.length;c+=2)s.addColorStop(o[c],o[c+1]);e.fillStyle=s,e.fill()},_fill:function(t,e){var i=this.context,n=t.getFill(),r=t.getFillPatternImage(),a=t.getFillLinearGradientColorStops(),o=t.getFillRadialGradientColorStops(),s=t.getFillPriority();i.save(),!e&&t.hasShadow()&&this._applyShadow(t),n&&"color"===s?this._fillColor(t):r&&"pattern"===s?this._fillPattern(t):a&&"linear-gradient"===s?this._fillLinearGradient(t):o&&"radial-gradient"===s?this._fillRadialGradient(t):n?this._fillColor(t):r?this._fillPattern(t):a?this._fillLinearGradient(t):o&&this._fillRadialGradient(t),i.restore(),!e&&t.hasShadow()&&this._fill(t,!0)},_stroke:function(t,e){var i=this.context,n=t.getStroke(),r=t.getStrokeWidth(),a=t.getDashArray();(n||r)&&(i.save(),t.getStrokeScaleEnabled()||i.setTransform(1,0,0,1,0,0),this._applyLineCap(t),a&&t.getDashArrayEnabled()&&(i.setLineDash?i.setLineDash(a):"mozDash"in i?i.mozDash=a:"webkitLineDash"in i&&(i.webkitLineDash=a)),!e&&t.hasShadow()&&this._applyShadow(t),i.lineWidth=r||2,i.strokeStyle=n||"black",t._strokeFunc(i),i.restore(),!e&&t.hasShadow()&&this._stroke(t,!0))},_applyShadow:function(t){var e=this.context;if(t.hasShadow()&&t.getShadowEnabled()){var i=t.getAbsoluteOpacity(),n=t.getShadowColor()||"black",r=t.getShadowBlur()||5,a=t.getShadowOffset()||{x:0,y:0};t.getShadowOpacity()&&(e.globalAlpha=t.getShadowOpacity()*i),e.shadowColor=n,e.shadowBlur=r,e.shadowOffsetX=a.x,e.shadowOffsetY=a.y}}},Kinetic.Util.extend(Kinetic.SceneCanvas,Kinetic.Canvas),Kinetic.HitCanvas=function(t){Kinetic.Canvas.call(this,t)},Kinetic.HitCanvas.prototype={_fill:function(t){var e=this.context;e.save(),e.fillStyle=t.colorKey,t._fillFuncHit(e),e.restore()},_stroke:function(t){var e=this.context,i=t.getStroke(),n=t.getStrokeWidth();(i||n)&&(this._applyLineCap(t),e.lineWidth=n||2,e.strokeStyle=t.colorKey,t._strokeFuncHit(e))}},Kinetic.Util.extend(Kinetic.HitCanvas,Kinetic.Canvas)}(),function(){var t="add",e="b",i="Deg",n="g",r="get",a="#",o="r",s="RGB",c="set",l="B",h="G",u="Height",d="R",f="Width",p="X",g="Y";Kinetic.Factory={addGetterSetter:function(t,e,i){this.addGetter(t,e,i),this.addSetter(t,e)},addPointGetterSetter:function(t,e,i){this.addPointGetter(t,e,i),this.addPointSetter(t,e),this.addGetter(t,e+p,i),this.addGetter(t,e+g,i),this.addSetter(t,e+p),this.addSetter(t,e+g)},addBoxGetterSetter:function(t,e,i){this.addBoxGetter(t,e,i),this.addBoxSetter(t,e),this.addGetter(t,e+p,i),this.addGetter(t,e+g,i),this.addGetter(t,e+f,i),this.addGetter(t,e+u,i),this.addSetter(t,e+p),this.addSetter(t,e+g),this.addSetter(t,e+f),this.addSetter(t,e+u)},addPointsGetterSetter:function(t,e){this.addPointsGetter(t,e),this.addPointsSetter(t,e),this.addPointAdder(t,e)},addRotationGetterSetter:function(t,e,i){this.addRotationGetter(t,e,i),this.addRotationSetter(t,e)},addColorGetterSetter:function(t,i){this.addGetter(t,i),this.addSetter(t,i),this.addColorRGBGetter(t,i),this.addColorComponentGetter(t,i,o),this.addColorComponentGetter(t,i,n),this.addColorComponentGetter(t,i,e),this.addColorRGBSetter(t,i),this.addColorComponentSetter(t,i,o),this.addColorComponentSetter(t,i,n),this.addColorComponentSetter(t,i,e)},addColorRGBGetter:function(t,e){var i=r+Kinetic.Util._capitalize(e)+s;t.prototype[i]=function(){return Kinetic.Util.getRGB(this.attrs[e])}},addColorComponentGetter:function(t,e,i){var n=r+Kinetic.Util._capitalize(e),a=n+Kinetic.Util._capitalize(i);t.prototype[a]=function(){return this[n+s]()[i]}},addPointsGetter:function(t,e){var i=r+Kinetic.Util._capitalize(e);t.prototype[i]=function(){var t=this.attrs[e];return void 0===t?[]:t}},addGetter:function(t,e,i){var n=r+Kinetic.Util._capitalize(e);t.prototype[n]=function(){var t=this.attrs[e];return void 0===t?i:t}},addPointGetter:function(t,e){var i=r+Kinetic.Util._capitalize(e);t.prototype[i]=function(){var t=this;return{x:t[i+p](),y:t[i+g]()}}},addBoxGetter:function(t,e){var i=r+Kinetic.Util._capitalize(e);t.prototype[i]=function(){var t=this;return{x:t[i+p](),y:t[i+g](),width:t[i+f](),height:t[i+u]()}}},addRotationGetter:function(t,e,n){var a=r+Kinetic.Util._capitalize(e);t.prototype[a]=function(){var t=this.attrs[e];return void 0===t&&(t=n),t},t.prototype[a+i]=function(){var t=this.attrs[e];return void 0===t&&(t=n),Kinetic.Util._radToDeg(t)}},addColorRGBSetter:function(t,e){var i=c+Kinetic.Util._capitalize(e)+s;t.prototype[i]=function(t){var i=t&&void 0!==t.r?0|t.r:this.getAttr(e+d),n=t&&void 0!==t.g?0|t.g:this.getAttr(e+h),r=t&&void 0!==t.b?0|t.b:this.getAttr(e+l);this._setAttr(e,a+Kinetic.Util._rgbToHex(i,n,r))}},addColorComponentSetter:function(t,e,i){var n=c+Kinetic.Util._capitalize(e),r=n+Kinetic.Util._capitalize(i);t.prototype[r]=function(t){var e={};e[i]=t,this[n+s](e)}},addPointsSetter:function(t,e){var i=c+Kinetic.Util._capitalize(e);t.prototype[i]=function(t){var e=Kinetic.Util._getPoints(t);this._setAttr("points",e)}},addSetter:function(t,e){var i=c+Kinetic.Util._capitalize(e);t.prototype[i]=function(t){this._setAttr(e,t)}},addPointSetter:function(t,e){var i=c+Kinetic.Util._capitalize(e);t.prototype[i]=function(){var t=Kinetic.Util._getXY([].slice.call(arguments)),n=this.attrs[e],r=0,a=0;t&&(r=t.x,a=t.y,this._fireBeforeChangeEvent(e,n,t),void 0!==r&&this[i+p](r),void 0!==a&&this[i+g](a),this._fireChangeEvent(e,n,t))}},addBoxSetter:function(t,e){var i=c+Kinetic.Util._capitalize(e);t.prototype[i]=function(){var t,n,r,a,o=[].slice.call(arguments),s=Kinetic.Util._getXY(o),c=Kinetic.Util._getSize(o),l=Kinetic.Util._merge(s,c),h=this.attrs[e];l&&(t=l.x,n=l.y,r=l.width,a=l.height,this._fireBeforeChangeEvent(e,h,l),void 0!==t&&this[i+p](t),void 0!==n&&this[i+g](n),void 0!==r&&this[i+f](r),void 0!==a&&this[i+u](a),this._fireChangeEvent(e,h,l))}},addRotationSetter:function(t,e){var n=c+Kinetic.Util._capitalize(e);t.prototype[n]=function(t){this._setAttr(e,t)},t.prototype[n+i]=function(t){this._setAttr(e,Kinetic.Util._degToRad(t))}},addPointAdder:function(e,i){var n=t+Kinetic.Util._removeLastLetter(Kinetic.Util._capitalize(i));e.prototype[n]=function(){var t=Kinetic.Util._getXY([].slice.call(arguments)),e=this.attrs[i];t&&(this._fireBeforeChangeEvent(i,e,t),this.attrs[i].push(t),this._fireChangeEvent(i,e,t))}}}}(),function(){var e="absoluteOpacity",i="absoluteTransform",n="before",r="Change",a="children",o=".",s="",c="get",l="id",h="kinetic",u="listening",d="mouseenter",f="mouseleave",p="name",g="set",m="Shape",v=" ",y="stage",x="transform",b="Stage",w="visible",_=["xChange.kinetic","yChange.kinetic","scaleXChange.kinetic","scaleYChange.kinetic","skewXChange.kinetic","skewYChange.kinetic","rotationChange.kinetic","offsetXChange.kinetic","offsetYChange.kinetic"].join(v);Kinetic.Util.addMethods(Kinetic.Node,{_init:function(t){var n=this;this._id=Kinetic.Global.idCounter++,this.eventListeners={},this.attrs={},this.cache={},this.setAttrs(t),this.on(_,function(){this._clearCache(x),n._clearSelfAndChildrenCache(i)}),this.on("visibleChange.kinetic",function(){n._clearSelfAndChildrenCache(w)}),this.on("listeningChange.kinetic",function(){n._clearSelfAndChildrenCache(u)}),this.on("opacityChange.kinetic",function(){n._clearSelfAndChildrenCache(e)})},clearCache:function(){this.cache={}},_clearCache:function(t){delete this.cache[t]},_getCache:function(t,e){var i=this.cache[t];return void 0===i&&(this.cache[t]=e.call(this)),this.cache[t]},_clearSelfAndChildrenCache:function(t){this._clearCache(t),this.children&&this.getChildren().each(function(e){e._clearSelfAndChildrenCache(t)})},on:function(t,e){var i,n,r,a,c,l=t.split(v),h=l.length;for(i=0;h>i;i++)n=l[i],r=n.split(o),a=r[0],c=r[1]||s,this.eventListeners[a]||(this.eventListeners[a]=[]),this.eventListeners[a].push({name:c,handler:e});return this},off:function(e){var i,n,r,a,s,c=e.split(v),l=c.length;for(i=0;l>i;i++)if(n=c[i],r=n.split(o),a=r[0],s=r[1],a)this.eventListeners[a]&&this._off(a,s);else for(t in this.eventListeners)this._off(t,s);return this},remove:function(){var t=this.getParent();return t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),delete this.parent),this._clearSelfAndChildrenCache(y),this._clearSelfAndChildrenCache(i),this._clearSelfAndChildrenCache(w),this._clearSelfAndChildrenCache(u),this._clearSelfAndChildrenCache(e),this},destroy:function(){var t=Kinetic.Global;t._removeId(this.getId()),t._removeName(this.getName(),this._id),this.remove()},getAttr:function(t){var e=c+Kinetic.Util._capitalize(t);return Kinetic.Util._isFunction(this[e])?this[e]():this.attrs[t]},getAncestors:function(){for(var t=this.getParent(),e=new Kinetic.Collection;t;)e.push(t),t=t.getParent();return e},setAttr:function(){var t=Array.prototype.slice.call(arguments),e=t[0],i=g+Kinetic.Util._capitalize(e),n=this[i];return t.shift(),Kinetic.Util._isFunction(n)?n.apply(this,t):this.attrs[e]=t[0],this},getAttrs:function(){return this.attrs||{}},setAttrs:function(t){var e,i;if(t)for(e in t)e===a||(i=g+Kinetic.Util._capitalize(e),Kinetic.Util._isFunction(this[i])?this[i](t[e]):this._setAttr(e,t[e]));return this},isListening:function(){return this._getCache(u,this._isListening)},_isListening:function(){var t=this.getListening(),e=this.getParent();return t&&e&&!e.isListening()?!1:t},isVisible:function(){return this._getCache(w,this._isVisible)},_isVisible:function(){var t=this.getVisible(),e=this.getParent();return t&&e&&!e.isVisible()?!1:t},show:function(){return this.setVisible(!0),this},hide:function(){return this.setVisible(!1),this},getZIndex:function(){return this.index||0},getAbsoluteZIndex:function(){function t(c){for(e=[],i=c.length,n=0;i>n;n++)r=c[n],s++,r.nodeType!==m&&(e=e.concat(r.getChildren().toArray())),r._id===o._id&&(n=i);e.length>0&&e[0].getLevel()<=a&&t(e)}var e,i,n,r,a=this.getLevel(),o=this,s=0;return o.nodeType!==b&&t(o.getStage().getChildren()),s},getLevel:function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t},setPosition:function(){var t=Kinetic.Util._getXY([].slice.call(arguments));return this.setX(t.x),this.setY(t.y),this},getPosition:function(){return{x:this.getX(),y:this.getY()}},getAbsolutePosition:function(){var t=this.getAbsoluteTransform(),e=this.getOffset();return t.translate(e.x,e.y),t.getTranslation()},setAbsolutePosition:function(){var t,e=Kinetic.Util._getXY([].slice.call(arguments)),i=this._clearTransform();return this.attrs.x=i.x,this.attrs.y=i.y,delete i.x,delete i.y,t=this.getAbsoluteTransform(),t.invert(),t.translate(e.x,e.y),e={x:this.attrs.x+t.getTranslation().x,y:this.attrs.y+t.getTranslation().y},this.setPosition(e.x,e.y),this._setTransform(i),this},_setTransform:function(t){var e;for(e in t)this.attrs[e]=t[e];this._clearCache(x),this._clearSelfAndChildrenCache(i)},_clearTransform:function(){var t={x:this.getX(),y:this.getY(),rotation:this.getRotation(),scaleX:this.getScaleX(),scaleY:this.getScaleY(),offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),skewX:this.getSkewX(),skewY:this.getSkewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this._clearCache(x),this._clearSelfAndChildrenCache(i),t},move:function(){var t=Kinetic.Util._getXY([].slice.call(arguments)),e=this.getX(),i=this.getY();return void 0!==t.x&&(e+=t.x),void 0!==t.y&&(i+=t.y),this.setPosition(e,i),this},_eachAncestorReverse:function(t,e){var i,n,r=[],a=this.getParent();for(e&&r.unshift(this);a;)r.unshift(a),a=a.parent;for(i=r.length,n=0;i>n;n++)t(r[n])},rotate:function(t){return this.setRotation(this.getRotation()+t),this},rotateDeg:function(t){return this.setRotation(this.getRotation()+Kinetic.Util._degToRad(t)),this},moveToTop:function(){var t=this.index;return this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},moveUp:function(){var t=this.index,e=this.parent.getChildren().length;return e-1>t?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1},moveDown:function(){var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1},moveToBottom:function(){var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1},setZIndex:function(t){var e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this},getAbsoluteOpacity:function(){return this._getCache(e,this._getAbsoluteOpacity)},_getAbsoluteOpacity:function(){var t=this.getOpacity();return this.getParent()&&(t*=this.getParent().getAbsoluteOpacity()),t},moveTo:function(t){return Kinetic.Node.prototype.remove.call(this),t.add(this),this},toObject:function(){var t,e,i=Kinetic.Util,n={},r=this.getAttrs();n.attrs={};for(t in r)e=r[t],i._isFunction(e)||i._isElement(e)||i._isObject(e)&&i._hasMethods(e)||(n.attrs[t]=e);return n.className=this.getClassName(),n},toJSON:function(){return JSON.stringify(this.toObject())},getParent:function(){return this.parent},getLayer:function(){return this.getParent().getLayer()},getStage:function(){return this._getCache(y,this._getStage)},_getStage:function(){var t=this.getParent();return t?t.getStage():void 0},fire:function(t,e,i){return i?this._fireAndBubble(t,e||{}):this._fire(t,e||{}),this},getAbsoluteTransform:function(){return this._getCache(i,this._getAbsoluteTransform)},_getAbsoluteTransform:function(){var t,e=new Kinetic.Transform;return this._eachAncestorReverse(function(i){t=i.getTransform(),e.multiply(t)},!0),e},_getTransform:function(){var t=new Kinetic.Transform,e=this.getX(),i=this.getY(),n=this.getRotation(),r=this.getScaleX(),a=this.getScaleY(),o=this.getSkewX(),s=this.getSkewY(),c=this.getOffsetX(),l=this.getOffsetY();return(0!==e||0!==i)&&t.translate(e,i),0!==n&&t.rotate(n),(0!==o||0!==s)&&t.skew(o,s),(1!==r||1!==a)&&t.scale(r,a),(0!==c||0!==l)&&t.translate(-1*c,-1*l),t},clone:function(t){var e,i,n,r,a,o=this.getClassName(),s=new Kinetic[o](this.attrs);for(e in this.eventListeners)for(i=this.eventListeners[e],n=i.length,r=0;n>r;r++)a=i[r],a.name.indexOf(h)<0&&(s.eventListeners[e]||(s.eventListeners[e]=[]),s.eventListeners[e].push(a));return s.setAttrs(t),s},toDataURL:function(t){t=t||{};var e=t.mimeType||null,i=t.quality||null,n=this.getStage(),r=t.x||0,a=t.y||0,o=new Kinetic.SceneCanvas({width:t.width||n.getWidth(),height:t.height||n.getHeight(),pixelRatio:1}),s=o.getContext();return s.save(),(r||a)&&s.translate(-1*r,-1*a),this.drawScene(o),s.restore(),o.toDataURL(e,i)},toImage:function(t){Kinetic.Util._getImage(this.toDataURL(t),function(e){t.callback(e)})},setSize:function(){var t=Kinetic.Util._getSize(Array.prototype.slice.call(arguments));return this.setWidth(t.width),this.setHeight(t.height),this},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function(){return this.attrs.width||0},getHeight:function(){return this.attrs.height||0},getClassName:function(){return this.className||this.nodeType},getType:function(){return this.nodeType},_get:function(t){return this.nodeType===t?[this]:[]},_off:function(t,e){var i,n,r=this.eventListeners[t];for(i=0;i<r.length;i++)if(n=r[i].name,!("kinetic"===n&&"kinetic"!==e||e&&n!==e)){if(r.splice(i,1),0===r.length){delete this.eventListeners[t];break}i--}},_fireBeforeChangeEvent:function(t,e,i){this._fire(n+Kinetic.Util._capitalize(t)+r,{oldVal:e,newVal:i})},_fireChangeEvent:function(t,e,i){this._fire(t+r,{oldVal:e,newVal:i})},setId:function(t){var e=this.getId(),i=Kinetic.Global;return i._removeId(e),i._addId(this,t),this._setAttr(l,t),this},setName:function(t){var e=this.getName(),i=Kinetic.Global;return i._removeName(e,this._id),i._addName(this,t),this._setAttr(p,t),this},_setAttr:function(t,e){var i;void 0!==e&&(i=this.attrs[t],this._fireBeforeChangeEvent(t,i,e),this.attrs[t]=e,this._fireChangeEvent(t,i,e))},_fireAndBubble:function(t,e,i){var n=!0;e&&this.nodeType===m&&(e.targetNode=this),t===d&&i&&this._id===i._id?n=!1:t===f&&i&&this._id===i._id&&(n=!1),n&&(this._fire(t,e),e&&!e.cancelBubble&&this.parent&&(i&&i.parent?this._fireAndBubble.call(this.parent,t,e,i.parent):this._fireAndBubble.call(this.parent,t,e)))},_fire:function(t,e){var i,n,r=this.eventListeners[t];if(r)for(i=r.length,n=0;i>n;n++)r[n].handler.call(this,e)},draw:function(){return this.drawScene(),this.drawHit(),this},shouldDrawHit:function(){return this.isListening()&&this.isVisible()&&!Kinetic.Global.isDragging()},isDraggable:function(){return!1},getTransform:function(){return this._getCache(x,this._getTransform)}}),Kinetic.Node.create=function(t,e){return this._createNode(JSON.parse(t),e)},Kinetic.Node._createNode=function(t,e){var i,n,r,a=Kinetic.Node.prototype.getClassName.call(t),o=t.children;if(e&&(t.attrs.container=e),i=new Kinetic[a](t.attrs),o)for(n=o.length,r=0;n>r;r++)i.add(this._createNode(o[r]));return i},Kinetic.Factory.addGetterSetter(Kinetic.Node,"x",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"y",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"opacity",1),Kinetic.Factory.addGetter(Kinetic.Node,"name"),Kinetic.Factory.addGetter(Kinetic.Node,"id"),Kinetic.Factory.addRotationGetterSetter(Kinetic.Node,"rotation",0),Kinetic.Factory.addPointGetterSetter(Kinetic.Node,"scale",1),Kinetic.Factory.addPointGetterSetter(Kinetic.Node,"skew",0),Kinetic.Factory.addPointGetterSetter(Kinetic.Node,"offset",0),Kinetic.Factory.addSetter(Kinetic.Node,"width"),Kinetic.Factory.addSetter(Kinetic.Node,"height"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"listening",!0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"visible",!0),Kinetic.Collection.mapMethods(["on","off","remove","destroy","show","hide","move","rotate","moveToTop","moveUp","moveDown","moveToBottom","moveTo","fire","draw"])}(),function(){function t(t){window.setTimeout(t,1e3/60)}var e=500;Kinetic.Animation=function(t,e){this.func=t,this.setLayers(e),this.id=Kinetic.Animation.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:(new Date).getTime()}},Kinetic.Animation.prototype={setLayers:function(t){var e=[];e=t?t.length>0?t:[t]:[],this.layers=e},getLayers:function(){return this.layers},addLayer:function(t){var e,i,n=this.layers;if(n){for(e=n.length,i=0;e>i;i++)if(n[i]._id===t._id)return!1}else this.layers=[];return this.layers.push(t),!0},isRunning:function(){for(var t=Kinetic.Animation,e=t.animations,i=0;i<e.length;i++)if(e[i].id===this.id)return!0;return!1},start:function(){this.stop(),this.frame.timeDiff=0,this.frame.lastTime=(new Date).getTime(),Kinetic.Animation._addAnimation(this)},stop:function(){Kinetic.Animation._removeAnimation(this)},_updateFrameObject:function(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}},Kinetic.Animation.animations=[],Kinetic.Animation.animIdCounter=0,Kinetic.Animation.animRunning=!1,Kinetic.Animation._addAnimation=function(t){this.animations.push(t),this._handleAnimation()},Kinetic.Animation._removeAnimation=function(t){for(var e=t.id,i=this.animations,n=i.length,r=0;n>r;r++)if(i[r].id===e){this.animations.splice(r,1);break}},Kinetic.Animation._runFrames=function(){var t,e,i,n,r,a,o,s,c={},l=this.animations;for(n=0;n<l.length;n++){for(t=l[n],e=t.layers,i=t.func,t._updateFrameObject((new Date).getTime()),a=e.length,r=0;a>r;r++)o=e[r],void 0!==o._id&&(c[o._id]=o);i&&i.call(t,t.frame)}for(s in c)c[s].draw()},Kinetic.Animation._animationLoop=function(){var t=this;this.animations.length>0?(this._runFrames(),Kinetic.Animation.requestAnimFrame(function(){t._animationLoop()})):this.animRunning=!1},Kinetic.Animation._handleAnimation=function(){var t=this;this.animRunning||(this.animRunning=!0,t._animationLoop())},RAF=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||t}(),Kinetic.Animation.requestAnimFrame=function(e){var i=Kinetic.DD&&Kinetic.DD.isDragging?t:RAF;i(e)};var i=Kinetic.Node.prototype.moveTo;Kinetic.Node.prototype.moveTo=function(t){i.call(this,t)},Kinetic.Layer.prototype.batchDraw=function(){var t=this;this.batchAnim||(this.batchAnim=new Kinetic.Animation(function(){t.lastBatchDrawTime&&(new Date).getTime()-t.lastBatchDrawTime>e&&t.batchAnim.stop()},this)),this.lastBatchDrawTime=(new Date).getTime(),this.batchAnim.isRunning()||(this.draw(),this.batchAnim.start())},Kinetic.Stage.prototype.batchDraw=function(){this.getChildren().each(function(t){t.batchDraw()})}}(),function(){var t={node:1,duration:1,easing:1,onFinish:1,yoyo:1},e=1,i=2,n=3,r=0;Kinetic.Tween=function(e){var i,n=this,o=e.node,s=o._id,c=e.duration||1,l=e.easing||Kinetic.Easings.Linear,h=!!e.yoyo;this.node=o,this._id=r++,this.anim=new Kinetic.Animation(function(){n.tween.onEnterFrame()},o.getLayer()||o.getLayers()),this.tween=new a(i,function(t){n._tweenFunc(t)},l,0,1,1e3*c,h),this._addListeners(),Kinetic.Tween.attrs[s]||(Kinetic.Tween.attrs[s]={}),Kinetic.Tween.attrs[s][this._id]||(Kinetic.Tween.attrs[s][this._id]={}),Kinetic.Tween.tweens[s]||(Kinetic.Tween.tweens[s]={});for(i in e)void 0===t[i]&&this._addAttr(i,e[i]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset},Kinetic.Tween.attrs={},Kinetic.Tween.tweens={},Kinetic.Tween.prototype={_addAttr:function(t,e){var i,n,r,a,o,s,c,l=this.node,h=l._id;if(r=Kinetic.Tween.tweens[h][t],r&&delete Kinetic.Tween.attrs[h][r][t],i=l.getAttr(t),Kinetic.Util._isArray(e))for(e=Kinetic.Util._getPoints(e),n=[],o=e.length,a=0;o>a;a++)s=i[a],c=e[a],n.push({x:c.x-s.x,y:c.y-s.y});else n=e-i;Kinetic.Tween.attrs[h][this._id][t]={start:i,diff:n},Kinetic.Tween.tweens[h][t]=this._id},_tweenFunc:function(t){var e,i,n,r,a,o,s,c,l,h=this.node,u=Kinetic.Tween.attrs[h._id][this._id];for(e in u){if(i=u[e],n=i.start,r=i.diff,Kinetic.Util._isArray(n))for(a=[],s=n.length,o=0;s>o;o++)c=n[o],l=r[o],a.push({x:c.x+l.x*t,y:c.y+l.y*t});else a=n+r*t;h.setAttr(e,a)}},_addListeners:function(){var t=this;this.tween.onPlay=function(){t.anim.start()},this.tween.onReverse=function(){t.anim.start()},this.tween.onPause=function(){t.anim.stop()},this.tween.onFinish=function(){t.onFinish&&t.onFinish()},this.tween.onReset=function(){t.onReset&&t.onReset()}},play:function(){return this.tween.play(),this},reverse:function(){return this.tween.reverse(),this},reset:function(){var t=this.node;return this.tween.reset(),(t.getLayer()||t.getLayers()).draw(),this},seek:function(t){var e=this.node;return this.tween.seek(1e3*t),(e.getLayer()||e.getLayers()).draw(),this},pause:function(){return this.tween.pause(),this},finish:function(){var t=this.node;return this.tween.finish(),(t.getLayer()||t.getLayers()).draw(),this},destroy:function(){var t,e=this.node._id,i=this._id,n=Kinetic.Tween.tweens[e];this.pause();for(t in n)delete Kinetic.Tween.tweens[e][t];delete Kinetic.Tween.attrs[e][i]}};var a=function(t,e,i,n,r,a,o){this.prop=t,this.propFunc=e,this.begin=n,this._pos=n,this.duration=a,this._change=0,this.prevPos=0,this.yoyo=o,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=r-this.begin,this.pause()
};a.prototype={fire:function(t){var e=this[t];e&&e()},setTime:function(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():0>t?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())},getTime:function(){return this._time},setPosition:function(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t},getPosition:function(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)},play:function(){this.state=i,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},reverse:function(){this.state=n,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},seek:function(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")},reset:function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},finish:function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},update:function(){this.setPosition(this.getPosition(this._time))},onEnterFrame:function(){var t=this.getTimer()-this._startTime;this.state===i?this.setTime(t):this.state===n&&this.setTime(this.duration-t)},pause:function(){this.state=e,this.fire("onPause")},getTimer:function(){return(new Date).getTime()}},Kinetic.Easings={BackEaseIn:function(t,e,i,n){var r=1.70158;return i*(t/=n)*t*((r+1)*t-r)+e},BackEaseOut:function(t,e,i,n){var r=1.70158;return i*((t=t/n-1)*t*((r+1)*t+r)+1)+e},BackEaseInOut:function(t,e,i,n){var r=1.70158;return(t/=n/2)<1?i/2*t*t*(((r*=1.525)+1)*t-r)+e:i/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e},ElasticEaseIn:function(t,e,i,n,r,a){var o=0;return 0===t?e:1==(t/=n)?e+i:(a||(a=.3*n),!r||r<Math.abs(i)?(r=i,o=a/4):o=a/(2*Math.PI)*Math.asin(i/r),-(r*Math.pow(2,10*(t-=1))*Math.sin((t*n-o)*2*Math.PI/a))+e)},ElasticEaseOut:function(t,e,i,n,r,a){var o=0;return 0===t?e:1==(t/=n)?e+i:(a||(a=.3*n),!r||r<Math.abs(i)?(r=i,o=a/4):o=a/(2*Math.PI)*Math.asin(i/r),r*Math.pow(2,-10*t)*Math.sin((t*n-o)*2*Math.PI/a)+i+e)},ElasticEaseInOut:function(t,e,i,n,r,a){var o=0;return 0===t?e:2==(t/=n/2)?e+i:(a||(a=n*.3*1.5),!r||r<Math.abs(i)?(r=i,o=a/4):o=a/(2*Math.PI)*Math.asin(i/r),1>t?-.5*r*Math.pow(2,10*(t-=1))*Math.sin((t*n-o)*2*Math.PI/a)+e:.5*r*Math.pow(2,-10*(t-=1))*Math.sin((t*n-o)*2*Math.PI/a)+i+e)},BounceEaseOut:function(t,e,i,n){return(t/=n)<1/2.75?i*7.5625*t*t+e:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn:function(t,e,i,n){return i-Kinetic.Easings.BounceEaseOut(n-t,0,i,n)+e},BounceEaseInOut:function(t,e,i,n){return n/2>t?.5*Kinetic.Easings.BounceEaseIn(2*t,0,i,n)+e:.5*Kinetic.Easings.BounceEaseOut(2*t-n,0,i,n)+.5*i+e},EaseIn:function(t,e,i,n){return i*(t/=n)*t+e},EaseOut:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},EaseInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},StrongEaseIn:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},StrongEaseOut:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},StrongEaseInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},Linear:function(t,e,i,n){return i*t/n+e}}}(),function(){Kinetic.DD={anim:new Kinetic.Animation,isDragging:!1,offset:{x:0,y:0},node:null,_drag:function(t){var e=Kinetic.DD,i=e.node;i&&(i._setDragPosition(t),e.isDragging||(e.isDragging=!0,i.fire("dragstart",t,!0)),i.fire("dragmove",t,!0))},_endDragBefore:function(t){var e,i,n=Kinetic.DD,r=Kinetic.Global,a=n.node;a&&(e=a.nodeType,i=a.getLayer(),n.anim.stop(),n.isDragging&&(n.isDragging=!1,r.listenClickTap=!1,t&&(t.dragEndNode=a)),delete n.node,(i||a).draw())},_endDragAfter:function(t){t=t||{};var e=t.dragEndNode;t&&e&&e.fire("dragend",t,!0)}},Kinetic.Node.prototype.startDrag=function(){var t=Kinetic.DD,e=this.getStage(),i=this.getLayer(),n=e.getPointerPosition(),r=this.getAbsolutePosition();n&&(t.node&&t.node.stopDrag(),t.node=this,t.offset.x=n.x-r.x,t.offset.y=n.y-r.y,t.anim.setLayers(i||this.getLayers()),t.anim.start(),this._setDragPosition())},Kinetic.Node.prototype._setDragPosition=function(t){var e=Kinetic.DD;pos=this.getStage().getPointerPosition(),dbf=this.getDragBoundFunc(),newNodePos={x:pos.x-e.offset.x,y:pos.y-e.offset.y},void 0!==dbf&&(newNodePos=dbf.call(this,newNodePos,t)),this.setAbsolutePosition(newNodePos)},Kinetic.Node.prototype.stopDrag=function(){var t=Kinetic.DD,e={};t._endDragBefore(e),t._endDragAfter(e)},Kinetic.Node.prototype.setDraggable=function(t){this._setAttr("draggable",t),this._dragChange()};var t=Kinetic.Node.prototype.destroy;Kinetic.Node.prototype.destroy=function(){var e=Kinetic.DD;e.node&&e.node._id===this._id&&this.stopDrag(),t.call(this)},Kinetic.Node.prototype.isDragging=function(){var t=Kinetic.DD;return t.node&&t.node._id===this._id&&t.isDragging},Kinetic.Node.prototype._listenDrag=function(){this._dragCleanup();var t=this;this.on("mousedown.kinetic touchstart.kinetic",function(e){Kinetic.DD.node||t.startDrag(e)})},Kinetic.Node.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var t=this.getStage(),e=Kinetic.DD;t&&e.node&&e.node._id===this._id&&e.node.stopDrag()}},Kinetic.Node.prototype._dragCleanup=function(){this.off("mousedown.kinetic"),this.off("touchstart.kinetic")},Kinetic.Factory.addGetterSetter(Kinetic.Node,"dragBoundFunc"),Kinetic.Factory.addGetter(Kinetic.Node,"draggable",!1),Kinetic.Node.prototype.isDraggable=Kinetic.Node.prototype.getDraggable;var e=document.getElementsByTagName("html")[0];e.addEventListener("mouseup",Kinetic.DD._endDragBefore,!0),e.addEventListener("touchend",Kinetic.DD._endDragBefore,!0),e.addEventListener("mouseup",Kinetic.DD._endDragAfter,!1),e.addEventListener("touchend",Kinetic.DD._endDragAfter,!1)}(),function(){Kinetic.Util.addMethods(Kinetic.Container,{__init:function(t){this.children=new Kinetic.Collection,Kinetic.Node.call(this,t)},getChildren:function(){return this.children},hasChildren:function(){return this.getChildren().length>0},removeChildren:function(){for(var t,e=this.children;e.length>0;)t=e[0],t.hasChildren()&&t.removeChildren(),t.remove();return this},destroyChildren:function(){for(var t=this.children;t.length>0;)t[0].destroy();return this},add:function(t){var e=(Kinetic.Global,this.children);return this._validateAdd(t),t.index=e.length,t.parent=this,e.push(t),this._fire("add",{child:t}),this},destroy:function(){this.hasChildren()&&this.destroyChildren(),Kinetic.Node.prototype.destroy.call(this)},get:function(t){var e,i,n,r,a,o,s,c=[],l=t.replace(/ /g,"").split(","),h=l.length;for(e=0;h>e;e++)if(n=l[e],"#"===n.charAt(0))a=this._getNodeById(n.slice(1)),a&&c.push(a);else if("."===n.charAt(0))r=this._getNodesByName(n.slice(1)),c=c.concat(r);else for(o=this.getChildren(),s=o.length,i=0;s>i;i++)c=c.concat(o[i]._get(n));return Kinetic.Collection.toCollection(c)},_getNodeById:function(t){var e=Kinetic.Global,i=e.ids[t];return void 0!==i&&this.isAncestorOf(i)?i:null},_getNodesByName:function(t){var e=Kinetic.Global,i=e.names[t]||[];return this._getDescendants(i)},_get:function(t){for(var e=Kinetic.Node.prototype._get.call(this,t),i=this.getChildren(),n=i.length,r=0;n>r;r++)e=e.concat(i[r]._get(t));return e},toObject:function(){var t=Kinetic.Node.prototype.toObject.call(this);t.children=[];for(var e=this.getChildren(),i=e.length,n=0;i>n;n++){var r=e[n];t.children.push(r.toObject())}return t},_getDescendants:function(t){for(var e=[],i=t.length,n=0;i>n;n++){var r=t[n];this.isAncestorOf(r)&&e.push(r)}return e},isAncestorOf:function(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1},clone:function(t){var e=Kinetic.Node.prototype.clone.call(this,t);return this.getChildren().each(function(t){e.add(t.clone())}),e},getAllIntersections:function(){for(var t=Kinetic.Util._getXY(Array.prototype.slice.call(arguments)),e=[],i=this.get("Shape"),n=i.length,r=0;n>r;r++){var a=i[r];a.isVisible()&&a.intersects(t)&&e.push(a)}return e},_setChildrenIndices:function(){for(var t=this.children,e=t.length,i=0;e>i;i++)t[i].index=i},drawScene:function(t){var e,i,n,r=this.getLayer(),a=this.getClipWidth()&&this.getClipHeight();if(!t&&r&&(t=r.getCanvas()),this.isVisible()){for(a&&t._clip(this),e=this.children,n=e.length,i=0;n>i;i++)e[i].drawScene(t);a&&t.getContext().restore()}return this},drawHit:function(){var t,e=this.getClipWidth()&&this.getClipHeight()&&"Stage"!==this.nodeType,i=0,n=0,r=[];if(this.shouldDrawHit()){for(e&&(t=this.getLayer().hitCanvas,t._clip(this)),r=this.children,n=r.length,i=0;n>i;i++)r[i].drawHit();e&&t.getContext().restore()}return this}}),Kinetic.Util.extend(Kinetic.Container,Kinetic.Node),Kinetic.Factory.addBoxGetterSetter(Kinetic.Container,"clip")}(),function(){function t(t){t.fill()}function e(t){t.stroke()}function i(t){t.fill()}function n(t){t.stroke()}function r(){this._clearCache(a)}var a="hasShadow";Kinetic.Util.addMethods(Kinetic.Shape,{__init:function(a){this.nodeType="Shape",this._fillFunc=t,this._strokeFunc=e,this._fillFuncHit=i,this._strokeFuncHit=n;for(var o,s=Kinetic.Global.shapes;;)if(o=Kinetic.Util.getRandomColor(),o&&!(o in s))break;this.colorKey=o,s[o]=this,Kinetic.Node.call(this,a),this._setDrawFuncs(),this.on("shadowColorChange.kinetic shadowBlurChange.kinetic shadowOffsetChange.kinetic shadowOpacityChange.kinetic",r)},hasChildren:function(){return!1},getChildren:function(){return[]},getContext:function(){return this.getLayer().getContext()},getCanvas:function(){return this.getLayer().getCanvas()},hasShadow:function(){return this._getCache(a,this._hasShadow)},_hasShadow:function(){return 0!==this.getShadowOpacity()&&!!(this.getShadowColor()||this.getShadowBlur()||this.getShadowOffsetX()||this.getShadowOffsetY())},hasFill:function(){return!!(this.getFill()||this.getFillPatternImage()||this.getFillLinearGradientColorStops()||this.getFillRadialGradientColorStops())},_get:function(t){return this.className===t||this.nodeType===t?[this]:[]},intersects:function(){var t=Kinetic.Util._getXY(Array.prototype.slice.call(arguments)),e=this.getStage(),i=e.hitCanvas;i.clear(),this.drawScene(i);var n=i.context.getImageData(0|t.x,0|t.y,1,1).data;return n[3]>0},enableFill:function(){return this._setAttr("fillEnabled",!0),this},disableFill:function(){return this._setAttr("fillEnabled",!1),this},enableStroke:function(){return this._setAttr("strokeEnabled",!0),this},disableStroke:function(){return this._setAttr("strokeEnabled",!1),this},enableStrokeScale:function(){return this._setAttr("strokeScaleEnabled",!0),this},disableStrokeScale:function(){return this._setAttr("strokeScaleEnabled",!1),this},enableShadow:function(){return this._setAttr("shadowEnabled",!0),this},disableShadow:function(){return this._setAttr("shadowEnabled",!1),this},enableDashArray:function(){return this._setAttr("dashArrayEnabled",!0),this},disableDashArray:function(){return this._setAttr("dashArrayEnabled",!1),this},destroy:function(){return Kinetic.Node.prototype.destroy.call(this),delete Kinetic.Global.shapes[this.colorKey],this},drawScene:function(t){t=t||this.getLayer().getCanvas();var e=this.getDrawFunc(),i=t.getContext();return e&&this.isVisible()&&(i.save(),t._applyOpacity(this),t._applyLineJoin(this),t._applyAncestorTransforms(this),e.call(this,t),i.restore()),this},drawHit:function(){var t=this.getAttrs(),e=t.drawHitFunc||t.drawFunc,i=this.getLayer().hitCanvas,n=i.getContext();return e&&this.shouldDrawHit()&&(n.save(),i._applyLineJoin(this),i._applyAncestorTransforms(this),e.call(this,i),n.restore()),this},_setDrawFuncs:function(){!this.attrs.drawFunc&&this.drawFunc&&this.setDrawFunc(this.drawFunc),!this.attrs.drawHitFunc&&this.drawHitFunc&&this.setDrawHitFunc(this.drawHitFunc)}}),Kinetic.Util.extend(Kinetic.Shape,Kinetic.Node),Kinetic.Factory.addColorGetterSetter(Kinetic.Shape,"stroke"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineJoin"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineCap"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeWidth"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"drawFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"drawHitFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dashArray"),Kinetic.Factory.addColorGetterSetter(Kinetic.Shape,"shadowColor"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlur"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOpacity"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternImage"),Kinetic.Factory.addColorGetterSetter(Kinetic.Shape,"fill"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternX"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternY"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartRadius"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndRadius"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRepeat"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dashArrayEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPriority","color"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeScaleEnabled",!0),Kinetic.Factory.addPointGetterSetter(Kinetic.Shape,"fillPatternOffset",0),Kinetic.Factory.addPointGetterSetter(Kinetic.Shape,"fillPatternScale",1),Kinetic.Factory.addPointGetterSetter(Kinetic.Shape,"fillLinearGradientStartPoint",0),Kinetic.Factory.addPointGetterSetter(Kinetic.Shape,"fillLinearGradientEndPoint",0),Kinetic.Factory.addPointGetterSetter(Kinetic.Shape,"fillRadialGradientStartPoint",0),Kinetic.Factory.addPointGetterSetter(Kinetic.Shape,"fillRadialGradientEndPoint",0),Kinetic.Factory.addPointGetterSetter(Kinetic.Shape,"shadowOffset",0),Kinetic.Factory.addRotationGetterSetter(Kinetic.Shape,"fillPatternRotation",0)}(),function(){function t(t,e){t.content.addEventListener(e,function(i){t[C+e](i)},!1)}var e="Stage",i="string",n="px",r="mouseout",a="mouseleave",o="mouseover",s="mouseenter",c="mousemove",l="mousedown",h="mouseup",u="click",d="dblclick",f="touchstart",p="touchend",g="tap",m="dbltap",v="touchmove",y="div",x="relative",b="inline-block",w="kineticjs-content",_=" ",C="_",K="container",S="",T=[l,c,h,r,f,v,p,o],A=T.length;Kinetic.Util.addMethods(Kinetic.Stage,{___init:function(t){Kinetic.Container.call(this,t),this.nodeType=e,this._id=Kinetic.Global.idCounter++,this._buildDOM(),this._bindContentEvents(),Kinetic.Global.stages.push(this)},_validateAdd:function(t){"Layer"!==t.getType()&&Kinetic.Util.error("You may only add layers to the stage.")},setContainer:function(t){return typeof t===i&&(t=document.getElementById(t)),this._setAttr(K,t),this},draw:function(){return Kinetic.Node.prototype.draw.call(this),this},setHeight:function(t){return Kinetic.Node.prototype.setHeight.call(this,t),this._resizeDOM(),this},setWidth:function(t){return Kinetic.Node.prototype.setWidth.call(this,t),this._resizeDOM(),this},clear:function(){var t,e=this.children,i=e.length;for(t=0;i>t;t++)e[t].clear();return this},destroy:function(){var t=this.content;Kinetic.Container.prototype.destroy.call(this),t&&Kinetic.Util._isInDocument(t)&&this.getContainer().removeChild(t)},getMousePosition:function(){return this.mousePos},getTouchPosition:function(){return this.touchPos},getPointerPosition:function(){return this.getTouchPosition()||this.getMousePosition()},getStage:function(){return this},getContent:function(){return this.content},toDataURL:function(t){function e(r){var a=c[r],l=a.toDataURL(),h=new Image;h.onload=function(){s.drawImage(h,0,0),r<c.length-1?e(r+1):t.callback(o.toDataURL(i,n))},h.src=l}t=t||{};var i=t.mimeType||null,n=t.quality||null,r=t.x||0,a=t.y||0,o=new Kinetic.SceneCanvas({width:t.width||this.getWidth(),height:t.height||this.getHeight(),pixelRatio:1}),s=o.getContext(),c=this.children;(r||a)&&s.translate(-1*r,-1*a),e(0)},toImage:function(t){var e=t.callback;t.callback=function(t){Kinetic.Util._getImage(t,function(t){e(t)})},this.toDataURL(t)},getIntersection:function(){var t,e,i=Kinetic.Util._getXY(Array.prototype.slice.call(arguments)),n=this.getChildren(),r=n.length,a=r-1;for(t=a;t>=0;t--)if(e=n[t].getIntersection(i))return e;return null},_resizeDOM:function(){if(this.content){var t,e,i=this.getWidth(),r=this.getHeight(),a=this.getChildren(),o=a.length;for(this.content.style.width=i+n,this.content.style.height=r+n,this.bufferCanvas.setSize(i,r,1),this.hitCanvas.setSize(i,r),t=0;o>t;t++)e=a[t],e.getCanvas().setSize(i,r),e.hitCanvas.setSize(i,r),e.draw()}},add:function(t){return Kinetic.Container.prototype.add.call(this,t),t.canvas.setSize(this.attrs.width,this.attrs.height),t.hitCanvas.setSize(this.attrs.width,this.attrs.height),t.draw(),this.content.appendChild(t.canvas.element),this},getParent:function(){return null},getLayer:function(){return null},getLayers:function(){return this.getChildren()},_setPointerPosition:function(t){t||(t=window.event),this._setMousePosition(t),this._setTouchPosition(t)},_bindContentEvents:function(){var e;for(e=0;A>e;e++)t(this,T[e])},_mouseover:function(t){this._fire(o,t)},_mouseout:function(t){this._setPointerPosition(t);var e=Kinetic.Global,i=this.targetShape;i&&!e.isDragging()&&(i._fireAndBubble(r,t),i._fireAndBubble(a,t),this.targetShape=null),this.mousePos=void 0,this._fire(r,t)},_mousemove:function(t){this._setPointerPosition(t);var e,i=Kinetic.Global,n=Kinetic.DD,l=this.getIntersection(this.getPointerPosition());l?(e=l.shape,e&&(i.isDragging()||255!==l.pixel[3]||this.targetShape&&this.targetShape._id===e._id?e._fireAndBubble(c,t):(e._fireAndBubble(o,t,this.targetShape),e._fireAndBubble(s,t,this.targetShape),this.targetShape&&(this.targetShape._fireAndBubble(r,t,e),this.targetShape._fireAndBubble(a,t,e)),this.targetShape=e))):(this._fire(c,t),this.targetShape&&!i.isDragging()&&(this.targetShape._fireAndBubble(r,t),this.targetShape._fireAndBubble(a,t),this.targetShape=null)),n&&n._drag(t),t.preventDefault&&t.preventDefault()},_mousedown:function(t){this._setPointerPosition(t);var e=Kinetic.Global,i=this.getIntersection(this.getPointerPosition()),n=i&&i.shape?i.shape:this;e.listenClickTap=!0,this.clickStartShape=n,n._fireAndBubble(l,t),t.preventDefault&&t.preventDefault()},_mouseup:function(t){this._setPointerPosition(t);var e=Kinetic.Global,i=this.getIntersection(this.getPointerPosition()),n=i&&i.shape?i.shape:this;n._fireAndBubble(h,t),e.listenClickTap&&n._id===this.clickStartShape._id&&(n._fireAndBubble(u,t),e.inDblClickWindow?(n._fireAndBubble(d,t),e.inDblClickWindow=!1):e.inDblClickWindow=!0,setTimeout(function(){e.inDblClickWindow=!1},e.dblClickWindow)),e.listenClickTap=!1,t.preventDefault&&t.preventDefault()},_touchstart:function(t){this._setPointerPosition(t);var e=Kinetic.Global,i=this.getIntersection(this.getPointerPosition()),n=i&&i.shape?i.shape:this;e.listenClickTap=!0,this.tapStartShape=n,n._fireAndBubble(f,t),n.isListening()&&t.preventDefault&&t.preventDefault()},_touchend:function(t){this._setPointerPosition(t);var e=Kinetic.Global,i=this.getIntersection(this.getPointerPosition()),n=i&&i.shape?i.shape:this;n._fireAndBubble(p,t),e.listenClickTap&&n._id===this.tapStartShape._id&&(n._fireAndBubble(g,t),e.inDblClickWindow?(n._fireAndBubble(m,t),e.inDblClickWindow=!1):e.inDblClickWindow=!0,setTimeout(function(){e.inDblClickWindow=!1},e.dblClickWindow)),e.listenClickTap=!1,n.isListening()&&t.preventDefault&&t.preventDefault()},_touchmove:function(t){this._setPointerPosition(t);var e=Kinetic.DD,i=this.getIntersection(this.getPointerPosition()),n=i&&i.shape?i.shape:this;n._fireAndBubble(v,t),e&&e._drag(t),n.isListening()&&t.preventDefault&&t.preventDefault()},_setMousePosition:function(t){var e=t.clientX-this._getContentPosition().left,i=t.clientY-this._getContentPosition().top;this.mousePos={x:e,y:i}},_setTouchPosition:function(t){var e,i,n;void 0!==t.touches&&1===t.touches.length&&(e=t.touches[0],i=e.clientX-this._getContentPosition().left,n=e.clientY-this._getContentPosition().top,this.touchPos={x:i,y:n})},_getContentPosition:function(){var t=this.content.getBoundingClientRect();return{top:t.top,left:t.left}},_buildDOM:function(){var t=this.getContainer();t.innerHTML=S,this.content=document.createElement(y),this.content.style.position=x,this.content.style.display=b,this.content.className=w,t.appendChild(this.content),this.bufferCanvas=new Kinetic.SceneCanvas,this.hitCanvas=new Kinetic.HitCanvas,this._resizeDOM()},_onContent:function(t,e){var i,n,r=t.split(_),a=r.length;for(i=0;a>i;i++)n=r[i],this.content.addEventListener(n,e,!1)}}),Kinetic.Util.extend(Kinetic.Stage,Kinetic.Container),Kinetic.Factory.addGetter(Kinetic.Stage,"container")}(),function(){var t="#",e="beforeDraw",i="draw";Kinetic.Util.addMethods(Kinetic.Layer,{___init:function(t){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,this.hitCanvas=new Kinetic.HitCanvas,Kinetic.Container.call(this,t)},_validateAdd:function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&Kinetic.Util.error("You may only add groups and shapes to a layer.")},getIntersection:function(){var e,i,n,r=Kinetic.Util._getXY(Array.prototype.slice.call(arguments));if(this.isVisible()&&this.isListening()){if(e=this.hitCanvas.context.getImageData(0|r.x,0|r.y,1,1).data,255===e[3])return i=Kinetic.Util._rgbToHex(e[0],e[1],e[2]),n=Kinetic.Global.shapes[t+i],{shape:n,pixel:e};if(e[0]>0||e[1]>0||e[2]>0||e[3]>0)return{pixel:e}}return null},drawScene:function(t){return t=t||this.getCanvas(),this._fire(e,{node:this}),this.getClearBeforeDraw()&&t.clear(),Kinetic.Container.prototype.drawScene.call(this,t),this._fire(i,{node:this}),this},drawHit:function(){var t=this.getLayer();return t&&t.getClearBeforeDraw()&&t.getHitCanvas().clear(),Kinetic.Container.prototype.drawHit.call(this),this},getCanvas:function(){return this.canvas},getHitCanvas:function(){return this.hitCanvas},getContext:function(){return this.getCanvas().getContext()},clear:function(t){return this.getCanvas().clear(t),this},setVisible:function(t){return Kinetic.Node.prototype.setVisible.call(this,t),t?(this.getCanvas().element.style.display="block",this.hitCanvas.element.style.display="block"):(this.getCanvas().element.style.display="none",this.hitCanvas.element.style.display="none"),this},setZIndex:function(t){Kinetic.Node.prototype.setZIndex.call(this,t);var e=this.getStage();return e&&(e.content.removeChild(this.getCanvas().element),t<e.getChildren().length-1?e.content.insertBefore(this.getCanvas().element,e.getChildren()[t+1].getCanvas().element):e.content.appendChild(this.getCanvas().element)),this},moveToTop:function(){Kinetic.Node.prototype.moveToTop.call(this);var t=this.getStage();t&&(t.content.removeChild(this.getCanvas().element),t.content.appendChild(this.getCanvas().element))},moveUp:function(){if(Kinetic.Node.prototype.moveUp.call(this)){var t=this.getStage();t&&(t.content.removeChild(this.getCanvas().element),this.index<t.getChildren().length-1?t.content.insertBefore(this.getCanvas().element,t.getChildren()[this.index+1].getCanvas().element):t.content.appendChild(this.getCanvas().element))}},moveDown:function(){if(Kinetic.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.getChildren();t.content.removeChild(this.getCanvas().element),t.content.insertBefore(this.getCanvas().element,e[this.index+1].getCanvas().element)}}},moveToBottom:function(){if(Kinetic.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.getChildren();t.content.removeChild(this.getCanvas().element),t.content.insertBefore(this.getCanvas().element,e[1].getCanvas().element)}}},getLayer:function(){return this},remove:function(){var t=this.getStage(),e=this.getCanvas(),i=e.element;return Kinetic.Node.prototype.remove.call(this),t&&e&&Kinetic.Util._isInDocument(i)&&t.content.removeChild(i),this},getStage:function(){return this.parent}}),Kinetic.Util.extend(Kinetic.Layer,Kinetic.Container),Kinetic.Factory.addGetterSetter(Kinetic.Layer,"clearBeforeDraw",!0)}(),function(){Kinetic.Util.addMethods(Kinetic.Group,{___init:function(t){this.nodeType="Group",Kinetic.Container.call(this,t)},_validateAdd:function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&Kinetic.Util.error("You may only add groups and shapes to groups.")}}),Kinetic.Util.extend(Kinetic.Group,Kinetic.Container)}(),function(){Kinetic.Rect=function(t){this.___init(t)},Kinetic.Rect.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Rect"},drawFunc:function(t){var e=t.getContext(),i=this.getCornerRadius(),n=this.getWidth(),r=this.getHeight();e.beginPath(),i?(e.moveTo(i,0),e.lineTo(n-i,0),e.arc(n-i,i,i,3*Math.PI/2,0,!1),e.lineTo(n,r-i),e.arc(n-i,r-i,i,0,Math.PI/2,!1),e.lineTo(i,r),e.arc(i,r-i,i,Math.PI/2,Math.PI,!1),e.lineTo(0,i),e.arc(i,i,i,Math.PI,3*Math.PI/2,!1)):e.rect(0,0,n,r),e.closePath(),t.fillStroke(this)}},Kinetic.Util.extend(Kinetic.Rect,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Rect,"cornerRadius",0)}(),function(){var t=2*Math.PI-1e-4,e="Circle";Kinetic.Circle=function(t){this.___init(t)},Kinetic.Circle.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className=e},drawFunc:function(e){var i=e.getContext();i.beginPath(),i.arc(0,0,this.getRadius(),0,t,!1),i.closePath(),e.fillStroke(this)},getWidth:function(){return 2*this.getRadius()},getHeight:function(){return 2*this.getRadius()},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.setRadius(t/2)},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.setRadius(t/2)}},Kinetic.Util.extend(Kinetic.Circle,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Circle,"radius",0)}(),function(){var t=2*Math.PI-1e-4,e="Ellipse";Kinetic.Ellipse=function(t){this.___init(t)},Kinetic.Ellipse.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className=e},drawFunc:function(e){var i=e.getContext(),n=this.getRadius();i.beginPath(),i.save(),n.x!==n.y&&i.scale(1,n.y/n.x),i.arc(0,0,n.x,0,t,!1),i.restore(),i.closePath(),e.fillStroke(this)},getWidth:function(){return 2*this.getRadius().x},getHeight:function(){return 2*this.getRadius().y},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.setRadius({x:t/2})},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.setRadius({y:t/2})}},Kinetic.Util.extend(Kinetic.Ellipse,Kinetic.Shape),Kinetic.Factory.addPointGetterSetter(Kinetic.Ellipse,"radius",0)}(),function(){Kinetic.Wedge=function(t){this.___init(t)},Kinetic.Wedge.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Wedge"},drawFunc:function(t){var e=t.getContext();e.beginPath(),e.arc(0,0,this.getRadius(),0,this.getAngle(),this.getClockwise()),e.lineTo(0,0),e.closePath(),t.fillStroke(this)}},Kinetic.Util.extend(Kinetic.Wedge,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"radius",0),Kinetic.Factory.addRotationGetterSetter(Kinetic.Wedge,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"clockwise",!1)}(),function(){var t="Image",e="set";Kinetic.Image=function(t){this.___init(t)},Kinetic.Image.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className=t},drawFunc:function(t){var e,i,n=this.getWidth(),r=this.getHeight(),a=this,o=t.getContext(),s=this.getCropX()||0,c=this.getCropY()||0,l=this.getCropWidth(),h=this.getCropHeight();this.getFilter()&&this._applyFilter&&(this.applyFilter(),this._applyFilter=!1),i=this.filterCanvas?this.filterCanvas.getElement():this.getImage(),o.beginPath(),o.rect(0,0,n,r),o.closePath(),t.fillStroke(this),i&&(e=l&&h?[i,s,c,l,h,0,0,n,r]:[i,0,0,n,r],this.hasShadow()?t.applyShadow(this,function(){a._drawImage(o,e)}):this._drawImage(o,e))},drawHitFunc:function(t){var e=this.getWidth(),i=this.getHeight(),n=this.imageHitRegion,r=t.getContext();n?(r.drawImage(n,0,0,e,i),r.beginPath(),r.rect(0,0,e,i),r.closePath(),t.stroke(this)):(r.beginPath(),r.rect(0,0,e,i),r.closePath(),t.fillStroke(this))},applyFilter:function(){var t,e,i,n=this.getImage(),r=this.getWidth(),a=this.getHeight(),o=this.getFilter();t=this.filterCanvas?this.filterCanvas:this.filterCanvas=new Kinetic.SceneCanvas({width:r,height:a}),e=t.getContext();try{this._drawImage(e,[n,0,0,r,a]),i=e.getImageData(0,0,t.getWidth(),t.getHeight()),o.call(this,i),e.putImageData(i,0,0)}catch(s){this.clearFilter(),Kinetic.Util.warn("Unable to apply filter. "+s.message)}},clearFilter:function(){this.filterCanvas=null,this._applyFilter=!1},createImageHitRegion:function(t){var e,i,n,r,a,o=this,s=this.getWidth(),c=this.getHeight(),l=new Kinetic.Canvas({width:s,height:c}),h=l.getContext(),u=this.getImage();h.drawImage(u,0,0);try{for(e=h.getImageData(0,0,s,c),i=e.data,n=Kinetic.Util._hexToRgb(this.colorKey),r=0,a=i.length;a>r;r+=4)i[r+3]>0&&(i[r]=n.r,i[r+1]=n.g,i[r+2]=n.b);Kinetic.Util._getImage(e,function(e){o.imageHitRegion=e,t&&t()})}catch(d){Kinetic.Util.warn("Unable to create image hit region. "+d.message)}},clearImageHitRegion:function(){delete this.imageHitRegion},getWidth:function(){var t=this.getImage();return this.attrs.width||(t?t.width:0)},getHeight:function(){var t=this.getImage();return this.attrs.height||(t?t.height:0)},_drawImage:function(t,e){5===e.length?t.drawImage(e[0],e[1],e[2],e[3],e[4]):9===e.length&&t.drawImage(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}},Kinetic.Util.extend(Kinetic.Image,Kinetic.Shape),Kinetic.Factory.addFilterGetterSetter=function(t,e,i){this.addGetter(t,e,i),this.addFilterSetter(t,e)},Kinetic.Factory.addFilterSetter=function(t,i){var n=e+Kinetic.Util._capitalize(i);t.prototype[n]=function(t){this._setAttr(i,t),this._applyFilter=!0}},Kinetic.Factory.addGetterSetter(Kinetic.Image,"image"),Kinetic.Factory.addBoxGetterSetter(Kinetic.Image,"crop"),Kinetic.Factory.addFilterGetterSetter(Kinetic.Image,"filter")}(),function(){Kinetic.Polygon=function(t){this.___init(t)},Kinetic.Polygon.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Polygon"},drawFunc:function(t){var e=t.getContext(),i=this.getPoints(),n=i.length;e.beginPath(),e.moveTo(i[0].x,i[0].y);for(var r=1;n>r;r++)e.lineTo(i[r].x,i[r].y);e.closePath(),t.fillStroke(this)}},Kinetic.Util.extend(Kinetic.Polygon,Kinetic.Shape),Kinetic.Factory.addPointsGetterSetter(Kinetic.Polygon,"points")}(),function(){function t(t){t.fillText(this.partialText,0,0)}function e(t){t.strokeText(this.partialText,0,0)}var i="auto",n="Calibri",r="canvas",a="center",o="Change.kinetic",s="2d",c="-",l="",h="left",u="text",d="Text",f="middle",p="normal",g="px ",m=" ",v="right",y="word",x="char",b="none",w=["fontFamily","fontSize","fontStyle","padding","align","lineHeight","text","width","height","wrap"],_=w.length,C=document.createElement(r).getContext(s);Kinetic.Text=function(t){this.___init(t)},Kinetic.Text.prototype={___init:function(n){var r=this;void 0===n.width&&(n.width=i),void 0===n.height&&(n.height=i),Kinetic.Shape.call(this,n),this._fillFunc=t,this._strokeFunc=e,this.className=d;for(var a=0;_>a;a++)this.on(w[a]+o,r._setTextData);this._setTextData()},drawFunc:function(t){var e=t.getContext(),i=this.getPadding(),n=(this.getFontStyle(),this.getFontSize(),this.getFontFamily(),this.getTextHeight()),r=this.getLineHeight()*n,o=this.textArr,s=o.length,c=this.getWidth();e.font=this._getContextFont(),e.textBaseline=f,e.textAlign=h,e.save(),e.translate(i,0),e.translate(0,i+n/2);for(var l=0;s>l;l++){var u=o[l],d=u.text,p=u.width;e.save(),this.getAlign()===v?e.translate(c-p-2*i,0):this.getAlign()===a&&e.translate((c-p-2*i)/2,0),this.partialText=d,t.fillStroke(this),e.restore(),e.translate(0,r)}e.restore()},drawHitFunc:function(t){var e=t.getContext(),i=this.getWidth(),n=this.getHeight();e.beginPath(),e.rect(0,0,i,n),e.closePath(),t.fillStroke(this)},setText:function(t){var e=Kinetic.Util._isString(t)?t:t.toString();this._setAttr(u,e)},getWidth:function(){return this.attrs.width===i?this.getTextWidth()+2*this.getPadding():this.attrs.width},getHeight:function(){return this.attrs.height===i?this.getTextHeight()*this.textArr.length*this.getLineHeight()+2*this.getPadding():this.attrs.height
},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},_getTextSize:function(t){var e,i=C,n=this.getFontSize();return i.save(),i.font=this._getContextFont(),e=i.measureText(t),i.restore(),{width:e.width,height:parseInt(n,10)}},_getContextFont:function(){return this.getFontStyle()+m+this.getFontSize()+g+this.getFontFamily()},_addTextLine:function(t,e){return this.textArr.push({text:t,width:e})},_getTextWidth:function(t){return C.measureText(t).width},_setTextData:function(){var t=this.getText().split("\n"),e=+this.getFontSize(),n=0,r=this.getLineHeight()*e,a=this.attrs.width,o=this.attrs.height,s=a!==i,l=o!==i,h=this.getPadding(),u=a-2*h,d=o-2*h,f=0,p=this.getWrap(),v=p!==b,y=p!==x&&v;this.textArr=[],C.save(),C.font=this.getFontStyle()+m+e+g+this.getFontFamily();for(var w=0,_=t.length;_>w;++w){var K=t[w],S=this._getTextWidth(K);if(s&&S>u)for(;K.length>0;){for(var T=0,A=K.length,k="",F=0;A>T;){var P=T+A>>>1,L=K.slice(0,P+1),N=this._getTextWidth(L);u>=N?(T=P+1,k=L,F=N):A=P}if(!k)break;if(y){var D=Math.max(k.lastIndexOf(m),k.lastIndexOf(c))+1;D>0&&(T=D,k=k.slice(0,T),F=this._getTextWidth(k))}if(this._addTextLine(k,F),f+=r,!v||l&&f+r>d)break;if(K=K.slice(T),K.length>0&&(S=this._getTextWidth(K),u>=S)){this._addTextLine(K,S),f+=r;break}}else this._addTextLine(K,S),f+=r,n=Math.max(n,S);if(l&&f+r>d)break}C.restore(),this.textHeight=e,this.textWidth=n}},Kinetic.Util.extend(Kinetic.Text,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontFamily",n),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontStyle",p),Kinetic.Factory.addGetterSetter(Kinetic.Text,"padding",0),Kinetic.Factory.addGetterSetter(Kinetic.Text,"align",h),Kinetic.Factory.addGetterSetter(Kinetic.Text,"lineHeight",1),Kinetic.Factory.addGetterSetter(Kinetic.Text,"wrap",y),Kinetic.Factory.addGetter(Kinetic.Text,u,l),Kinetic.Factory.addSetter(Kinetic.Text,"width"),Kinetic.Factory.addSetter(Kinetic.Text,"height")}(),function(){Kinetic.Line=function(t){this.___init(t)},Kinetic.Line.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Line"},drawFunc:function(t){var e,i,n=this.getPoints(),r=n.length,a=t.getContext();for(a.beginPath(),a.moveTo(n[0].x,n[0].y),e=1;r>e;e++)i=n[e],a.lineTo(i.x,i.y);t.stroke(this)}},Kinetic.Util.extend(Kinetic.Line,Kinetic.Shape),Kinetic.Factory.addPointsGetterSetter(Kinetic.Line,"points")}(),function(){Kinetic.Spline=function(t){this.___init(t)},Kinetic.Spline.prototype={___init:function(t){var e=this;Kinetic.Shape.call(this,t),this.className="Spline",this.on("pointsChange.kinetic tensionChange.kinetic",function(){e._setAllPoints()}),this._setAllPoints()},drawFunc:function(t){var e,i,n,r,a=this.getPoints(),o=a.length,s=t.getContext(),c=this.getTension();if(s.beginPath(),s.moveTo(a[0].x,a[0].y),0!==c&&o>2){for(e=this.allPoints,i=e.length,n=2,s.quadraticCurveTo(e[0].x,e[0].y,e[1].x,e[1].y);i-1>n;)s.bezierCurveTo(e[n].x,e[n++].y,e[n].x,e[n++].y,e[n].x,e[n++].y);s.quadraticCurveTo(e[i-1].x,e[i-1].y,a[o-1].x,a[o-1].y)}else for(n=1;o>n;n++)r=a[n],s.lineTo(r.x,r.y);t.stroke(this)},_setAllPoints:function(){this.allPoints=Kinetic.Util._expandPoints(this.getPoints(),this.getTension())}},Kinetic.Util.extend(Kinetic.Spline,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Spline,"tension",1),Kinetic.Factory.addPointsGetterSetter(Kinetic.Spline,"points")}(),function(){Kinetic.Blob=function(t){this.___init(t)},Kinetic.Blob.prototype={___init:function(t){var e=this;Kinetic.Shape.call(this,t),this.className="Blob",this.on("pointsChange.kinetic tensionChange.kinetic",function(){e._setAllPoints()}),this._setAllPoints()},drawFunc:function(t){var e,i,n,r,a=this.getPoints(),o=a.length,s=t.getContext(),c=this.getTension();if(s.beginPath(),s.moveTo(a[0].x,a[0].y),0!==c&&o>2)for(e=this.allPoints,i=e.length,n=0;i-1>n;)s.bezierCurveTo(e[n].x,e[n++].y,e[n].x,e[n++].y,e[n].x,e[n++].y);else for(n=1;o>n;n++)r=a[n],s.lineTo(r.x,r.y);s.closePath(),t.fillStroke(this)},_setAllPoints:function(){var t=this.getPoints(),e=t.length,i=this.getTension(),n=Kinetic.Util,r=n._getControlPoints(t[e-1],t[0],t[1],i),a=n._getControlPoints(t[e-2],t[e-1],t[0],i);this.allPoints=Kinetic.Util._expandPoints(this.getPoints(),this.getTension()),this.allPoints.unshift(r[1]),this.allPoints.push(a[0]),this.allPoints.push(t[e-1]),this.allPoints.push(a[1]),this.allPoints.push(r[0]),this.allPoints.push(t[0])}},Kinetic.Util.extend(Kinetic.Blob,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Blob,"tension",1),Kinetic.Factory.addPointsGetterSetter(Kinetic.Blob,"points")}(),function(){Kinetic.Sprite=function(t){this.___init(t)},Kinetic.Sprite.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Sprite",this.anim=new Kinetic.Animation;var e=this;this.on("animationChange.kinetic",function(){e.setIndex(0)})},drawFunc:function(t){var e=this.getAnimation(),i=this.getIndex(),n=this.getAnimations()[e][i],r=t.getContext(),a=this.getImage();a&&r.drawImage(a,n.x,n.y,n.width,n.height,0,0,n.width,n.height)},drawHitFunc:function(t){var e=this.getAnimation(),i=this.getIndex(),n=this.getAnimations()[e][i],r=t.getContext();r.beginPath(),r.rect(0,0,n.width,n.height),r.closePath(),t.fill(this)},start:function(){var t=this,e=this.getLayer();this.anim.setLayers(e),this.interval=setInterval(function(){var e=t.getIndex();t._updateIndex(),t.afterFrameFunc&&e===t.afterFrameIndex&&(t.afterFrameFunc(),delete t.afterFrameFunc,delete t.afterFrameIndex)},1e3/this.getFrameRate()),this.anim.start()},stop:function(){this.anim.stop(),clearInterval(this.interval)},afterFrame:function(t,e){this.afterFrameIndex=t,this.afterFrameFunc=e},_updateIndex:function(){var t=this.getIndex(),e=this.getAnimation(),i=this.getAnimations(),n=i[e],r=n.length;r-1>t?this.setIndex(t+1):this.setIndex(0)}},Kinetic.Util.extend(Kinetic.Sprite,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animation"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animations"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"image"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"index",0),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameRate",17)}(),function(){Kinetic.Path=function(t){this.___init(t)},Kinetic.Path.prototype={___init:function(t){this.dataArray=[];var e=this;Kinetic.Shape.call(this,t),this.className="Path",this.dataArray=Kinetic.Path.parsePathData(this.getData()),this.on("dataChange.kinetic",function(){e.dataArray=Kinetic.Path.parsePathData(this.getData())})},drawFunc:function(t){var e=this.dataArray,i=t.getContext();i.beginPath();for(var n=0;n<e.length;n++){var r=e[n].command,a=e[n].points;switch(r){case"L":i.lineTo(a[0],a[1]);break;case"M":i.moveTo(a[0],a[1]);break;case"C":i.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);break;case"Q":i.quadraticCurveTo(a[0],a[1],a[2],a[3]);break;case"A":var o=a[0],s=a[1],c=a[2],l=a[3],h=a[4],u=a[5],d=a[6],f=a[7],p=c>l?c:l,g=c>l?1:c/l,m=c>l?l/c:1;i.translate(o,s),i.rotate(d),i.scale(g,m),i.arc(0,0,p,h,h+u,1-f),i.scale(1/g,1/m),i.rotate(-d),i.translate(-o,-s);break;case"z":i.closePath()}}t.fillStroke(this)}},Kinetic.Util.extend(Kinetic.Path,Kinetic.Shape),Kinetic.Path.getLineLength=function(t,e,i,n){return Math.sqrt((i-t)*(i-t)+(n-e)*(n-e))},Kinetic.Path.getPointOnLine=function(t,e,i,n,r,a,o){void 0===a&&(a=e),void 0===o&&(o=i);var s=(r-i)/(n-e+1e-8),c=Math.sqrt(t*t/(1+s*s));e>n&&(c*=-1);var l,h=s*c;if((o-i)/(a-e+1e-8)===s)l={x:a+c,y:o+h};else{var u,d,f=this.getLineLength(e,i,n,r);if(1e-8>f)return void 0;var p=(a-e)*(n-e)+(o-i)*(r-i);p/=f*f,u=e+p*(n-e),d=i+p*(r-i);var g=this.getLineLength(a,o,u,d),m=Math.sqrt(t*t-g*g);c=Math.sqrt(m*m/(1+s*s)),e>n&&(c*=-1),h=s*c,l={x:u+c,y:d+h}}return l},Kinetic.Path.getPointOnCubicBezier=function(t,e,i,n,r,a,o,s,c){function l(t){return t*t*t}function h(t){return 3*t*t*(1-t)}function u(t){return 3*t*(1-t)*(1-t)}function d(t){return(1-t)*(1-t)*(1-t)}var f=s*l(t)+a*h(t)+n*u(t)+e*d(t),p=c*l(t)+o*h(t)+r*u(t)+i*d(t);return{x:f,y:p}},Kinetic.Path.getPointOnQuadraticBezier=function(t,e,i,n,r,a,o){function s(t){return t*t}function c(t){return 2*t*(1-t)}function l(t){return(1-t)*(1-t)}var h=a*s(t)+n*c(t)+e*l(t),u=o*s(t)+r*c(t)+i*l(t);return{x:h,y:u}},Kinetic.Path.getPointOnEllipticalArc=function(t,e,i,n,r,a){var o=Math.cos(a),s=Math.sin(a),c={x:i*Math.cos(r),y:n*Math.sin(r)};return{x:t+(c.x*o-c.y*s),y:e+(c.x*s+c.y*o)}},Kinetic.Path.parsePathData=function(t){if(!t)return[];var e=t,i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var n=0;n<i.length;n++)e=e.replace(new RegExp(i[n],"g"),"|"+i[n]);var r=e.split("|"),a=[],o=0,s=0;for(n=1;n<r.length;n++){var c=r[n],l=c.charAt(0);c=c.slice(1),c=c.replace(new RegExp(",-","g"),"-"),c=c.replace(new RegExp("-","g"),",-"),c=c.replace(new RegExp("e,-","g"),"e-");var h=c.split(",");h.length>0&&""===h[0]&&h.shift();for(var u=0;u<h.length;u++)h[u]=parseFloat(h[u]);for(;h.length>0&&!isNaN(h[0]);){var d,f,p,g,m,v,y,x,b,w,_=null,C=[],K=o,S=s;switch(l){case"l":o+=h.shift(),s+=h.shift(),_="L",C.push(o,s);break;case"L":o=h.shift(),s=h.shift(),C.push(o,s);break;case"m":o+=h.shift(),s+=h.shift(),_="M",C.push(o,s),l="l";break;case"M":o=h.shift(),s=h.shift(),_="M",C.push(o,s),l="L";break;case"h":o+=h.shift(),_="L",C.push(o,s);break;case"H":o=h.shift(),_="L",C.push(o,s);break;case"v":s+=h.shift(),_="L",C.push(o,s);break;case"V":s=h.shift(),_="L",C.push(o,s);break;case"C":C.push(h.shift(),h.shift(),h.shift(),h.shift()),o=h.shift(),s=h.shift(),C.push(o,s);break;case"c":C.push(o+h.shift(),s+h.shift(),o+h.shift(),s+h.shift()),o+=h.shift(),s+=h.shift(),_="C",C.push(o,s);break;case"S":f=o,p=s,d=a[a.length-1],"C"===d.command&&(f=o+(o-d.points[2]),p=s+(s-d.points[3])),C.push(f,p,h.shift(),h.shift()),o=h.shift(),s=h.shift(),_="C",C.push(o,s);break;case"s":f=o,p=s,d=a[a.length-1],"C"===d.command&&(f=o+(o-d.points[2]),p=s+(s-d.points[3])),C.push(f,p,o+h.shift(),s+h.shift()),o+=h.shift(),s+=h.shift(),_="C",C.push(o,s);break;case"Q":C.push(h.shift(),h.shift()),o=h.shift(),s=h.shift(),C.push(o,s);break;case"q":C.push(o+h.shift(),s+h.shift()),o+=h.shift(),s+=h.shift(),_="Q",C.push(o,s);break;case"T":f=o,p=s,d=a[a.length-1],"Q"===d.command&&(f=o+(o-d.points[0]),p=s+(s-d.points[1])),o=h.shift(),s=h.shift(),_="Q",C.push(f,p,o,s);break;case"t":f=o,p=s,d=a[a.length-1],"Q"===d.command&&(f=o+(o-d.points[0]),p=s+(s-d.points[1])),o+=h.shift(),s+=h.shift(),_="Q",C.push(f,p,o,s);break;case"A":g=h.shift(),m=h.shift(),v=h.shift(),y=h.shift(),x=h.shift(),b=o,w=s,o=h.shift(),s=h.shift(),_="A",C=this.convertEndpointToCenterParameterization(b,w,o,s,y,x,g,m,v);break;case"a":g=h.shift(),m=h.shift(),v=h.shift(),y=h.shift(),x=h.shift(),b=o,w=s,o+=h.shift(),s+=h.shift(),_="A",C=this.convertEndpointToCenterParameterization(b,w,o,s,y,x,g,m,v)}a.push({command:_||l,points:C,start:{x:K,y:S},pathLength:this.calcLength(K,S,_||l,C)})}("z"===l||"Z"===l)&&a.push({command:"z",points:[],start:void 0,pathLength:0})}return a},Kinetic.Path.calcLength=function(e,i,n,r){var a,o,s,c=Kinetic.Path;switch(n){case"L":return c.getLineLength(e,i,r[0],r[1]);case"C":for(a=0,o=c.getPointOnCubicBezier(0,e,i,r[0],r[1],r[2],r[3],r[4],r[5]),t=.01;1>=t;t+=.01)s=c.getPointOnCubicBezier(t,e,i,r[0],r[1],r[2],r[3],r[4],r[5]),a+=c.getLineLength(o.x,o.y,s.x,s.y),o=s;return a;case"Q":for(a=0,o=c.getPointOnQuadraticBezier(0,e,i,r[0],r[1],r[2],r[3]),t=.01;1>=t;t+=.01)s=c.getPointOnQuadraticBezier(t,e,i,r[0],r[1],r[2],r[3]),a+=c.getLineLength(o.x,o.y,s.x,s.y),o=s;return a;case"A":a=0;var l=r[4],h=r[5],u=r[4]+h,d=Math.PI/180;if(Math.abs(l-u)<d&&(d=Math.abs(l-u)),o=c.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],l,0),0>h)for(t=l-d;t>u;t-=d)s=c.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],t,0),a+=c.getLineLength(o.x,o.y,s.x,s.y),o=s;else for(t=l+d;u>t;t+=d)s=c.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],t,0),a+=c.getLineLength(o.x,o.y,s.x,s.y),o=s;return s=c.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],u,0),a+=c.getLineLength(o.x,o.y,s.x,s.y)}return 0},Kinetic.Path.convertEndpointToCenterParameterization=function(t,e,i,n,r,a,o,s,c){var l=c*(Math.PI/180),h=Math.cos(l)*(t-i)/2+Math.sin(l)*(e-n)/2,u=-1*Math.sin(l)*(t-i)/2+Math.cos(l)*(e-n)/2,d=h*h/(o*o)+u*u/(s*s);d>1&&(o*=Math.sqrt(d),s*=Math.sqrt(d));var f=Math.sqrt((o*o*s*s-o*o*u*u-s*s*h*h)/(o*o*u*u+s*s*h*h));r==a&&(f*=-1),isNaN(f)&&(f=0);var p=f*o*u/s,g=f*-s*h/o,m=(t+i)/2+Math.cos(l)*p-Math.sin(l)*g,v=(e+n)/2+Math.sin(l)*p+Math.cos(l)*g,y=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},x=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(y(t)*y(e))},b=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(x(t,e))},w=b([1,0],[(h-p)/o,(u-g)/s]),_=[(h-p)/o,(u-g)/s],C=[(-1*h-p)/o,(-1*u-g)/s],K=b(_,C);return x(_,C)<=-1&&(K=Math.PI),x(_,C)>=1&&(K=0),0===a&&K>0&&(K-=2*Math.PI),1==a&&0>K&&(K+=2*Math.PI),[m,v,o,s,w,K,l,a]},Kinetic.Factory.addGetterSetter(Kinetic.Path,"data")}(),function(){function t(t){t.fillText(this.partialText,0,0)}function e(t){t.strokeText(this.partialText,0,0)}var i="",n="Calibri",r="normal";Kinetic.TextPath=function(t){this.___init(t)},Kinetic.TextPath.prototype={___init:function(i){var n=this;this.dummyCanvas=document.createElement("canvas"),this.dataArray=[],Kinetic.Shape.call(this,i),this._fillFunc=t,this._strokeFunc=e,this.className="TextPath",this.dataArray=Kinetic.Path.parsePathData(this.attrs.data),this.on("dataChange.kinetic",function(){n.dataArray=Kinetic.Path.parsePathData(this.attrs.data)}),this.on("textChange.kinetic textStroke.kinetic textStrokeWidth.kinetic",n._setTextData),n._setTextData()},drawFunc:function(t){var e=(this.charArr,t.getContext());e.font=this._getContextFont(),e.textBaseline="middle",e.textAlign="left",e.save();for(var i=this.glyphInfo,n=0;n<i.length;n++){e.save();var r=i[n].p0;i[n].p1,parseFloat(this.attrs.fontSize),e.translate(r.x,r.y),e.rotate(i[n].rotation),this.partialText=i[n].text,t.fillStroke(this),e.restore()}e.restore()},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},setText:function(t){Kinetic.Text.prototype.setText.call(this,t)},_getTextSize:function(t){var e=this.dummyCanvas,i=e.getContext("2d");i.save(),i.font=this._getContextFont();var n=i.measureText(t);return i.restore(),{width:n.width,height:parseInt(this.attrs.fontSize,10)}},_setTextData:function(){var t=this,e=this._getTextSize(this.attrs.text);this.textWidth=e.width,this.textHeight=e.height,this.glyphInfo=[];for(var i,n,r,a=this.attrs.text.split(""),o=-1,s=0,c=function(){s=0;for(var e=t.dataArray,n=o+1;n<e.length;n++){if(e[n].pathLength>0)return o=n,e[n];"M"==e[n].command&&(i={x:e[n].points[0],y:e[n].points[1]})}return{}},l=function(e){var a=t._getTextSize(e).width,o=0,l=0;for(n=void 0;Math.abs(a-o)/a>.01&&25>l;){l++;for(var h=o;void 0===r;)r=c(),r&&h+r.pathLength<a&&(h+=r.pathLength,r=void 0);if(r==={}||void 0===i)return void 0;var u=!1;switch(r.command){case"L":Kinetic.Path.getLineLength(i.x,i.y,r.points[0],r.points[1])>a?n=Kinetic.Path.getPointOnLine(a,i.x,i.y,r.points[0],r.points[1],i.x,i.y):r=void 0;break;case"A":var d=r.points[4],f=r.points[5],p=r.points[4]+f;0===s?s=d+1e-8:a>o?s+=Math.PI/180*f/Math.abs(f):s-=Math.PI/360*f/Math.abs(f),Math.abs(s)>Math.abs(p)&&(s=p,u=!0),n=Kinetic.Path.getPointOnEllipticalArc(r.points[0],r.points[1],r.points[2],r.points[3],s,r.points[6]);break;case"C":0===s?s=a>r.pathLength?1e-8:a/r.pathLength:a>o?s+=(a-o)/r.pathLength:s-=(o-a)/r.pathLength,s>1&&(s=1,u=!0),n=Kinetic.Path.getPointOnCubicBezier(s,r.start.x,r.start.y,r.points[0],r.points[1],r.points[2],r.points[3],r.points[4],r.points[5]);break;case"Q":0===s?s=a/r.pathLength:a>o?s+=(a-o)/r.pathLength:s-=(o-a)/r.pathLength,s>1&&(s=1,u=!0),n=Kinetic.Path.getPointOnQuadraticBezier(s,r.start.x,r.start.y,r.points[0],r.points[1],r.points[2],r.points[3])}void 0!==n&&(o=Kinetic.Path.getLineLength(i.x,i.y,n.x,n.y)),u&&(u=!1,r=void 0)}},h=0;h<a.length&&(l(a[h]),void 0!==i&&void 0!==n);h++){var u=Kinetic.Path.getLineLength(i.x,i.y,n.x,n.y),d=0,f=Kinetic.Path.getPointOnLine(d+u/2,i.x,i.y,n.x,n.y),p=Math.atan2(n.y-i.y,n.x-i.x);this.glyphInfo.push({transposeX:f.x,transposeY:f.y,text:a[h],rotation:p,p0:i,p1:n}),i=n}}},Kinetic.TextPath.prototype._getContextFont=Kinetic.Text.prototype._getContextFont,Kinetic.Util.extend(Kinetic.TextPath,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontFamily",n),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontStyle",r),Kinetic.Factory.addGetter(Kinetic.TextPath,"text",i)}(),function(){Kinetic.RegularPolygon=function(t){this.___init(t)},Kinetic.RegularPolygon.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="RegularPolygon"},drawFunc:function(t){var e,i,n,r=t.getContext(),a=this.attrs.sides,o=this.attrs.radius;for(r.beginPath(),r.moveTo(0,0-o),e=1;a>e;e++)i=o*Math.sin(2*e*Math.PI/a),n=-1*o*Math.cos(2*e*Math.PI/a),r.lineTo(i,n);r.closePath(),t.fillStroke(this)}},Kinetic.Util.extend(Kinetic.RegularPolygon,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"sides",0)}(),function(){Kinetic.Star=function(t){this.___init(t)},Kinetic.Star.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Star"},drawFunc:function(t){var e=t.getContext(),i=this.attrs.innerRadius,n=this.attrs.outerRadius,r=this.attrs.numPoints;e.beginPath(),e.moveTo(0,0-this.attrs.outerRadius);for(var a=1;2*r>a;a++){var o=0===a%2?n:i,s=o*Math.sin(a*Math.PI/r),c=-1*o*Math.cos(a*Math.PI/r);e.lineTo(s,c)}e.closePath(),t.fillStroke(this)}},Kinetic.Util.extend(Kinetic.Star,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Star,"numPoints",0),Kinetic.Factory.addGetterSetter(Kinetic.Star,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Star,"outerRadius",0)}(),function(){var t=["fontFamily","fontSize","fontStyle","padding","lineHeight","text"],e="Change.kinetic",i="none",n="up",r="right",a="down",o="left",s="Label",c=t.length;Kinetic.Label=function(t){this.____init(t)},Kinetic.Label.prototype={____init:function(t){var e=this;this.className=s,Kinetic.Group.call(this,t),this.on("add.kinetic",function(t){e._addListeners(t.child),e._sync()})},getText:function(){return this.get("Text")[0]},getTag:function(){return this.get("Tag")[0]},_addListeners:function(i){var n,r=this,a=function(){r._sync()};for(n=0;c>n;n++)i.on(t[n]+e,a)},getWidth:function(){return this.getText().getWidth()},getHeight:function(){return this.getText().getHeight()},_sync:function(){var t,e,i,s,c,l,h=this.getText(),u=this.getTag();if(h&&u){switch(t=h.getWidth(),e=h.getHeight(),i=u.getPointerDirection(),s=u.getPointerWidth(),pointerHeight=u.getPointerHeight(),c=0,l=0,i){case n:c=t/2,l=-1*pointerHeight;break;case r:c=t+s,l=e/2;break;case a:c=t/2,l=e+pointerHeight;break;case o:c=-1*s,l=e/2}u.setAttrs({x:-1*c,y:-1*l,width:t,height:e}),h.setAttrs({x:-1*c,y:-1*l})}}},Kinetic.Util.extend(Kinetic.Label,Kinetic.Group),Kinetic.Tag=function(t){this.___init(t)},Kinetic.Tag.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Tag"},drawFunc:function(t){var e=t.getContext(),i=this.getWidth(),s=this.getHeight(),c=this.getPointerDirection(),l=this.getPointerWidth(),h=this.getPointerHeight();this.getCornerRadius(),e.beginPath(),e.moveTo(0,0),c===n&&(e.lineTo((i-l)/2,0),e.lineTo(i/2,-1*h),e.lineTo((i+l)/2,0)),e.lineTo(i,0),c===r&&(e.lineTo(i,(s-h)/2),e.lineTo(i+l,s/2),e.lineTo(i,(s+h)/2)),e.lineTo(i,s),c===a&&(e.lineTo((i+l)/2,s),e.lineTo(i/2,s+h),e.lineTo((i-l)/2,s)),e.lineTo(0,s),c===o&&(e.lineTo(0,(s+h)/2),e.lineTo(-1*l,s/2),e.lineTo(0,(s-h)/2)),e.closePath(),t.fillStroke(this)}},Kinetic.Util.extend(Kinetic.Tag,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerDirection",i),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerHeight",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"cornerRadius",0)}(),function(){Kinetic.Filters.Grayscale=function(t){for(var e=t.data,i=0;i<e.length;i+=4){var n=.34*e[i]+.5*e[i+1]+.16*e[i+2];e[i]=n,e[i+1]=n,e[i+2]=n}}}(),function(){Kinetic.Filters.Brighten=function(t){for(var e=this.getFilterBrightness(),i=t.data,n=0;n<i.length;n+=4)i[n]+=e,i[n+1]+=e,i[n+2]+=e},Kinetic.Factory.addFilterGetterSetter(Kinetic.Image,"filterBrightness",0)}(),function(){Kinetic.Filters.Invert=function(t){for(var e=t.data,i=0;i<e.length;i+=4)e[i]=255-e[i],e[i+1]=255-e[i+1],e[i+2]=255-e[i+2]}}(),function(){function t(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function e(e,r){var a,o,s,c,l,h,u,d,f,p,g,m,v,y,x,b,w,_,C,K,S,T,A,k,F=e.data,P=e.width,L=e.height,N=r+r+1,D=P-1,E=L-1,M=r+1,R=M*(M+1)/2,H=new t,I=null,G=H,O=null,B=null,j=i[r],W=n[r];for(s=1;N>s;s++)G=G.next=new t,s==M&&(I=G);for(G.next=H,u=h=0,o=0;L>o;o++){for(b=w=_=C=d=f=p=g=0,m=M*(K=F[h]),v=M*(S=F[h+1]),y=M*(T=F[h+2]),x=M*(A=F[h+3]),d+=R*K,f+=R*S,p+=R*T,g+=R*A,G=H,s=0;M>s;s++)G.r=K,G.g=S,G.b=T,G.a=A,G=G.next;for(s=1;M>s;s++)c=h+((s>D?D:s)<<2),d+=(G.r=K=F[c])*(k=M-s),f+=(G.g=S=F[c+1])*k,p+=(G.b=T=F[c+2])*k,g+=(G.a=A=F[c+3])*k,b+=K,w+=S,_+=T,C+=A,G=G.next;for(O=H,B=I,a=0;P>a;a++)F[h+3]=A=g*j>>W,0!==A?(A=255/A,F[h]=(d*j>>W)*A,F[h+1]=(f*j>>W)*A,F[h+2]=(p*j>>W)*A):F[h]=F[h+1]=F[h+2]=0,d-=m,f-=v,p-=y,g-=x,m-=O.r,v-=O.g,y-=O.b,x-=O.a,c=u+((c=a+r+1)<D?c:D)<<2,b+=O.r=F[c],w+=O.g=F[c+1],_+=O.b=F[c+2],C+=O.a=F[c+3],d+=b,f+=w,p+=_,g+=C,O=O.next,m+=K=B.r,v+=S=B.g,y+=T=B.b,x+=A=B.a,b-=K,w-=S,_-=T,C-=A,B=B.next,h+=4;u+=P}for(a=0;P>a;a++){for(w=_=C=b=f=p=g=d=0,h=a<<2,m=M*(K=F[h]),v=M*(S=F[h+1]),y=M*(T=F[h+2]),x=M*(A=F[h+3]),d+=R*K,f+=R*S,p+=R*T,g+=R*A,G=H,s=0;M>s;s++)G.r=K,G.g=S,G.b=T,G.a=A,G=G.next;for(l=P,s=1;r>=s;s++)h=l+a<<2,d+=(G.r=K=F[h])*(k=M-s),f+=(G.g=S=F[h+1])*k,p+=(G.b=T=F[h+2])*k,g+=(G.a=A=F[h+3])*k,b+=K,w+=S,_+=T,C+=A,G=G.next,E>s&&(l+=P);for(h=a,O=H,B=I,o=0;L>o;o++)c=h<<2,F[c+3]=A=g*j>>W,A>0?(A=255/A,F[c]=(d*j>>W)*A,F[c+1]=(f*j>>W)*A,F[c+2]=(p*j>>W)*A):F[c]=F[c+1]=F[c+2]=0,d-=m,f-=v,p-=y,g-=x,m-=O.r,v-=O.g,y-=O.b,x-=O.a,c=a+((c=o+M)<E?c:E)*P<<2,d+=b+=O.r=F[c],f+=w+=O.g=F[c+1],p+=_+=O.b=F[c+2],g+=C+=O.a=F[c+3],O=O.next,m+=K=B.r,v+=S=B.g,y+=T=B.b,x+=A=B.a,b-=K,w-=S,_-=T,C-=A,B=B.next,h+=P}}var i=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],n=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];Kinetic.Filters.Blur=function(t){var i=0|this.getFilterRadius();i>0&&e(t,i)},Kinetic.Factory.addFilterGetterSetter(Kinetic.Image,"filterRadius",0)}(),function(){function t(t,e,i){var n=4*(i*t.width+e),r=[];return r.push(t.data[n++],t.data[n++],t.data[n++],t.data[n++]),r}function e(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function i(t){for(var e=[0,0,0],i=0;i<t.length;i++)e[0]+=t[i][0],e[1]+=t[i][1],e[2]+=t[i][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function n(n,r){var a=t(n,0,0),o=t(n,n.width-1,0),s=t(n,0,n.height-1),c=t(n,n.width-1,n.height-1),l=r||10;if(e(a,o)<l&&e(o,c)<l&&e(c,s)<l&&e(s,a)<l){for(var h=i([o,a,c,s]),u=[],d=0;d<n.width*n.height;d++){var f=e(h,[n.data[4*d],n.data[4*d+1],n.data[4*d+2]]);u[d]=l>f?0:255}return u}}function r(t,e){for(var i=0;i<t.width*t.height;i++)t.data[4*i+3]=e[i]}function a(t,e,i){for(var n=[1,1,1,1,0,1,1,1,1],r=Math.round(Math.sqrt(n.length)),a=Math.floor(r/2),o=[],s=0;i>s;s++)for(var c=0;e>c;c++){for(var l=s*e+c,h=0,u=0;r>u;u++)for(var d=0;r>d;d++){var f=s+u-a,p=c+d-a;if(f>=0&&i>f&&p>=0&&e>p){var g=f*e+p,m=n[u*r+d];h+=t[g]*m}}o[l]=2040===h?255:0}return o}function o(t,e,i){for(var n=[1,1,1,1,1,1,1,1,1],r=Math.round(Math.sqrt(n.length)),a=Math.floor(r/2),o=[],s=0;i>s;s++)for(var c=0;e>c;c++){for(var l=s*e+c,h=0,u=0;r>u;u++)for(var d=0;r>d;d++){var f=s+u-a,p=c+d-a;if(f>=0&&i>f&&p>=0&&e>p){var g=f*e+p,m=n[u*r+d];h+=t[g]*m}}o[l]=h>=1020?255:0}return o}function s(t,e,i){for(var n=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],r=Math.round(Math.sqrt(n.length)),a=Math.floor(r/2),o=[],s=0;i>s;s++)for(var c=0;e>c;c++){for(var l=s*e+c,h=0,u=0;r>u;u++)for(var d=0;r>d;d++){var f=s+u-a,p=c+d-a;if(f>=0&&i>f&&p>=0&&e>p){var g=f*e+p,m=n[u*r+d];h+=t[g]*m}}o[l]=h}return o}Kinetic.Filters.Mask=function(t){var e=this.getFilterThreshold(),i=n(t,e);return i&&(i=a(i,t.width,t.height),i=o(i,t.width,t.height),i=s(i,t.width,t.height),r(t,i)),t},Kinetic.Factory.addFilterGetterSetter(Kinetic.Image,"filterThreshold",0)}(),function(){var t=function(t,e,i){t/=255,e/=255,i/=255;var n=Math.max(t,e,i),r=Math.min(t,e,i),a=n-r,o=a/2,s=a/(1-Math.abs(2*o-1)),c=0;return n==t?c=(e-i)/a%6:n==e?c=(i-t)/a+2:n==i&&(c=(t-e)/a+4),[(60*c+360)%360,s,o]},e=function(t,e,i,n){t/=255,e/=255,i/=255;var r=Math.max(t,e,i),a=Math.min(t,e,i),o=r-a,s=o/2,c=(o/(1-Math.abs(2*s-1)),0);r==t?c=(e-i)/o%6:r==e?c=(i-t)/o+2:r==i&&(c=(t-e)/o+4),c*=60,c%=360,c+=n,c%=360,c/=60;var l=0,h=0,u=0,d=o*(1-Math.abs(c%2-1)),f=s-o/2;return c>=0&&1>c?(l=o,h=d):c>=1&&2>c?(h=o,l=d):c>=2&&3>c?(h=o,u=d):c>=3&&4>c?(u=o,h=d):c>=4&&5>c?(u=o,l=d):c>=5&&6>c&&(l=o,u=d),l+=f,h+=f,u+=f,l=255*l,h=255*h,u=255*u,[l,h,u]},i=function(t,i){for(var n,r=t.data,a=0;a<r.length;a+=4)n=e(r[a+0],r[a+1],r[a+2],i),r[a+0]=n[0],r[a+1]=n[1],r[a+2]=n[2]};Kinetic.Filters.ShiftHue=function(t){i(t,this.getFilterHueShiftDeg()%360)},Kinetic.Factory.addFilterGetterSetter(Kinetic.Image,"filterHueShiftDeg",0),Kinetic.Filters.Colorize=function(e){for(var n=e.data,r=this.getFilterColorizeColor(),a=t(r[0],r[1],r[2]),o=a[0],s=0;s<n.length;s+=4)n[s+1]=0,n[s+2]=0;i(e,o)},Kinetic.Factory.addFilterGetterSetter(Kinetic.Image,"filterColorizeColor",[255,0,0])}(),function(){var t=function(t,e){var i=t.data,n=t.width,r=t.height,a=n*r,o=[];o.length=4*n*r;var s,c,l,h,u,d,f,p,g,m,v,y=e.length,x=e[0].length,b=Math.floor(e.length/2),w=Math.floor(e[0].length/2);for(d=0;r>d;d+=1)for(u=0;n>u;u+=1){for(s=0,c=0,l=0,h=0,m=0;y>m;m+=1)for(v=0;x>v;v+=1)f=(u+m-b)%n,f=f>0?f:-f,p=(d+m-w)%r,p=p>0?p:-p,g=4*(p*n+f),s+=e[v][m]*i[g+0],c+=e[v][m]*i[g+1],l+=e[v][m]*i[g+2];g=4*(d*n+u),o[g+0]=s,o[g+1]=c,o[g+2]=l}var _=4*a;for(g=0;_>g;g+=4)i[g+0]=o[g+0],i[g+1]=o[g+1],i[g+2]=o[g+2]},e=function(t,e,i){var n=t-e;return Math.pow(Math.E,-n*n/(2*i*i))},i=function(t,i,n){0===t%2&&(t+=1);var r,a,o,s=[];for(r=0;t>r;r+=1){for(o=[],a=0;t>a;a+=1)o.push(i*e(r,t/2,n)*e(a,t/2,n));s.push(o)}return s},n=function(t,e){var n=i(t,e,1),r=Math.floor(t/2);return n[r][r]+=1-e,n},r=function(t,e){var n=i(t,-e,1),r=Math.floor(t/2);return n[r][r]+=1+e,n};Kinetic.Factory.addFilterGetterSetter(Kinetic.Image,"filterAmount",50),Kinetic.Filters.UnsharpMask=function(e){t(e,r(5,this.getFilterAmount()/100))},Kinetic.Filters.SoftBlur=function(e){t(e,n(5,this.getFilterAmount()/100))},Kinetic.Filters.Edge=function(e){var i=this.getFilterAmount()/100;0!==i&&t(e,[[0,-1*i,0],[-1*i,1-i+4*i,-1*i],[0,-1*i,0]])},Kinetic.Filters.Emboss=function(e){var i=this.getFilterAmount()/100;0!==i&&t(e,[[-1*i,-.5*i,0],[-.5*i,1+.5*i,.5*i],[0,.5*i,1*i]])}}();var page={width:$(document).width(),height:$(document).height(),imageData:null,canvasBorders:20,canvasData:null,dropperActivated:!1,rulerActivated:!1,magnifierActivated:!1,hidden:!1,rulerType:{H:"h",V:"v"},screenWidth:window.innerWidth,screenHeight:window.innerHeight,stage:null,stageUpper:null,stageLower:null,stageCount:0,magnifier:null,previewRulerH:null,previewRulerV:null,themeColor:"#f00",layerUpper:null,layerLower:null,stage:null,defaults:function(){page.canvas=document.createElement("canvas"),page.rects=[],page.screenshoting=!1},messageListener:function(){chrome.runtime.onMessage.addListener(function(t,e,i){switch(t.type){case"edropper-loaded":i({dropperLoaded:!0});break;case"pickup-activate":page.themeColor=t.options.themeColor,page.dropperActivate();break;case"hruler-activate":page.themeColor=t.options.themeColor,page.rulerActivate(page.rulerType.H);break;case"vruler-activate":page.themeColor=t.options.themeColor,page.rulerActivate(page.rulerType.V);break;case"pickup-deactivate":page.dropperDeactivate();break;case"update-image":page.imageData=t.data,page.capture();break;case"cancel":page.onCancel()}})},sendMessage:function(t){chrome.extension.connect().postMessage(t)},i18nReplace:function(t,e){return $("#"+t).text(chrome.i18n.getMessage(e||t))},rulerActivate:function(t){page.rulerActivated||(page.rulerActivated=!0,$("#designertools-c1").show(),page.show(),page.i18nReplace("designertools-tip","rulerActivatedTip"),page.i18nReplace("designertools-esc","deactivateTip"),page.screenChanged(),page.magnifierActivate(),t==page.rulerType.H?(page.previewRulerH||(page.previewRulerH=new Kinetic.Line({points:[0,.5,page.width,.5],stroke:page.themeColor,strokeWidth:1})),page.layerUpper.add(page.previewRulerH),document.addEventListener("mousemove",page.dragRulerH,!1),document.addEventListener("click",page.setRulerH,!1)):t==page.rulerType.V&&(page.previewRulerV||(page.previewRulerV=new Kinetic.Line({points:[.5,0,.5,page.height],stroke:page.themeColor,strokeWidth:1})),page.layerUpper.add(page.previewRulerV),document.addEventListener("mousemove",page.dragRulerV,!1),document.addEventListener("click",page.setRulerV,!1)))},rulerDeactivate:function(){page.rulerActivated&&(page.rulerActivated=!1,page.i18nReplace("designertools-tip","designertoolsActivatedTip"),page.i18nReplace("designertools-esc","hideTip"),page.previewRulerH&&page.previewRulerH.remove(),page.previewRulerV&&page.previewRulerV.remove(),page.magnifierDeactivate(),document.removeEventListener("mousemove",page.dragRulerH,!1),document.removeEventListener("click",page.setRulerH,!1),document.removeEventListener("mousemove",page.dragRulerV,!1),document.removeEventListener("click",page.setRulerV,!1))},dropperActivate:function(){page.dropperActivated||(page.dropperActivated=!0,$("#designertools-c1").show(),page.show(),page.i18nReplace("designertools-tip","colorpickerActivatedTip"),page.i18nReplace("designertools-esc","deactivateTip"),page.screenChanged(),page.magnifierActivate(),$(document).bind("scrollstop",page.onScrollStop),document.addEventListener("mousemove",page.onMouseMove,!1),document.addEventListener("click",page.onMouseClick,!1))},dropperDeactivate:function(){page.dropperActivated&&($("#designertools-overlay").css("cursor","default"),page.dropperActivated=!1,$("#designertools-c1").show(),page.i18nReplace("designertools-tip","designertoolsActivatedTip"),page.i18nReplace("designertools-esc","hideTip"),page.magnifierDeactivate(),document.removeEventListener("mousemove",page.onMouseMove,!1),document.removeEventListener("click",page.onMouseClick,!1),$(document).unbind("scrollstop",page.onScrollStop))
},dragRulerH:function(t){page.rulerActivated&&page.previewRulerH.setPosition(0,t.pageY-page.YOffset)},setRulerH:function(t){var e=new Kinetic.Group;e.add(new Kinetic.Line({points:[0,.5,page.width,.5],stroke:page.themeColor,strokeWidth:1}));for(var i=1;i<page.width/10;i++){var n=4.5;0==i%10&&(n=8.5),e.add(new Kinetic.Line({points:[10*i+.5,.5,10*i+.5,n],stroke:page.themeColor,strokeWidth:1}))}e.setPosition(0,t.pageY),page.layerLower.add(e),page.layerLower.batchDraw()},dragRulerV:function(t){page.rulerActivated&&page.previewRulerV.setPosition(t.pageX- -page.XOffset,0)},setRulerV:function(t){var e=new Kinetic.Group;e.add(new Kinetic.Line({points:[.5,0,.5,page.height],stroke:page.themeColor,strokeWidth:1}));for(var i=1;i<page.height/10;i++){var n=4.5;0==i%10&&(n=8.5),e.add(new Kinetic.Line({points:[.5,10*i+.5,n,10*i+.5],stroke:page.themeColor,strokeWidth:1}))}e.setPosition(t.pageX,0),page.layerLower.add(e),page.layerLower.batchDraw()},onMouseMove:function(){!page.dropperActivated},onMouseClick:function(t){page.dropperActivated&&(t.preventDefault(),page.layerUpper.clear(),page.setColor(t))},onScrollStop:function(){page.dropperActivated&&page.screenChanged()},onScrollStart:function(){!page.dropperActivated},onContextMenu:function(t){page.dropperActivated&&(t.preventDefault(),page.dropperDeactivate())},onWindowResize:function(){page.dropperActivated&&(page.defaults(),page.width=$(document).width(),page.height=$(document).height(),page.screenWidth=$(window).width(),page.screenHeight=$(window).height(),$("#designertools-overlay").css("width",page.width).css("height",page.height),page.screenChanged())},drawColorIndicator:function(t,e,i){var n="#"+page.pickColor(e,i).rgbhex.toUpperCase(),r=1,a=1;page.screenWidth-(e-page.XOffset)<150&&(r=-1),i-page.YOffset<180&&(a=-1);var o=new Kinetic.Group({x:e,y:i,rotation:-Math.atan(.75*a*r)+(-1==r?Math.PI:0)});o.add(new Kinetic.Line({points:[0,0,4,3],stroke:page.themeColor,strokeWidth:1})).add(new Kinetic.Line({points:[0,0,4,-3],stroke:page.themeColor,strokeWidth:1})).add(new Kinetic.Line({points:[0,0,50,0],stroke:page.themeColor,strokeWidth:1}));var s=new Kinetic.Group({x:e+40*r,y:i-30*a});s.add(new Kinetic.Rect({x:-5,y:-5,width:10,height:10,fill:page.themeColor})).add(new Kinetic.Rect({x:-4,y:-4,width:8,height:8,fill:n}));var c=new Kinetic.Group({x:e+75*r,y:i-30*a});c.add(new Kinetic.Text({x:-24,y:-6,fontFamily:"Arial",fontSize:12,fill:"#ffffff",stroke:"#ffffff",strokeWidth:2,text:n})).add(new Kinetic.Text({x:-24,y:-6,fontFamily:"Arial",fontSize:12,fill:page.themeColor,text:n})),t.add(o).add(s).add(c),t.batchDraw()},setColor:function(t){page.drawColorIndicator(page.layerLower,t.pageX,t.pageY)},magnifierActivate:function(){if(!page.magnifierActivated){if(page.magnifierActivated=!0,!page.magnifier){page.magnifier=new Kinetic.Group({x:0,y:0});for(var t=-14;15>t;t++)for(var e=-10;11>e;e++){var i=new Kinetic.Rect({x:4*t-3,y:4*e-3,width:4,height:4,fill:"#ffffff",id:t+"*"+e,name:"colorRect"});page.magnifier.add(i)}page.magnifier.add(new Kinetic.Rect({x:-61,y:-45,fill:"rgba(0,0,0,0)",strokeWidth:2,stroke:"rgba(0,0,0,100)",width:120,height:88})).add(new Kinetic.Rect({x:-60,y:-44,strokeWidth:2,stroke:"#ffffff",width:118,height:86})).add(new Kinetic.Rect({x:-62,y:43,fill:"rgba(0,0,0,1)",width:122,height:36})).add(new Kinetic.Text({x:-54,y:48,fontFamily:"Arial",fontSize:12,fill:"#ffffff",text:"abc"})).add(new Kinetic.Text({x:-54,y:63,fontFamily:"Arial",textAlign:"left",fontSize:12,fill:"#ffffff",text:"def"})).add(new Kinetic.Line({points:[-58,-1,56,-1],stroke:"rgba(76,198,255,0.9)",strokeWidth:4})).add(new Kinetic.Line({points:[-1,-42,-1,40],stroke:"rgba(76,198,255,0.9)",strokeWidth:4}))}page.layerUpper.add(page.magnifier),document.addEventListener("mousemove",page.dragMagnifier,!1)}},magnifierDeactivate:function(){page.magnifierActivated&&(page.magnifierActivated=!1,page.magnifier&&page.magnifier.remove(),document.removeEventListener("mousemove",page.dragMagnifier,!1))},dragMagnifier:function(t){if(!page.screenshoting){var e={x:t.pageX-page.XOffset+65,y:t.pageY-page.YOffset+70};page.screenWidth-(t.pageX-page.XOffset)<150&&(e.x=t.pageX-page.XOffset-60),page.screenHeight-(t.pageY-page.YOffset)<180&&(e.y=t.pageY-page.YOffset-90),page.magnifier.setPosition(e.x,e.y);var i=page.pickColor(t.pageX,t.pageY);page.magnifier.get("Text").each(function(t,e){0==e?t.setText("#"+String(i.rgbhex).toUpperCase()):1==e&&t.setText("RGB:("+i.r+","+i.g+","+i.b+")")}),page.magnifier.get(".colorRect").each(function(e){var i=e.getId().split("*");e.setFill("#"+page.pickColor(t.pageX+Number(i[0]),t.pageY+Number(i[1])).rgbhex)}),page.layerUpper.batchDraw()}},rectInRect:function(t,e){return t.x>=e.x&&t.y>=e.y&&t.x+t.width<=e.x+e.width&&t.y+t.height<=e.y+e.height?!0:!1},rectMergeGeneric:function(t,e,i){return t>e&&(tmp=e,e=t,t=tmp),t+i>=e?{a:t,length:e-t+i}:!1},rectMerge:function(t,e){var i;if(t.x==e.x&&t.width==e.width){if(i=page.rectMergeGeneric(t.y,e.y,t.height),0!=i)return t.y=i.a,t.height=length,t}else if(t.y==e.y&&t.height==e.height&&(i=page.rectMergeGeneric(t.x,e.x,t.width),0!=i))return t.x=i.a,t.width=length,t;return!1},pickColor:function(t,e){if(null!==page.canvasData){var i=4*(t+e*page.canvas.width),n={r:page.canvasData[i],g:page.canvasData[i+1],b:page.canvasData[i+2],alpha:page.canvasData[i+3]};return n.rgbhex=page.rgbToHex(n.r,n.g,n.b),n.opposite=page.rgbToHex(255-n.r,255-n.g,255-n.b),n}},toHex:function(t){if(void 0===t)return"FF";for(var e=t.toString(16);e.length<2;)e="0"+e;return e},rgbToHex:function(t,e,i){return page.toHex(t)+page.toHex(e)+page.toHex(i)},checkCanvas:function(){(page.canvas.width!=page.width+page.canvasBorders||page.canvas.height!=page.height+page.canvasBorders)&&(page.canvas=document.createElement("canvas"),page.canvas.width=page.width+page.canvasBorders,page.canvas.height=page.height+page.canvasBorders,page.canvasContext=page.canvas.getContext("2d"),page.rects=[])},screenChanged:function(t){page.YOffset=$(document).scrollTop(),page.XOffset=$(document).scrollLeft();var e={x:page.XOffset,y:page.YOffset,width:page.screenWidth,height:page.screenHeight};if(!t&&page.rects.length>0)for(index in page.rects)if(page.rectInRect(e,page.rects[index]))return;$("#designertools-stageUpper").css("top",window.scrollY+"px").css("left",window.scrollX+"px"),page.screenshoting=!0,$("#designertools-overlay").css("cursor","progress"),page.sendMessage({type:"screenshot"},function(){})},capture:function(){page.checkCanvas();var t=document.createElement("img");t.onload=function(){var e={x:page.XOffset,y:page.YOffset,width:t.width,height:t.height},i=!1;if(page.rects.length>0)for(index in page.rects){var n=page.rectMerge(e,page.rects[index]);0!=n&&(i=!0,page.rects[index]=n)}0==i&&page.rects.push(e),page.canvasContext.drawImage(t,page.XOffset,page.YOffset),page.canvasData=page.canvasContext.getImageData(0,0,page.canvas.width,page.canvas.height).data,page.screenshoting=!1,$("#designertools-overlay").css("cursor","default")},t.src=page.imageData},show:function(){page.hidden=!1,$("#designertools-overlay").show(),page.i18nReplace("designertools-tip","designertoolsActivatedTip"),page.i18nReplace("designertools-esc","hideTip")},hide:function(){page.hidden=!0,$("#designertools-overlay").hide(),page.i18nReplace("designertools-tip","designertoolsDeactivatedTip"),page.i18nReplace("designertools-esc","showTip")},onCancel:function(t){return page.dropperActivated?(page.dropperDeactivate(),page.layerUpper.draw(),void 0):page.rulerActivated?(page.rulerDeactivate(),page.layerUpper.draw(),void 0):(t&&(page.hidden?page.show():page.hide()),void 0)},init:function(){if(!document.body.hasAttribute("designertools_injected")){document.body.setAttribute("designertools_injected",!0),page.width=$(document).width(),page.height=$(document).height(),page.screenWidth=$(window).width(),page.screenHeight=$(window).height(),console.log(page.width,page.screenWidth),page.messageListener(),$("body").before('<div id="designertools-c1"><div id="designertools-c2"><div id="designertools-c3"><span id="designertools-tip"></span><span id="designertools-esc"></span></div><img id="designertools-close" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAALFJREFUeNqMkk0OAUEQhSvE2PgNzmVOYCEWbkTib2QwiMS1LIkDjNe8SiqlJV7yLebVT1dXj8hHYzADDflWC+RgqsYI3EEJdkxQdcCJsQcby4KGEroloA72LrbWLrkLbIn1jqCrRzdB5hIsZ5usqvJIn1xwvLcqpiD5saUy4kkfXP8daRBJ3oBVpKgnvL0NHDheLbK9ZSiYgCeNi9tG2zS8gaGYXyPjm3gFbw7S8PESYACUf0fkQ53xHwAAAABJRU5ErkJggg=="></div></div>').before('<div id="designertools-overlay" style="width: '+page.width+"px; height: "+page.height+'px;"><div id="designertools-stageUpper"></div><div id="designertools-stageLower"></div></div>'),page.show();var t=function(t){var e=t.keyCode;return 27==e?page.onCancel(!1):void 0};page.stageLower=new Kinetic.Stage({container:"designertools-stageLower",width:page.width,height:page.height}),page.layerLower=new Kinetic.Layer,page.stageLower.add(page.layerLower),page.stageUpper=new Kinetic.Stage({container:"designertools-stageUpper",width:page.screenWidth,height:page.screenHeight}),page.layerUpper=new Kinetic.Layer,page.stageUpper.add(page.layerUpper),$("#designertools-esc").click(function(){page.onCancel(!0)}),$("body").keydown(t),$("#designertools-close").click(function(){$("#designertools-c1").hide()}),page.defaults()}}};page.init(),window.onresize=function(){page.onWindowResize()};